<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Release Notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <link href="/media/css/fontawesome.css?18db9df6" rel="stylesheet">
  <link rel="stylesheet" href="/media/css/bootstrap-4.4.1.min.css">
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" type="text/css" href="/dyncss/base.css?18db9df6">

  <script src="/media/js/theme.js?18db9df6"></script>

  

  <base href="/docs/11/" />


  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          <!-- Header -->
          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand p-0" href="/">
              <img class="logo" src="/media/img/about/press/elephant.png" alt="PostgreSQL Elephant Logo">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#pgNavbar" aria-controls="pgNavbar" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="pgNavbar">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item p-2"><a href="/" title="Home">Home</a></li>
                <li class="nav-item p-2"><a href="/about/" title="About">About</a></li>
                <li class="nav-item p-2"><a href="/download/" title="Download">Download</a></li>
                <li class="nav-item p-2"><a href="/docs/" title="Documentation">Documentation</a></li>
                <li class="nav-item p-2"><a href="/community/" title="Community">Community</a></li>
                <li class="nav-item p-2"><a href="/developer/" title="Developers">Developers</a></li>
                <li class="nav-item p-2"><a href="/support/" title="Support">Support</a></li>
                <li class="nav-item p-2"><a href="/about/donate/" title="Donate">Donate</a></li>
                <li class="nav-item p-2"><a href="/account/" title="Your account">Your account</a></li>
              </ul>
              <form role="search" method="get" action="/search/">
                <div class="input-group">
                  <input id="q" name="q" type="text" size="20" maxlength="255" accesskey="s"  class="form-control" placeholder="Search for...">
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div><!-- /input-group -->
              </form>
              <form id="form-theme" class="form-inline d-none">
                <button id="btn-theme" class="btn btn-default ml-1" type="button"></button>
              </form>
            </div>
          </nav>
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">November 21, 2024: <a href="/about/news/postgresql-172-166-1510-1415-1318-and-1222-released-2965/">
  PostgreSQL 17.2, 16.6, 15.10, 14.15, 13.18, and 12.22 Released!
</a>

</div>
      </div>
    </div>
    
<div class="container-fluid margin">
  <div class="row">
    <div class="col-lg-2">
      <div id="pgSideWrap">
       
       <div id="pgSideNav">
         <h2>Quick Links</h2>

         <ul>
           
           
           <li><a href="/docs/">Documentation</a>
            
            
           
           </li>
           <li><a href="/docs/">Manuals</a>
            
             <ul>
             
              <li class="last-child"><a href="/docs/manuals/archive/">Archive</a></li>
             
             </ul>
            
            
           
           </li>
           <li><a href="/docs/release/">Release Notes</a>
            
            
           
           </li>
           <li><a href="/docs/books/">Books</a>
            
            
           
           </li>
           <li><a href="/docs/online-resources/">Tutorials &amp; Other Resources</a>
            
            
           
           </li>
           <li><a href="/docs/faq/">FAQ</a>
            
            
           
           </li>
           <li class="last-child"><a href="https://wiki.postgresql.org">Wiki</a>
            
            
           </li>
            
           
        </ul>

       </div>
       
      </div> <!-- pgSideWrap -->
    </div>
    <div class="col-lg-10">
      <div id="pgContentWrap">
        


<div id="release-notes" class="row">
    <div class="col-md-10">
      <section>
        <h1>Release Notes <i class="far fa-file-alt"></i></h1>
        <h2>
          PostgreSQL
          11.4
        </h2>
      </section>
      <div id="docContent">
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">E.19.&nbsp;Release 11.4</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="release-11-5.html" title="E.18.&nbsp;Release 11.5">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix&nbsp;E.&nbsp;Release Notes">Up</a></td>
      <th width="60%" align="center">Appendix&nbsp;E.&nbsp;Release Notes</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 11.22 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="release-11-3.html" title="E.20.&nbsp;Release 11.3">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="RELEASE-11-4">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">E.19.&nbsp;Release 11.4</h2>
      </div>
    </div>
  </div>
  <div class="toc">
    <dl class="toc">
      <dt><span class="sect2"><a href="release-11-4.html#id-1.11.6.23.4">E.19.1. Migration to Version 11.4</a></span></dt>
      <dt><span class="sect2"><a href="release-11-4.html#id-1.11.6.23.5">E.19.2. Changes</a></span></dt>
    </dl>
  </div>
  <p><strong>Release date:&nbsp;</strong>2019-06-20</p>
  <p>This release contains a variety of fixes from 11.3. For information about new features in major release 11, see <a class="xref" href="release-11.html" title="E.23.&nbsp;Release 11">Section&nbsp;E.23</a>.</p>
  <div class="sect2" id="id-1.11.6.23.4">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">E.19.1.&nbsp;Migration to Version 11.4</h3>
        </div>
      </div>
    </div>
    <p>A dump/restore is not required for those running 11.X.</p>
    <p>However, if you are upgrading from a version earlier than 11.1, see <a class="xref" href="release-11-1.html" title="E.22.&nbsp;Release 11.1">Section&nbsp;E.22</a>.</p>
  </div>
  <div class="sect2" id="id-1.11.6.23.5">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">E.19.2.&nbsp;Changes</h3>
        </div>
      </div>
    </div>
    <div class="itemizedlist">
      <ul class="itemizedlist" style="list-style-type: disc;">
        <li class="listitem">
          <p>Fix buffer-overflow hazards in SCRAM verifier parsing (Jonathan Katz, Heikki Linnakangas, Michael Paquier)</p>
          <p>Any authenticated user could cause a stack-based buffer overflow by changing their own password to a purpose-crafted value. In addition to the ability to crash the <span class="productname">PostgreSQL</span> server, this could suffice for executing arbitrary code as the <span class="productname">PostgreSQL</span> operating system account.</p>
          <p>A similar overflow hazard existed in <span class="application">libpq</span>, which could allow a rogue server to crash a client or perhaps execute arbitrary code as the client's operating system account.</p>
          <p>The <span class="productname">PostgreSQL</span> Project thanks Alexander Lakhin for reporting this problem. (CVE-2019-10164)</p>
        </li>
        <li class="listitem">
          <p>Fix assorted errors in run-time partition pruning logic (Tom Lane, Amit Langote, David Rowley)</p>
          <p>These mistakes could lead to wrong answers in queries on partitioned tables, if the comparison value used for pruning is dynamically determined, or if multiple range-partitioned columns are involved in pruning decisions, or if stable (not immutable) comparison operators are involved.</p>
        </li>
        <li class="listitem">
          <p>Fix possible crash while trying to copy trigger definitions to a new partition (Tom Lane)</p>
        </li>
        <li class="listitem">
          <p>Fix failure of <code class="command">ALTER TABLE ... ALTER COLUMN TYPE</code> when the table has a partial exclusion constraint (Tom Lane)</p>
        </li>
        <li class="listitem">
          <p>Fix failure of <code class="command">COMMENT</code> command for comments on domain constraints (Daniel Gustafsson, Michael Paquier)</p>
        </li>
        <li class="listitem">
          <p>Prevent possible memory clobber when there are duplicate columns in a hash aggregate's hash key list (Andrew Gierth)</p>
        </li>
        <li class="listitem">
          <p>Fix incorrect argument null-ness checking during partial aggregation of aggregates with zero or multiple arguments (David Rowley, Kyotaro Horiguchi, Andres Freund)</p>
        </li>
        <li class="listitem">
          <p>Fix faulty generation of merge-append plans (Tom Lane)</p>
          <p>This mistake could lead to <span class="quote">“<span class="quote">could not find pathkey item to sort</span>”</span> errors.</p>
        </li>
        <li class="listitem">
          <p>Fix incorrect printing of queries with duplicate join names (Philip Dubé)</p>
          <p>This oversight caused a dump/restore failure for views containing such queries.</p>
        </li>
        <li class="listitem">
          <p>Fix conversion of JSON string literals to JSON-type output columns in <code class="function">json_to_record()</code> and <code class="function">json_populate_record()</code> (Tom Lane)</p>
          <p>Such cases should produce the literal as a standalone JSON value, but the code misbehaved if the literal contained any characters requiring escaping.</p>
        </li>
        <li class="listitem">
          <p>Fix misoptimization of <code class="literal">{1,1}</code> quantifiers in regular expressions (Tom Lane)</p>
          <p>Such quantifiers were treated as no-ops and optimized away; but the documentation specifies that they impose greediness, or non-greediness in the case of the non-greedy variant <code class="literal">{1,1}?</code>, on the subexpression they're attached to, and this did not happen. The misbehavior occurred only if the subexpression contained capturing parentheses or a back-reference.</p>
        </li>
        <li class="listitem">
          <p>Avoid writing an invalid empty btree index page in the unlikely case that a failure occurs while processing INCLUDEd columns during a page split (Peter Geoghegan)</p>
          <p>The invalid page would not affect normal index operations, but it might cause failures in subsequent VACUUMs. If that has happened to one of your indexes, recover by reindexing the index.</p>
        </li>
        <li class="listitem">
          <p>Avoid possible failures while initializing a new process's <code class="structname">pg_stat_activity</code> data (Tom Lane)</p>
          <p>Certain operations that could fail, such as converting strings extracted from an SSL certificate into the database encoding, were being performed inside a critical section. Failure there would result in database-wide lockup due to violating the access protocol for shared <code class="structname">pg_stat_activity</code> data.</p>
        </li>
        <li class="listitem">
          <p>Fix race condition in check to see whether a pre-existing shared memory segment is still in use by a conflicting postmaster (Tom Lane)</p>
        </li>
        <li class="listitem">
          <p>Fix unsafe coding in walreceiver's signal handler (Tom Lane)</p>
          <p>This avoids rare problems in which the walreceiver process would crash or deadlock when commanded to shut down.</p>
        </li>
        <li class="listitem">
          <p>Avoid attempting to do database accesses for parameter checking in processes that are not connected to a specific database (Vignesh C, Andres Freund)</p>
          <p>This error could result in failures like <span class="quote">“<span class="quote">cannot read pg_class without having selected a database</span>”</span>.</p>
        </li>
        <li class="listitem">
          <p>Avoid possible hang in <span class="application">libpq</span> if using SSL and OpenSSL's pending-data buffer contains an exact multiple of 256 bytes (David Binderman)</p>
        </li>
        <li class="listitem">
          <p>Improve <span class="application">initdb</span>'s handling of multiple equivalent names for the system time zone (Tom Lane, Andrew Gierth)</p>
          <p>Make <span class="application">initdb</span> examine the <code class="filename">/etc/localtime</code> symbolic link, if that exists, to break ties between equivalent names for the system time zone. This makes <span class="application">initdb</span> more likely to select the time zone name that the user would expect when multiple identical time zones exist. It will not change the behavior if <code class="filename">/etc/localtime</code> is not a symlink to a zone data file, nor if the time zone is determined from the <code class="envar">TZ</code> environment variable.</p>
          <p>Separately, prefer <code class="literal">UTC</code> over other spellings of that time zone, when neither <code class="envar">TZ</code> nor <code class="filename">/etc/localtime</code> provide a hint. This fixes an annoyance introduced by <span class="application">tzdata</span> 2019a's change to make the <code class="literal">UCT</code> and <code class="literal">UTC</code> zone names equivalent: <span class="application">initdb</span> was then preferring <code class="literal">UCT</code>, which almost nobody wants.</p>
        </li>
        <li class="listitem">
          <p>Fix ordering of <code class="command">GRANT</code> commands emitted by <span class="application">pg_dump</span> and <span class="application">pg_dumpall</span> for databases and tablespaces (Nathan Bossart, Michael Paquier)</p>
          <p>If cascading grants had been issued, restore might fail due to the <code class="command">GRANT</code> commands being given in an order that didn't respect their interdependencies.</p>
        </li>
        <li class="listitem">
          <p>Make <span class="application">pg_dump</span> recreate table partitions using <code class="command">CREATE TABLE</code> then <code class="command">ATTACH PARTITION</code>, rather than including <code class="literal">PARTITION OF</code> in the creation command (Álvaro Herrera, David Rowley)</p>
          <p>This avoids problems with the partition's column order possibly being changed to match the parent's. Also, a partition is now restorable from the dump (as a standalone table) even if its parent table isn't restored; the <code class="command">ATTACH</code> will fail, but that can just be ignored.</p>
        </li>
        <li class="listitem">
          <p>Fix misleading error reports from <span class="application">reindexdb</span> (Julien Rouhaud)</p>
        </li>
        <li class="listitem">
          <p>Ensure that <span class="application">vacuumdb</span> returns correct status if an error occurs while using parallel jobs (Julien Rouhaud)</p>
        </li>
        <li class="listitem">
          <p>Fix <code class="filename">contrib/auto_explain</code> to not cause problems in parallel queries (Tom Lane)</p>
          <p>Previously, a parallel worker might try to log its query even if the parent query were not being logged by <code class="filename">auto_explain</code>. This would work sometimes, but it's confusing, and in some cases it resulted in failures like <span class="quote">“<span class="quote">could not find key N in shm TOC</span>”</span>.</p>
          <p>Also, fix an off-by-one error that resulted in not necessarily logging every query even when the sampling rate is set to 1.0.</p>
        </li>
        <li class="listitem">
          <p>In <code class="filename">contrib/postgres_fdw</code>, account for possible data modifications by local <code class="literal">BEFORE ROW UPDATE</code> triggers (Shohei Mochizuki)</p>
          <p>If a trigger modified a column that was otherwise not changed by the <code class="command">UPDATE</code>, the new value was not transmitted to the remote server.</p>
        </li>
        <li class="listitem">
          <p>On Windows, avoid failure when the database encoding is set to SQL_ASCII and we attempt to log a non-ASCII string (Noah Misch)</p>
          <p>The code had been assuming that such strings must be in UTF-8, and would throw an error if they didn't appear to be validly encoded. Now, just transmit the untranslated bytes to the log.</p>
        </li>
        <li class="listitem">
          <p>Make <span class="application">PL/pgSQL</span>'s header files C++-safe (George Tarasov)</p>
        </li>
      </ul>
    </div>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="release-11-5.html" title="E.18.&nbsp;Release 11.5">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="release.html" title="Appendix&nbsp;E.&nbsp;Release Notes">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="release-11-3.html" title="E.20.&nbsp;Release 11.3">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">E.18.&nbsp;Release 11.5&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 11.22 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;E.20.&nbsp;Release 11.3</td>
    </tr>
  </table>
</div>

      </div>
      <div class="row">
        <div class="col-md-3">
	  
            <a href="/docs/release/11.3/">
              Previous
            </a>
          
        </div>
        <div class="col-md-6 text-center">
          <p>
            <a href="/docs/release/">
              Return to the Release Notes Archive
            </a>
          </p>
        </div>
        <div class="col-md-3 text-right">
	   
            <a href="/docs/release/11.5/">
              Next
            </a>
          
        </div>
      </div>
    </div>
    <div class="col-md-2 version-list">
      <section>
        <h2>Versions</h2>
      </section>
      <ul>
        
          <li>
            
              <a href="/docs/release/11.22/">
                11.22
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.21/">
                11.21
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.20/">
                11.20
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.19/">
                11.19
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.18/">
                11.18
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.17/">
                11.17
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.16/">
                11.16
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.15/">
                11.15
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.14/">
                11.14
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.13/">
                11.13
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.12/">
                11.12
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.11/">
                11.11
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.10/">
                11.10
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.9/">
                11.9
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.8/">
                11.8
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.7/">
                11.7
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.6/">
                11.6
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.5/">
                11.5
              </a>
            
          </li>
        
          <li>
            
              <strong>
                11.4
              </strong>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.3/">
                11.3
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.2/">
                11.2
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.1/">
                11.1
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.0/">
                11.0
              </a>
            
          </li>
        
      </ul>
    </div>
</div>


      </div> <!-- pgContentWrap -->
    </div>
  </div>
</div>

    <!-- Footer -->
    <footer id="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <ul>
              <li><a href="https://twitter.com/postgresql"><img src="/media/img/atpostgresql.png" alt="@postgresql"></a></li>
              <li><a href="https://git.postgresql.org/gitweb/?p=postgresql.git"><img src="/media/img/git.png" alt="Git"></a></li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Copyright -->
      <div class="container">
        <a href="/about/policies/">Policies</a> |
        <a href="/about/policies/coc/">Code of Conduct</a> |
        <a href="/about/">About PostgreSQL</a> |
        <a href="/about/contact/">Contact</a><br/>
        <p>Copyright &copy; 1996-2024 The PostgreSQL Global Development Group</p>
      </div>
    </footer>
    <script src="/media/js/jquery-3.4.1.slim.min.js"></script>
    <script src="/media/js/popper-1.16.0.min.js"></script>
    <script src="/media/js/bootstrap-4.4.1.min.js"></script>
    <script src="/media/js/main.js?18db9df6"></script>

  </body>
</html>
