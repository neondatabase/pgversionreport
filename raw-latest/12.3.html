<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Release Notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <link href="/media/css/fontawesome.css?18db9df6" rel="stylesheet">
  <link rel="stylesheet" href="/media/css/bootstrap-4.4.1.min.css">
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" type="text/css" href="/dyncss/base.css?18db9df6">

  <script src="/media/js/theme.js?18db9df6"></script>

  

  <base href="/docs/12/" />


  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          <!-- Header -->
          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand p-0" href="/">
              <img class="logo" src="/media/img/about/press/elephant.png" alt="PostgreSQL Elephant Logo">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#pgNavbar" aria-controls="pgNavbar" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="pgNavbar">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item p-2"><a href="/" title="Home">Home</a></li>
                <li class="nav-item p-2"><a href="/about/" title="About">About</a></li>
                <li class="nav-item p-2"><a href="/download/" title="Download">Download</a></li>
                <li class="nav-item p-2"><a href="/docs/" title="Documentation">Documentation</a></li>
                <li class="nav-item p-2"><a href="/community/" title="Community">Community</a></li>
                <li class="nav-item p-2"><a href="/developer/" title="Developers">Developers</a></li>
                <li class="nav-item p-2"><a href="/support/" title="Support">Support</a></li>
                <li class="nav-item p-2"><a href="/about/donate/" title="Donate">Donate</a></li>
                <li class="nav-item p-2"><a href="/account/" title="Your account">Your account</a></li>
              </ul>
              <form role="search" method="get" action="/search/">
                <div class="input-group">
                  <input id="q" name="q" type="text" size="20" maxlength="255" accesskey="s"  class="form-control" placeholder="Search for...">
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div><!-- /input-group -->
              </form>
              <form id="form-theme" class="form-inline d-none">
                <button id="btn-theme" class="btn btn-default ml-1" type="button"></button>
              </form>
            </div>
          </nav>
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">November 21, 2024: <a href="/about/news/postgresql-172-166-1510-1415-1318-and-1222-released-2965/">
  PostgreSQL 17.2, 16.6, 15.10, 14.15, 13.18, and 12.22 Released!
</a>

</div>
      </div>
    </div>
    
<div class="container-fluid margin">
  <div class="row">
    <div class="col-lg-2">
      <div id="pgSideWrap">
       
       <div id="pgSideNav">
         <h2>Quick Links</h2>

         <ul>
           
           
           <li><a href="/docs/">Documentation</a>
            
            
           
           </li>
           <li><a href="/docs/">Manuals</a>
            
             <ul>
             
              <li class="last-child"><a href="/docs/manuals/archive/">Archive</a></li>
             
             </ul>
            
            
           
           </li>
           <li><a href="/docs/release/">Release Notes</a>
            
            
           
           </li>
           <li><a href="/docs/books/">Books</a>
            
            
           
           </li>
           <li><a href="/docs/online-resources/">Tutorials &amp; Other Resources</a>
            
            
           
           </li>
           <li><a href="/docs/faq/">FAQ</a>
            
            
           
           </li>
           <li class="last-child"><a href="https://wiki.postgresql.org">Wiki</a>
            
            
           </li>
            
           
        </ul>

       </div>
       
      </div> <!-- pgSideWrap -->
    </div>
    <div class="col-lg-10">
      <div id="pgContentWrap">
        


<div id="release-notes" class="row">
    <div class="col-md-10">
      <section>
        <h1>Release Notes <i class="far fa-file-alt"></i></h1>
        <h2>
          PostgreSQL
          12.3
        </h2>
      </section>
      <div id="docContent">
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">E.20.&nbsp;Release 12.3</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="release-12-4.html" title="E.19.&nbsp;Release 12.4">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix&nbsp;E.&nbsp;Release Notes">Up</a></td>
      <th width="60%" align="center">Appendix&nbsp;E.&nbsp;Release Notes</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 12.22 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="release-12-2.html" title="E.21.&nbsp;Release 12.2">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="RELEASE-12-3">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">E.20.&nbsp;Release 12.3</h2>
      </div>
    </div>
  </div>
  <div class="toc">
    <dl class="toc">
      <dt><span class="sect2"><a href="release-12-3.html#id-1.11.6.25.4">E.20.1. Migration to Version 12.3</a></span></dt>
      <dt><span class="sect2"><a href="release-12-3.html#id-1.11.6.25.5">E.20.2. Changes</a></span></dt>
    </dl>
  </div>
  <p><strong>Release date:&nbsp;</strong>2020-05-14</p>
  <p>This release contains a variety of fixes from 12.2. For information about new features in major release 12, see <a class="xref" href="release-12.html" title="E.23.&nbsp;Release 12">Section&nbsp;E.23</a>.</p>
  <div class="sect2" id="id-1.11.6.25.4">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">E.20.1.&nbsp;Migration to Version 12.3</h3>
        </div>
      </div>
    </div>
    <p>A dump/restore is not required for those running 12.X.</p>
    <p>However, if you are upgrading from a version earlier than 12.2, see <a class="xref" href="release-12-2.html" title="E.21.&nbsp;Release 12.2">Section&nbsp;E.21</a>.</p>
  </div>
  <div class="sect2" id="id-1.11.6.25.5">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">E.20.2.&nbsp;Changes</h3>
        </div>
      </div>
    </div>
    <div class="itemizedlist">
      <ul class="itemizedlist" style="list-style-type: disc;">
        <li class="listitem">
          <p>Fix possible failure with <code class="literal">GENERATED</code> columns (David Rowley) <a class="ulink" href="https://postgr.es/c/a375f11c4" target="_top">§</a></p>
          <p>If a <code class="literal">GENERATED</code> column's value is an exact copy of another column of the table (and it is a pass-by-reference data type), it was possible to crash or insert corrupted data into the table. While it would be rather pointless for a <code class="literal">GENERATED</code> expression to just duplicate another column, an expression using a function that sometimes returns its input unchanged could create the situation.</p>
        </li>
        <li class="listitem">
          <p>Handle inheritance of generated columns better (Peter Eisentraut) <a class="ulink" href="https://postgr.es/c/14751c340" target="_top">§</a></p>
          <p>When a table column is inherited during <code class="command">CREATE TABLE ... INHERITS</code>, disallow changing any generation properties when the parent column is already marked <code class="literal">GENERATED</code>; but allow a child column to be marked <code class="literal">GENERATED</code> when its parent is not.</p>
        </li>
        <li class="listitem">
          <p>Fix cross-column references in <code class="command">CREATE TABLE LIKE INCLUDING GENERATED</code> (Peter Eisentraut) <a class="ulink" href="https://postgr.es/c/f06d583c5" target="_top">§</a></p>
          <p><code class="command">CREATE TABLE ... LIKE</code> failed when trying to copy a <code class="literal">GENERATED</code> expression that references a physically-later column.</p>
        </li>
        <li class="listitem">
          <p>Propagate <code class="command">ALTER TABLE ... SET STORAGE</code> to indexes (Peter Eisentraut) <a class="ulink" href="https://postgr.es/c/bf7233ee4" target="_top">§</a></p>
          <p>Non-expression index columns have always copied the <code class="structfield">attstorage</code> property of their table column at creation. Update them when <code class="command">ALTER TABLE ... SET STORAGE</code> is done, to maintain consistency.</p>
        </li>
        <li class="listitem">
          <p>Preserve the <code class="structfield">indisclustered</code> setting of indexes rewritten by <code class="command">ALTER TABLE</code> (Amit Langote, Justin Pryzby) <a class="ulink" href="https://postgr.es/c/3e62dd3a9" target="_top">§</a></p>
          <p>Previously, <code class="command">ALTER TABLE</code> lost track of which index had been used for <code class="command">CLUSTER</code>.</p>
        </li>
        <li class="listitem">
          <p>Preserve the replica identity properties of indexes rewritten by <code class="command">ALTER TABLE</code> (Quan Zongliang, Peter Eisentraut) <a class="ulink" href="https://postgr.es/c/c9ef507e8" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Preserve the <code class="structfield">indisclustered</code> setting of indexes rebuilt by <code class="command">REINDEX CONCURRENTLY</code> (Justin Pryzby) <a class="ulink" href="https://postgr.es/c/f087d63a4" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Lock objects sooner during <code class="command">DROP OWNED BY</code> (Álvaro Herrera) <a class="ulink" href="https://postgr.es/c/2eea49471" target="_top">§</a></p>
          <p>This avoids failures in race-condition cases where another session is deleting some of the same objects.</p>
        </li>
        <li class="listitem">
          <p>Fix error-case processing for <code class="command">CREATE ROLE ... IN ROLE</code> (Andrew Gierth) <a class="ulink" href="https://postgr.es/c/d0360632d" target="_top">§</a></p>
          <p>Some error cases would be reported as <span class="quote">“<span class="quote">unexpected node type</span>”</span> or the like, instead of the intended message.</p>
        </li>
        <li class="listitem">
          <p>Ensure that when a partition is detached, any triggers cloned from its formerly-parent table are removed (Justin Pryzby) <a class="ulink" href="https://postgr.es/c/e26c8a6b3" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Fix crash when <code class="literal">COLLATE</code> is applied to a non-collatable type in a partition bound expression (Dmitry Dolgov) <a class="ulink" href="https://postgr.es/c/0a9ae1800" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Ensure that unique indexes over partitioned tables match the equality semantics of the partitioning key (Guancheng Luo) <a class="ulink" href="https://postgr.es/c/76ea60696" target="_top">§</a></p>
          <p>This would only be an issue with index opclasses that have unusual notions of equality, but it's wrong in theory, so check.</p>
        </li>
        <li class="listitem">
          <p>Ensure that members of the <code class="literal">pg_read_all_stats</code> role can read all statistics views, as expected (Magnus Hagander) <a class="ulink" href="https://postgr.es/c/212e712a5" target="_top">§</a></p>
          <p>The functions underlying the <code class="structname">pg_stat_progress_*</code> views had not gotten this memo.</p>
        </li>
        <li class="listitem">
          <p>Repair performance regression in <code class="structname">information_schema</code>.<code class="structname">triggers</code> view (Tom Lane) <a class="ulink" href="https://postgr.es/c/64e49a67e" target="_top">§</a></p>
          <p>This patch redefines that view so that an outer <code class="literal">WHERE</code> clause constraining the table name can be pushed down into the view, allowing its calculations to be done only for triggers belonging to the table of interest rather than all triggers in the database. In a database with many triggers this would make a significant speed difference for queries of that form. Since things worked that way before v11, this is a potential performance regression. Users who find this to be a problem can fix it by replacing the view definition (or, perhaps, just deleting and reinstalling the whole <code class="structname">information_schema</code> schema).</p>
        </li>
        <li class="listitem">
          <p>Repair performance regression in floating point overflow/underflow detection (Emre Hasegeli) <a class="ulink" href="https://postgr.es/c/764a554d6" target="_top">§</a></p>
          <p>Previous refactoring had resulted in <code class="function">isinf()</code> being called extra times in some hot code paths.</p>
        </li>
        <li class="listitem">
          <p>Fix full text search to handle NOT above a phrase search correctly (Tom Lane) <a class="ulink" href="https://postgr.es/c/18f7e856c" target="_top">§</a></p>
          <p>Queries such as <code class="literal">!(foo&lt;-&gt;bar)</code> failed to find matching rows when implemented as a GiST or GIN index search.</p>
        </li>
        <li class="listitem">
          <p>Fix full text search for cases where a phrase search includes an item with both prefix matching and a weight restriction (Tom Lane) <a class="ulink" href="https://postgr.es/c/e1d70ba43" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Fix <code class="function">ts_headline()</code> to make better headline selections when working with phrase queries (Tom Lane) <a class="ulink" href="https://postgr.es/c/841378947" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/07453e9e3" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/1306edeae" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Fix bugs in <code class="varname">gin_fuzzy_search_limit</code> processing (Adé Heyward, Tom Lane) <a class="ulink" href="https://postgr.es/c/05f4a8818" target="_top">§</a></p>
          <p>A small value of <code class="varname">gin_fuzzy_search_limit</code> could result in unexpected slowness due to unintentionally rescanning the same index page many times. Another code path failed to apply the intended filtering at all, possibly returning too many values.</p>
        </li>
        <li class="listitem">
          <p>Allow input of type <code class="type">circle</code> to accept the format <span class="quote">“<span class="quote"><code class="literal">(<em class="replaceable"><code>x</code></em>,<em class="replaceable"><code>y</code></em>),<em class="replaceable"><code>r</code></em></code></span>”</span> as the documentation says it does (David Zhang) <a class="ulink" href="https://postgr.es/c/35d1eefb2" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Make the <code class="function">get_bit()</code> and <code class="function">set_bit()</code> functions cope with <code class="type">bytea</code> strings longer than 256MB (Movead Li) <a class="ulink" href="https://postgr.es/c/6e6b74a20" target="_top">§</a></p>
          <p>Since the bit number argument is only <code class="type">int4</code>, it's impossible to use these functions to access bits beyond the first 256MB of a long <code class="type">bytea</code>. We'll widen the argument to <code class="type">int8</code> in v13, but in the meantime, allow these functions to work on the initial substring of a long <code class="type">bytea</code>.</p>
        </li>
        <li class="listitem">
          <p>Ignore file-not-found errors in <code class="function">pg_ls_waldir()</code> and allied functions (Tom Lane) <a class="ulink" href="https://postgr.es/c/ee40e8975" target="_top">§</a></p>
          <p>This prevents a race condition failure if a file is removed between when we see its directory entry and when we attempt to <code class="function">stat()</code> it.</p>
        </li>
        <li class="listitem">
          <p>Avoid possibly leaking an open-file descriptor for a directory in <code class="function">pg_ls_dir()</code>, <code class="function">pg_timezone_names()</code>, <code class="function">pg_tablespace_databases()</code>, and allied functions (Justin Pryzby) <a class="ulink" href="https://postgr.es/c/3c8864fc1" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/630590d6f" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/2a89455aa" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Fix polymorphic-function type resolution to correctly infer the actual type of an <code class="type">anyarray</code> output when given only an <code class="type">anyrange</code> input (Tom Lane) <a class="ulink" href="https://postgr.es/c/390984f92" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Fix server's connection-startup logic for case where a GSSAPI connection is rejected because support is not compiled in, and the client then tries SSL instead (Andrew Gierth) <a class="ulink" href="https://postgr.es/c/79e594cf0" target="_top">§</a></p>
          <p>This led to a bogus <span class="quote">“<span class="quote">unsupported frontend protocol</span>”</span> failure.</p>
        </li>
        <li class="listitem">
          <p>Fix memory leakage during GSSAPI encryption (Tom Lane) <a class="ulink" href="https://postgr.es/c/987717d7c" target="_top">§</a></p>
          <p>Both the backend and libpq would leak memory equivalent to the total amount of data sent during the session, if GSSAPI encryption is in use.</p>
        </li>
        <li class="listitem">
          <p>Fix query-lifespan memory leak for a set-returning function used in a query's <code class="literal">FROM</code> clause (Andres Freund) <a class="ulink" href="https://postgr.es/c/95695c784" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Avoid leakage of a hashed subplan's hash tables across multiple executions (Andreas Karlsson, Tom Lane) <a class="ulink" href="https://postgr.es/c/96d783ae5" target="_top">§</a></p>
          <p>This mistake could result in severe memory bloat if a query re-executed a hashed subplan enough times.</p>
        </li>
        <li class="listitem">
          <p>Improve planner's handling of no-op domain coercions (Tom Lane) <a class="ulink" href="https://postgr.es/c/30d5c6bf2" target="_top">§</a></p>
          <p>Fix some cases where a domain coercion that does nothing was not completely removed from expressions.</p>
        </li>
        <li class="listitem">
          <p>Avoid unlikely crash when <code class="command">REINDEX</code> is terminated by a session-shutdown signal (Tom Lane) <a class="ulink" href="https://postgr.es/c/5a4efd100" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Prevent printout of possibly-incorrect hash join table statistics in <code class="command">EXPLAIN</code> (Konstantin Knizhnik, Tom Lane, Thomas Munro) <a class="ulink" href="https://postgr.es/c/8ffb86644" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Fix reporting of elapsed time for heap truncation steps in <code class="command">VACUUM VERBOSE</code> (Tatsuhito Kasahara) <a class="ulink" href="https://postgr.es/c/16e6c968b" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Fix possible undercounting of deleted B-tree index pages in <code class="command">VACUUM VERBOSE</code> output (Peter Geoghegan) <a class="ulink" href="https://postgr.es/c/40708eaaf" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Fix wrong bookkeeping for oldest deleted page in a B-tree index (Peter Geoghegan) <a class="ulink" href="https://postgr.es/c/05b73261c" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/e1477db92" target="_top">§</a></p>
          <p>This could cause subtly wrong decisions about when <code class="command">VACUUM</code> can skip an index cleanup scan; although it appears there may be no significant user-visible effects from that.</p>
        </li>
        <li class="listitem">
          <p>Ensure that TimelineHistoryRead and TimelineHistoryWrite wait states are reported in all code paths that read or write timeline history files (Masahiro Ikeda) <a class="ulink" href="https://postgr.es/c/a354d0153" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Avoid possibly showing <span class="quote">“<span class="quote">waiting</span>”</span> twice in a process's PS status (Masahiko Sawada) <a class="ulink" href="https://postgr.es/c/82c04e483" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Avoid race condition when <code class="command">ANALYZE</code> replaces the catalog tuple for extended statistics data (Dean Rasheed) <a class="ulink" href="https://postgr.es/c/6c426cd43" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Remove ill-considered skip of <span class="quote">“<span class="quote">redundant</span>”</span> anti-wraparound vacuums (Michael Paquier) <a class="ulink" href="https://postgr.es/c/3ec8576a0" target="_top">§</a></p>
          <p>This avoids a corner case where autovacuum could get into a loop of repeatedly trying and then skipping the same vacuum job.</p>
        </li>
        <li class="listitem">
          <p>Ensure INCLUDE'd columns are always removed from B-tree pivot tuples (Peter Geoghegan) <a class="ulink" href="https://postgr.es/c/97cda93d8" target="_top">§</a></p>
          <p>This mistake wasted space in some rare cases, but was otherwise harmless.</p>
        </li>
        <li class="listitem">
          <p>Cope with invalid TOAST indexes that could be left over after a failed <code class="command">REINDEX CONCURRENTLY</code> (Julien Rouhaud) <a class="ulink" href="https://postgr.es/c/8bca5f935" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Ensure that valid index dependencies are left behind after a failed <code class="command">REINDEX CONCURRENTLY</code> (Michael Paquier) <a class="ulink" href="https://postgr.es/c/26876127b" target="_top">§</a></p>
          <p>Previously the old index could be left with no <code class="structname">pg_depend</code> links at all, so that for example it would not get dropped if the parent table is dropped.</p>
        </li>
        <li class="listitem">
          <p>Avoid failure if autovacuum tries to access a just-dropped temporary schema (Tom Lane) <a class="ulink" href="https://postgr.es/c/d7684c38a" target="_top">§</a></p>
          <p>This hazard only arises if a superuser manually drops a temporary schema; which isn't normal practice, but should work.</p>
        </li>
        <li class="listitem">
          <p>Avoid premature recycling of WAL segments during crash recovery (Jehan-Guillaume de Rorthais) <a class="ulink" href="https://postgr.es/c/22db5269b" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/26057550d" target="_top">§</a></p>
          <p>WAL segments that become ready to be archived during crash recovery were potentially recycled without being archived.</p>
        </li>
        <li class="listitem">
          <p>Avoid scanning irrelevant timelines during archive recovery (Kyotaro Horiguchi) <a class="ulink" href="https://postgr.es/c/683e0ef55" target="_top">§</a></p>
          <p>This can eliminate many attempts to fetch non-existent WAL files from archive storage, which is helpful if archive access is slow.</p>
        </li>
        <li class="listitem">
          <p>Remove bogus <span class="quote">“<span class="quote">subtransaction logged without previous top-level txn record</span>”</span> error check in logical decoding (Arseny Sher, Amit Kapila) <a class="ulink" href="https://postgr.es/c/59112f235" target="_top">§</a></p>
          <p>This condition is legitimately reachable in various scenarios, so remove the check.</p>
        </li>
        <li class="listitem">
          <p>Avoid possible failure after a replication slot copy, due to premature removal of WAL data (Masahiko Sawada, Arseny Sher) <a class="ulink" href="https://postgr.es/c/e58e13e84" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Ensure that a replication slot's <code class="literal">io_in_progress_lock</code> is released in failure code paths (Pavan Deolasee) <a class="ulink" href="https://postgr.es/c/223e9c77d" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/d278d4e1a" target="_top">§</a></p>
          <p>This could result in a walsender later becoming stuck waiting for the lock.</p>
        </li>
        <li class="listitem">
          <p>Ensure that generated columns are correctly handled during updates issued by logical replication (Peter Eisentraut) <a class="ulink" href="https://postgr.es/c/4a97f647d" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Fix race conditions in synchronous standby management (Tom Lane) <a class="ulink" href="https://postgr.es/c/00ef5d52c" target="_top">§</a></p>
          <p>During a change in the <code class="varname">synchronous_standby_names</code> setting, there was a window in which wrong decisions could be made about whether it is OK to release transactions that are waiting for synchronous commit. Another hazard for similarly wrong decisions existed if a walsender process exited and was immediately replaced by another.</p>
        </li>
        <li class="listitem">
          <p>Add missing SQLSTATE values to a few error reports (Sawada Masahiko) <a class="ulink" href="https://postgr.es/c/e37824136" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Fix PL/pgSQL to reliably refuse to execute an event trigger function as a plain function (Tom Lane) <a class="ulink" href="https://postgr.es/c/32aa14d40" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Fix memory leak in <span class="application">libpq</span> when using <code class="literal">sslmode=verify-full</code> (Roman Peshkurov) <a class="ulink" href="https://postgr.es/c/e1c08722a" target="_top">§</a></p>
          <p>Certificate verification during connection startup could leak some memory. This would become an issue if a client process opened many database connections during its lifetime.</p>
        </li>
        <li class="listitem">
          <p>Fix <span class="application">ecpg</span> to treat an argument of just <span class="quote">“<span class="quote"><code class="literal">-</code></span>”</span> as meaning <span class="quote">“<span class="quote">read from stdin</span>”</span> on all platforms (Tom Lane) <a class="ulink" href="https://postgr.es/c/036fdf6be" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Fix crash in <span class="application">psql</span> when attempting to re-establish a failed connection (Michael Paquier) <a class="ulink" href="https://postgr.es/c/f79bea4b6" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Allow tab-completion of the filename argument to <span class="application">psql</span>'s <code class="command">\gx</code> command (Vik Fearing) <a class="ulink" href="https://postgr.es/c/6a50f1af4" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Add <span class="application">pg_dump</span> support for <code class="command">ALTER ... DEPENDS ON EXTENSION</code> (Álvaro Herrera) <a class="ulink" href="https://postgr.es/c/f977e6dec" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/cf72898c6" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/b7739ebec" target="_top">§</a></p>
          <p><span class="application">pg_dump</span> previously ignored dependencies added this way, causing them to be forgotten during dump/restore or <span class="application">pg_upgrade</span>.</p>
        </li>
        <li class="listitem">
          <p>Fix <span class="application">pg_dump</span> to dump comments on RLS policy objects (Tom Lane) <a class="ulink" href="https://postgr.es/c/6da7d3630" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>In <span class="application">pg_dump</span>, postpone restore of event triggers till the end (Fabrízio de Royes Mello, Hamid Akhtar, Tom Lane) <a class="ulink" href="https://postgr.es/c/4c40b27b5" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/983ed99a6" target="_top">§</a></p>
          <p>This minimizes the risk that an event trigger could interfere with the restoration of other objects.</p>
        </li>
        <li class="listitem">
          <p>Ensure that <span class="application">pg_basebackup</span> generates valid tar files (Robert Haas) <a class="ulink" href="https://postgr.es/c/a08bfe742" target="_top">§</a></p>
          <p>In some cases a partial block of zeroes would be added to the end of the file. While this seems to be harmless with common versions of tar, it's not OK per the POSIX file format spec.</p>
        </li>
        <li class="listitem">
          <p>Make <span class="application">pg_checksums</span> skip tablespace subdirectories that belong to a different <span class="productname">PostgreSQL</span> major version (Michael Banck, Bernd Helmle) <a class="ulink" href="https://postgr.es/c/f6e8e8b38" target="_top">§</a></p>
          <p>Such subdirectories don't really belong to our database cluster, and so must not be processed.</p>
        </li>
        <li class="listitem">
          <p>Ignore temporary copies of <code class="filename">pg_internal.init</code> in <span class="application">pg_checksums</span> and related programs (Michael Paquier) <a class="ulink" href="https://postgr.es/c/a8beece95" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Fix quoting of <code class="option">--encoding</code>, <code class="option">--lc-ctype</code> and <code class="option">--lc-collate</code> values in <span class="application">createdb</span> utility (Michael Paquier) <a class="ulink" href="https://postgr.es/c/943affb3d" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/aeb846edb" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p><code class="filename">contrib/lo</code>'s <code class="function">lo_manage()</code> function crashed if called directly rather than as a trigger (Tom Lane) <a class="ulink" href="https://postgr.es/c/d56657c35" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>In <code class="filename">contrib/ltree</code>, protect against overflow of <code class="type">ltree</code> and <code class="type">lquery</code> length fields (Nikita Glukhov) <a class="ulink" href="https://postgr.es/c/2bb6bdbe5" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Work around failure in <code class="filename">contrib/pageinspect</code>'s <code class="function">bt_metap()</code> function when an oldest_xact value exceeds 2^31-1 (Peter Geoghegan) <a class="ulink" href="https://postgr.es/c/393b449f1" target="_top">§</a></p>
          <p>Such XIDs will now be reported as negative integers, which isn't great but it beats throwing an error. v13 will widen the output argument to <code class="type">int8</code> to provide saner reporting.</p>
        </li>
        <li class="listitem">
          <p>Fix cache reference leak in <code class="filename">contrib/sepgsql</code> (Michael Luo) <a class="ulink" href="https://postgr.es/c/687e566b9" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>On Windows, avoid premature creation of postmaster's log file during <code class="literal">pg_ctl start</code> (Alexander Lakhin) <a class="ulink" href="https://postgr.es/c/de5e03f7f" target="_top">§</a></p>
          <p>The previous coding could allow the file to be created with permissions that wouldn't allow the postmaster to write on it.</p>
        </li>
        <li class="listitem">
          <p>Avoid failures when dealing with Unix-style locale names on Windows (Juan José Santamaría Flecha) <a class="ulink" href="https://postgr.es/c/de5b9db36" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>On Windows, set console VT100 compatibility mode in programs that support <code class="varname">PG_COLOR</code> colorization (Juan José Santamaría Flecha) <a class="ulink" href="https://postgr.es/c/3b5709e66" target="_top">§</a></p>
          <p>Without this, the colorization option doesn't actually work.</p>
        </li>
        <li class="listitem">
          <p>Stop requiring extra parentheses in <code class="function">ereport()</code> calls (Andres Freund, Tom Lane) <a class="ulink" href="https://postgr.es/c/a86715451" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Use <span class="application">pkg-config</span>, if available, to locate <span class="application">libxml2</span> during <span class="application">configure</span> (Hugh McMaster, Tom Lane, Peter Eisentraut) <a class="ulink" href="https://postgr.es/c/d8e7f8149" target="_top">§</a></p>
          <p>If <span class="application">pkg-config</span> is not present or lacks knowledge of <span class="application">libxml2</span>, we still query <span class="application">xml2-config</span> as before.</p>
          <p>This change could break build processes that try to make <span class="productname">PostgreSQL</span> use a non-default version of <span class="application">libxml2</span> by putting that version's <span class="application">xml2-config</span> into the <code class="varname">PATH</code>. Instead, set <code class="varname">XML2_CONFIG</code> to point to the non-default <span class="application">xml2-config</span>. That method will work with either older or newer <span class="productname">PostgreSQL</span> releases.</p>
        </li>
        <li class="listitem">
          <p>Fix Makefile dependencies for <span class="application">libpq</span> and <span class="application">ecpg</span> (Dagfinn Ilmari Mannsåker) <a class="ulink" href="https://postgr.es/c/297a174d2" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>In MSVC builds, cope with spaces in the path name for Python (Victor Wagner) <a class="ulink" href="https://postgr.es/c/8c0939dad" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>In MSVC builds, fix detection of Visual Studio version to work with more language settings (Andrew Dunstan) <a class="ulink" href="https://postgr.es/c/6b02bee66" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>In MSVC builds, use <code class="literal">-Wno-deprecated</code> with bison versions newer than 3.0, as non-Windows builds already do (Andrew Dunstan) <a class="ulink" href="https://postgr.es/c/d0747714e" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Update time zone data files to <span class="application">tzdata</span> release 2020a for DST law changes in Morocco and the Canadian Yukon, plus historical corrections for Shanghai. (Tom Lane) <a class="ulink" href="https://postgr.es/c/c820692bd" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/1e07e3fc0" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/a2342c658" target="_top">§</a></p>
          <p>The America/Godthab zone has been renamed to America/Nuuk to reflect current English usage; however, the old name remains available as a compatibility link.</p>
          <p>Also, update <span class="application">initdb</span>'s list of known Windows time zone names to include recent additions, improving the odds that it will correctly translate the system time zone setting on that platform.</p>
        </li>
      </ul>
    </div>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="release-12-4.html" title="E.19.&nbsp;Release 12.4">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="release.html" title="Appendix&nbsp;E.&nbsp;Release Notes">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="release-12-2.html" title="E.21.&nbsp;Release 12.2">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">E.19.&nbsp;Release 12.4&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 12.22 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;E.21.&nbsp;Release 12.2</td>
    </tr>
  </table>
</div>

      </div>
      <div class="row">
        <div class="col-md-3">
	  
            <a href="/docs/release/12.2/">
              Previous
            </a>
          
        </div>
        <div class="col-md-6 text-center">
          <p>
            <a href="/docs/release/">
              Return to the Release Notes Archive
            </a>
          </p>
        </div>
        <div class="col-md-3 text-right">
	   
            <a href="/docs/release/12.4/">
              Next
            </a>
          
        </div>
      </div>
    </div>
    <div class="col-md-2 version-list">
      <section>
        <h2>Versions</h2>
      </section>
      <ul>
        
          <li>
            
              <a href="/docs/release/12.22/">
                12.22
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.21/">
                12.21
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.20/">
                12.20
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.19/">
                12.19
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.18/">
                12.18
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.17/">
                12.17
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.16/">
                12.16
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.15/">
                12.15
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.14/">
                12.14
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.13/">
                12.13
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.12/">
                12.12
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.11/">
                12.11
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.10/">
                12.10
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.9/">
                12.9
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.8/">
                12.8
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.7/">
                12.7
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.6/">
                12.6
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.5/">
                12.5
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.4/">
                12.4
              </a>
            
          </li>
        
          <li>
            
              <strong>
                12.3
              </strong>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.2/">
                12.2
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.1/">
                12.1
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/12.0/">
                12.0
              </a>
            
          </li>
        
      </ul>
    </div>
</div>


      </div> <!-- pgContentWrap -->
    </div>
  </div>
</div>

    <!-- Footer -->
    <footer id="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <ul>
              <li><a href="https://twitter.com/postgresql"><img src="/media/img/atpostgresql.png" alt="@postgresql"></a></li>
              <li><a href="https://git.postgresql.org/gitweb/?p=postgresql.git"><img src="/media/img/git.png" alt="Git"></a></li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Copyright -->
      <div class="container">
        <a href="/about/policies/">Policies</a> |
        <a href="/about/policies/coc/">Code of Conduct</a> |
        <a href="/about/">About PostgreSQL</a> |
        <a href="/about/contact/">Contact</a><br/>
        <p>Copyright &copy; 1996-2024 The PostgreSQL Global Development Group</p>
      </div>
    </footer>
    <script src="/media/js/jquery-3.4.1.slim.min.js"></script>
    <script src="/media/js/popper-1.16.0.min.js"></script>
    <script src="/media/js/bootstrap-4.4.1.min.js"></script>
    <script src="/media/js/main.js?18db9df6"></script>

  </body>
</html>
