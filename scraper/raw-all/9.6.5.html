<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Release Notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <link href="/media/css/fontawesome.css?606fd482" rel="stylesheet">
  <link rel="stylesheet" href="/media/css/bootstrap-4.4.1.min.css">
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" type="text/css" href="/dyncss/base.css?606fd482">

  <script src="/media/js/theme.js?606fd482"></script>

  

  <base href="/docs/9.6/" />


  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          <!-- Header -->
          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand p-0" href="/">
              <img class="logo" src="/media/img/about/press/elephant.png" alt="PostgreSQL Elephant Logo">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#pgNavbar" aria-controls="pgNavbar" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="pgNavbar">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item p-2"><a href="/" title="Home">Home</a></li>
                <li class="nav-item p-2"><a href="/about/" title="About">About</a></li>
                <li class="nav-item p-2"><a href="/download/" title="Download">Download</a></li>
                <li class="nav-item p-2"><a href="/docs/" title="Documentation">Documentation</a></li>
                <li class="nav-item p-2"><a href="/community/" title="Community">Community</a></li>
                <li class="nav-item p-2"><a href="/developer/" title="Developers">Developers</a></li>
                <li class="nav-item p-2"><a href="/support/" title="Support">Support</a></li>
                <li class="nav-item p-2"><a href="/about/donate/" title="Donate">Donate</a></li>
                <li class="nav-item p-2"><a href="/account/" title="Your account">Your account</a></li>
              </ul>
              <form role="search" method="get" action="/search/">
                <div class="input-group">
                  <input id="q" name="q" type="text" size="20" maxlength="255" accesskey="s"  class="form-control" placeholder="Search for...">
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div><!-- /input-group -->
              </form>
              <form id="form-theme" class="form-inline d-none">
                <button id="btn-theme" class="btn btn-default ml-1" type="button"></button>
              </form>
            </div>
          </nav>
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">September 26, 2024: <a href="/about/news/postgresql-17-released-2936/">
  PostgreSQL 17 Released!
</a>

</div>
      </div>
    </div>
    
<div class="container-fluid margin">
  <div class="row">
    <div class="col-lg-2">
      <div id="pgSideWrap">
       
       <div id="pgSideNav">
         <h2>Quick Links</h2>

         <ul>
           
           
           <li><a href="/docs/">Documentation</a>
            
            
           
           </li>
           <li><a href="/docs/">Manuals</a>
            
             <ul>
             
              <li class="last-child"><a href="/docs/manuals/archive/">Archive</a></li>
             
             </ul>
            
            
           
           </li>
           <li><a href="/docs/release/">Release Notes</a>
            
            
           
           </li>
           <li><a href="/docs/books/">Books</a>
            
            
           
           </li>
           <li><a href="/docs/online-resources/">Tutorials &amp; Other Resources</a>
            
            
           
           </li>
           <li><a href="/docs/faq/">FAQ</a>
            
            
           
           </li>
           <li class="last-child"><a href="https://wiki.postgresql.org">Wiki</a>
            
            
           </li>
            
           
        </ul>

       </div>
       
      </div> <!-- pgSideWrap -->
    </div>
    <div class="col-lg-10">
      <div id="pgContentWrap">
        


<div id="release-notes" class="row">
    <div class="col-md-10">
      <section>
        <h1>Release Notes <i class="far fa-file-alt"></i></h1>
        <h2>
          PostgreSQL
          9.6.5
        </h2>
      </section>
      <div id="docContent">
        <div class="NAVHEADER">
<table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<th colspan="4" align="center" valign="bottom"><a href="index.html">PostgreSQL 9.6.24 Documentation</a></th>
</tr>
<tr>
<td width="10%" align="left" valign="top"><a title="Release 9.6.6" href="release-9-6-6.html" accesskey="P">Prev</a></td>
<td width="10%" align="left" valign="top"><a href="release.html" accesskey="U">Up</a></td>
<td width="60%" align="center" valign="bottom">Appendix E. Release Notes</td>
<td width="20%" align="right" valign="top"><a title="Release 9.6.4" href="release-9-6-4.html" accesskey="N">Next</a></td>
</tr>
</table>
<hr class="c1" width="100%" /></div>
<div class="SECT1">
<h1 class="SECT1"><a name="RELEASE-9-6-5" id="RELEASE-9-6-5">E.20. Release 9.6.5</a></h1>
<div class="FORMALPARA">
<p><b>Release date:</b> 2017-08-31</p>
</div>
<p>This release contains a small number of fixes from 9.6.4. For information about new features in the 9.6 major release, see <a href="release-9-6.html">Section E.25</a>.</p>
<div class="SECT2">
<h2 class="SECT2"><a name="AEN135108" id="AEN135108">E.20.1. Migration to Version 9.6.5</a></h2>
<p>A dump/restore is not required for those running 9.6.X.</p>
<p>However, if you are upgrading from a version earlier than 9.6.4, see <a href="release-9-6-4.html">Section E.21</a>.</p>
</div>
<div class="SECT2">
<h2 class="SECT2"><a name="AEN135113" id="AEN135113">E.20.2. Changes</a></h2>
<ul>
<li>
<p>Show foreign tables in <tt class="STRUCTNAME">information_schema</tt>.<tt class="STRUCTNAME">table_privileges</tt> view (Peter Eisentraut)</p>
<p>All other relevant <tt class="STRUCTNAME">information_schema</tt> views include foreign tables, but this one ignored them.</p>
<p>Since this view definition is installed by <span class="APPLICATION">initdb</span>, merely upgrading will not fix the problem. If you need to fix this in an existing installation, you can, as a superuser, do this in <span class="APPLICATION">psql</span>:</p>
<pre class="PROGRAMLISTING">SET search_path TO information_schema;
CREATE OR REPLACE VIEW table_privileges AS
    SELECT CAST(u_grantor.rolname AS sql_identifier) AS grantor,
           CAST(grantee.rolname AS sql_identifier) AS grantee,
           CAST(current_database() AS sql_identifier) AS table_catalog,
           CAST(nc.nspname AS sql_identifier) AS table_schema,
           CAST(c.relname AS sql_identifier) AS table_name,
           CAST(c.prtype AS character_data) AS privilege_type,
           CAST(
             CASE WHEN
                  -- object owner always has grant options
                  pg_has_role(grantee.oid, c.relowner, 'USAGE')
                  OR c.grantable
                  THEN 'YES' ELSE 'NO' END AS yes_or_no) AS is_grantable,
           CAST(CASE WHEN c.prtype = 'SELECT' THEN 'YES' ELSE 'NO' END AS yes_or_no) AS with_hierarchy

    FROM (
            SELECT oid, relname, relnamespace, relkind, relowner, (aclexplode(coalesce(relacl, acldefault('r', relowner)))).* FROM pg_class
         ) AS c (oid, relname, relnamespace, relkind, relowner, grantor, grantee, prtype, grantable),
         pg_namespace nc,
         pg_authid u_grantor,
         (
           SELECT oid, rolname FROM pg_authid
           UNION ALL
           SELECT 0::oid, 'PUBLIC'
         ) AS grantee (oid, rolname)

    WHERE c.relnamespace = nc.oid
          AND c.relkind IN ('r', 'v', 'f')
          AND c.grantee = grantee.oid
          AND c.grantor = u_grantor.oid
          AND c.prtype IN ('INSERT', 'SELECT', 'UPDATE', 'DELETE', 'TRUNCATE', 'REFERENCES', 'TRIGGER')
          AND (pg_has_role(u_grantor.oid, 'USAGE')
               OR pg_has_role(grantee.oid, 'USAGE')
               OR grantee.rolname = 'PUBLIC');</pre>
<p>This must be repeated in each database to be fixed, including <tt class="LITERAL">template0</tt>.</p>
</li>
<li>
<p>Clean up handling of a fatal exit (e.g., due to receipt of <span class="SYSTEMITEM">SIGTERM</span>) that occurs while trying to execute a <tt class="COMMAND">ROLLBACK</tt> of a failed transaction (Tom Lane)</p>
<p>This situation could result in an assertion failure. In production builds, the exit would still occur, but it would log an unexpected message about <span class="QUOTE">"cannot drop active portal"</span>.</p>
</li>
<li>
<p>Remove assertion that could trigger during a fatal exit (Tom Lane)</p>
</li>
<li>
<p>Correctly identify columns that are of a range type or domain type over a composite type or domain type being searched for (Tom Lane)</p>
<p>Certain <tt class="COMMAND">ALTER</tt> commands that change the definition of a composite type or domain type are supposed to fail if there are any stored values of that type in the database, because they lack the infrastructure needed to update or check such values. Previously, these checks could miss relevant values that are wrapped inside range types or sub-domains, possibly allowing the database to become inconsistent.</p>
</li>
<li>
<p>Prevent crash when passing fixed-length pass-by-reference data types to parallel worker processes (Tom Lane)</p>
</li>
<li>
<p>Fix crash in <span class="APPLICATION">pg_restore</span> when using parallel mode and using a list file to select a subset of items to restore (Fabr√≠zio de Royes Mello)</p>
</li>
<li>
<p>Change <span class="APPLICATION">ecpg</span>'s parser to allow <tt class="LITERAL">RETURNING</tt> clauses without attached C variables (Michael Meskes)</p>
<p>This allows <span class="APPLICATION">ecpg</span> programs to contain SQL constructs that use <tt class="LITERAL">RETURNING</tt> internally (for example, inside a CTE) rather than using it to define values to be returned to the client.</p>
</li>
<li>
<p>Change <span class="APPLICATION">ecpg</span>'s parser to recognize backslash continuation of C preprocessor command lines (Michael Meskes)</p>
</li>
<li>
<p>Improve selection of compiler flags for PL/Perl on Windows (Tom Lane)</p>
<p>This fix avoids possible crashes of PL/Perl due to inconsistent assumptions about the width of <tt class="TYPE">time_t</tt> values. A side-effect that may be visible to extension developers is that <tt class="LITERAL">_USE_32BIT_TIME_T</tt> is no longer defined globally in <span class="PRODUCTNAME">PostgreSQL</span> Windows builds. This is not expected to cause problems, because type <tt class="TYPE">time_t</tt> is not used in any <span class="PRODUCTNAME">PostgreSQL</span> API definitions.</p>
</li>
<li>
<p>Fix <tt class="LITERAL">make check</tt> to behave correctly when invoked via a non-GNU make program (Thomas Munro)</p>
</li>
</ul>
</div>
</div>
<div class="NAVFOOTER">
<hr class="c1" width="100%" />
<table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><a href="release-9-6-6.html" accesskey="P">Prev</a></td>
<td width="34%" align="center" valign="top"><a href="index.html" accesskey="H">Home</a></td>
<td width="33%" align="right" valign="top"><a href="release-9-6-4.html" accesskey="N">Next</a></td>
</tr>
<tr>
<td width="33%" align="left" valign="top">Release 9.6.6</td>
<td width="34%" align="center" valign="top"><a href="release.html" accesskey="U">Up</a></td>
<td width="33%" align="right" valign="top">Release 9.6.4</td>
</tr>
</table>
</div>


      </div>
      <div class="row">
        <div class="col-md-3">
	  
            <a href="/docs/release/9.6.4/">
              Previous
            </a>
          
        </div>
        <div class="col-md-6 text-center">
          <p>
            <a href="/docs/release/">
              Return to the Release Notes Archive
            </a>
          </p>
        </div>
        <div class="col-md-3 text-right">
	   
            <a href="/docs/release/9.6.6/">
              Next
            </a>
          
        </div>
      </div>
    </div>
    <div class="col-md-2 version-list">
      <section>
        <h2>Versions</h2>
      </section>
      <ul>
        
          <li>
            
              <a href="/docs/release/9.6.24/">
                9.6.24
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.23/">
                9.6.23
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.22/">
                9.6.22
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.21/">
                9.6.21
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.20/">
                9.6.20
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.19/">
                9.6.19
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.18/">
                9.6.18
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.17/">
                9.6.17
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.16/">
                9.6.16
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.15/">
                9.6.15
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.14/">
                9.6.14
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.13/">
                9.6.13
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.12/">
                9.6.12
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.11/">
                9.6.11
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.10/">
                9.6.10
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.9/">
                9.6.9
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.8/">
                9.6.8
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.7/">
                9.6.7
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.6/">
                9.6.6
              </a>
            
          </li>
        
          <li>
            
              <strong>
                9.6.5
              </strong>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.4/">
                9.6.4
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.3/">
                9.6.3
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.2/">
                9.6.2
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.1/">
                9.6.1
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.0/">
                9.6.0
              </a>
            
          </li>
        
      </ul>
    </div>
</div>


      </div> <!-- pgContentWrap -->
    </div>
  </div>
</div>

    <!-- Footer -->
    <footer id="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <ul>
              <li><a href="https://twitter.com/postgresql"><img src="/media/img/atpostgresql.png" alt="@postgresql"></a></li>
              <li><a href="https://git.postgresql.org/gitweb/?p=postgresql.git"><img src="/media/img/git.png" alt="Git"></a></li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Copyright -->
      <div class="container">
        <a href="/about/policies/">Policies</a> |
        <a href="/about/policies/coc/">Code of Conduct</a> |
        <a href="/about/">About PostgreSQL</a> |
        <a href="/about/contact/">Contact</a><br/>
        <p>Copyright &copy; 1996-2024 The PostgreSQL Global Development Group</p>
      </div>
    </footer>
    <script src="/media/js/jquery-3.4.1.slim.min.js"></script>
    <script src="/media/js/popper-1.16.0.min.js"></script>
    <script src="/media/js/bootstrap-4.4.1.min.js"></script>
    <script src="/media/js/main.js?606fd482"></script>

  </body>
</html>
