<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Release Notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <link href="/media/css/fontawesome.css?606fd482" rel="stylesheet">
  <link rel="stylesheet" href="/media/css/bootstrap-4.4.1.min.css">
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" type="text/css" href="/dyncss/base.css?606fd482">

  <script src="/media/js/theme.js?606fd482"></script>

  

  <base href="/docs/11/" />


  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          <!-- Header -->
          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand p-0" href="/">
              <img class="logo" src="/media/img/about/press/elephant.png" alt="PostgreSQL Elephant Logo">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#pgNavbar" aria-controls="pgNavbar" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="pgNavbar">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item p-2"><a href="/" title="Home">Home</a></li>
                <li class="nav-item p-2"><a href="/about/" title="About">About</a></li>
                <li class="nav-item p-2"><a href="/download/" title="Download">Download</a></li>
                <li class="nav-item p-2"><a href="/docs/" title="Documentation">Documentation</a></li>
                <li class="nav-item p-2"><a href="/community/" title="Community">Community</a></li>
                <li class="nav-item p-2"><a href="/developer/" title="Developers">Developers</a></li>
                <li class="nav-item p-2"><a href="/support/" title="Support">Support</a></li>
                <li class="nav-item p-2"><a href="/about/donate/" title="Donate">Donate</a></li>
                <li class="nav-item p-2"><a href="/account/" title="Your account">Your account</a></li>
              </ul>
              <form role="search" method="get" action="/search/">
                <div class="input-group">
                  <input id="q" name="q" type="text" size="20" maxlength="255" accesskey="s"  class="form-control" placeholder="Search for...">
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div><!-- /input-group -->
              </form>
              <form id="form-theme" class="form-inline d-none">
                <button id="btn-theme" class="btn btn-default ml-1" type="button"></button>
              </form>
            </div>
          </nav>
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">September 26, 2024: <a href="/about/news/postgresql-17-released-2936/">
  PostgreSQL 17 Released!
</a>

</div>
      </div>
    </div>
    
<div class="container-fluid margin">
  <div class="row">
    <div class="col-lg-2">
      <div id="pgSideWrap">
       
       <div id="pgSideNav">
         <h2>Quick Links</h2>

         <ul>
           
           
           <li><a href="/docs/">Documentation</a>
            
            
           
           </li>
           <li><a href="/docs/">Manuals</a>
            
             <ul>
             
              <li class="last-child"><a href="/docs/manuals/archive/">Archive</a></li>
             
             </ul>
            
            
           
           </li>
           <li><a href="/docs/release/">Release Notes</a>
            
            
           
           </li>
           <li><a href="/docs/books/">Books</a>
            
            
           
           </li>
           <li><a href="/docs/online-resources/">Tutorials &amp; Other Resources</a>
            
            
           
           </li>
           <li><a href="/docs/faq/">FAQ</a>
            
            
           
           </li>
           <li class="last-child"><a href="https://wiki.postgresql.org">Wiki</a>
            
            
           </li>
            
           
        </ul>

       </div>
       
      </div> <!-- pgSideWrap -->
    </div>
    <div class="col-lg-10">
      <div id="pgContentWrap">
        


<div id="release-notes" class="row">
    <div class="col-md-10">
      <section>
        <h1>Release Notes <i class="far fa-file-alt"></i></h1>
        <h2>
          PostgreSQL
          11.15
        </h2>
      </section>
      <div id="docContent">
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">E.8.&nbsp;Release 11.15</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="release-11-16.html" title="E.7.&nbsp;Release 11.16">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix&nbsp;E.&nbsp;Release Notes">Up</a></td>
      <th width="60%" align="center">Appendix&nbsp;E.&nbsp;Release Notes</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 11.22 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="release-11-14.html" title="E.9.&nbsp;Release 11.14">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="RELEASE-11-15">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">E.8.&nbsp;Release 11.15</h2>
      </div>
    </div>
  </div>
  <div class="toc">
    <dl class="toc">
      <dt><span class="sect2"><a href="release-11-15.html#id-1.11.6.12.4">E.8.1. Migration to Version 11.15</a></span></dt>
      <dt><span class="sect2"><a href="release-11-15.html#id-1.11.6.12.5">E.8.2. Changes</a></span></dt>
    </dl>
  </div>
  <p><strong>Release date:&nbsp;</strong>2022-02-10</p>
  <p>This release contains a variety of fixes from 11.14. For information about new features in major release 11, see <a class="xref" href="release-11.html" title="E.23.&nbsp;Release 11">Section&nbsp;E.23</a>.</p>
  <div class="sect2" id="id-1.11.6.12.4">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">E.8.1.&nbsp;Migration to Version 11.15</h3>
        </div>
      </div>
    </div>
    <p>A dump/restore is not required for those running 11.X.</p>
    <p>However, if you are upgrading from a version earlier than 11.14, see <a class="xref" href="release-11-14.html" title="E.9.&nbsp;Release 11.14">Section&nbsp;E.9</a>.</p>
  </div>
  <div class="sect2" id="id-1.11.6.12.5">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">E.8.2.&nbsp;Changes</h3>
        </div>
      </div>
    </div>
    <div class="itemizedlist">
      <ul class="itemizedlist" style="list-style-type: disc;">
        <li class="listitem">
          <p>Fix index-only scan plans for cases where not all index columns can be returned (Tom Lane)</p>
          <p>If an index has both returnable and non-returnable columns, and one of the non-returnable columns is an expression using a table column that appears in a returnable index column, then a query using that expression could result in an index-only scan plan that attempts to read the non-returnable column, instead of recomputing the expression from the returnable column as intended. The non-returnable column would read as NULL, resulting in wrong query results.</p>
        </li>
        <li class="listitem">
          <p>Ensure that casting to an unspecified typmod generates a RelabelType node rather than a length-coercion function call (Tom Lane)</p>
          <p>While the coercion function should do the right thing (nothing), this translation is undesirably inefficient.</p>
        </li>
        <li class="listitem">
          <p>Fix WAL replay failure when database consistency is reached exactly at a WAL page boundary (Álvaro Herrera)</p>
        </li>
        <li class="listitem">
          <p>Fix startup of a physical replica to tolerate transaction ID wraparound (Abhijit Menon-Sen, Tomas Vondra)</p>
          <p>If a replica server is started while the set of active transactions on the primary crosses a wraparound boundary (so that there are some newer transactions with smaller XIDs than older ones), the replica would fail with <span class="quote">“<span class="quote">out-of-order XID insertion in KnownAssignedXids</span>”</span>. The replica would retry, but could never get past that error.</p>
        </li>
        <li class="listitem">
          <p>Remove lexical limitations for SQL commands issued on a logical replication connection (Tom Lane)</p>
          <p>The walsender process would fail for a SQL command containing an unquoted semicolon, or with dollar-quoted literals containing odd numbers of single or double quote marks, or when the SQL command starts with a comment. Moreover, faulty error recovery could lead to unexpected errors in later commands too.</p>
        </li>
        <li class="listitem">
          <p>Fix possible loss of the commit timestamp for the last subtransaction of a transaction (Alex Kingsborough, Kyotaro Horiguchi)</p>
        </li>
        <li class="listitem">
          <p>Be sure to <code class="function">fsync</code> the <code class="filename">pg_logical/mappings</code> subdirectory during checkpoints (Nathan Bossart)</p>
          <p>On some filesystems this oversight could lead to losing logical rewrite status files after a system crash.</p>
        </li>
        <li class="listitem">
          <p>Build extended statistics for partitioned tables (Justin Pryzby)</p>
          <p>A previous bug fix disabled building of extended statistics for old-style inheritance trees, but it also prevented building them for partitioned tables, which was an unnecessary restriction. This change allows <code class="command">ANALYZE</code> to compute values for statistics objects for partitioned tables. (But note that autovacuum does not process partitioned tables as such, so you must periodically issue manual <code class="command">ANALYZE</code> on the partitioned table if you want to maintain such statistics.)</p>
        </li>
        <li class="listitem">
          <p>Ignore extended statistics for inheritance trees (Justin Pryzby)</p>
          <p>Currently, extended statistics values are only computed locally for each table, not for entire inheritance trees. However the values were mistakenly consulted when planning queries across inheritance trees, possibly resulting in worse-than-default estimates.</p>
        </li>
        <li class="listitem">
          <p>Disallow altering data type of a partitioned table's columns when the partitioned table's row type is used as a composite type elsewhere (Tom Lane)</p>
          <p>This restriction has long existed for regular tables, but through an oversight it was not checked for partitioned tables.</p>
        </li>
        <li class="listitem">
          <p>Disallow <code class="literal">ALTER TABLE ... DROP NOT NULL</code> for a column that is part of a replica identity index (Haiying Tang, Hou Zhijie)</p>
          <p>The same prohibition already existed for primary key indexes.</p>
        </li>
        <li class="listitem">
          <p>Correctly update cached table state during <code class="command">ALTER TABLE ADD PRIMARY KEY USING INDEX</code> (Hou Zhijie)</p>
          <p>Concurrent sessions failed to update their opinion of whether the table has a primary key, possibly causing incorrect logical replication behavior.</p>
        </li>
        <li class="listitem">
          <p>Correctly update cached table state when switching <code class="literal">REPLICA IDENTITY</code> index (Tang Haiying, Hou Zhijie)</p>
          <p>Concurrent sessions failed to update their opinion of which index is the replica identity one, possibly causing incorrect logical replication behavior.</p>
        </li>
        <li class="listitem">
          <p>Avoid leaking memory during <code class="command">REASSIGN OWNED BY</code> operations that reassign ownership of many objects (Justin Pryzby)</p>
        </li>
        <li class="listitem">
          <p>Fix display of whole-row variables appearing in <code class="literal">INSERT ... VALUES</code> rules (Tom Lane)</p>
          <p>A whole-row variable would be printed as <span class="quote">“<span class="quote">var.*</span>”</span>, but that allows it to be expanded to individual columns when the rule is reloaded, resulting in different semantics. Attach an explicit cast to prevent that, as we do elsewhere.</p>
        </li>
        <li class="listitem">
          <p>Fix or remove some incorrect assertions (Simon Riggs, Michael Paquier, Alexander Lakhin)</p>
          <p>These errors should affect only debug builds, not production.</p>
        </li>
        <li class="listitem">
          <p>Fix race condition that could lead to failure to localize error messages that are reported early in multi-threaded use of <span class="application">libpq</span> or <span class="application">ecpglib</span> (Tom Lane)</p>
        </li>
        <li class="listitem">
          <p>Avoid calling <code class="function">strerror</code> from <span class="application">libpq</span>'s <code class="function">PQcancel</code> function (Tom Lane)</p>
          <p><code class="function">PQcancel</code> is supposed to be safe to call from a signal handler, but <code class="function">strerror</code> is not safe. The faulty usage only occurred in the unlikely event of failure to send the cancel message to the server, perhaps explaining the lack of reports.</p>
        </li>
        <li class="listitem">
          <p>Make <span class="application">psql</span>'s <code class="command">\password</code> command default to setting the password for <code class="literal">CURRENT_USER</code>, not the connection's original user name (Tom Lane)</p>
          <p>This agrees with the documented behavior, and avoids probable permissions failure if <code class="command">SET ROLE</code> or <code class="command">SET SESSION AUTHORIZATION</code> has been done since the session began. To prevent confusion, the role name to be acted on is now included in the password prompt.</p>
        </li>
        <li class="listitem">
          <p>In <span class="application">psql</span> and some other client programs, avoid trying to invoke <code class="function">gettext()</code> from a control-C signal handler (Tom Lane)</p>
          <p>While no reported failures have been traced to this mistake, it seems highly unlikely to be a safe thing to do.</p>
        </li>
        <li class="listitem">
          <p>Allow canceling the initial password prompt in <span class="application">pg_receivewal</span> and <span class="application">pg_recvlogical</span> (Tom Lane, Nathan Bossart)</p>
          <p>Previously it was impossible to terminate these programs via control-C while they were prompting for a password.</p>
        </li>
        <li class="listitem">
          <p>Fix <span class="application">pg_dump</span>'s dump ordering for user-defined casts (Tom Lane)</p>
          <p>In rare cases, the output script might refer to a user-defined cast before it had been created.</p>
        </li>
        <li class="listitem">
          <p>Fix possible mis-reporting of errors in <span class="application">pg_dump</span> and <span class="application">pg_basebackup</span> (Tom Lane)</p>
          <p>The previous code failed to check for errors from some kernel calls, and could report the wrong errno values in other cases.</p>
        </li>
        <li class="listitem">
          <p>Fix results of index-only scans on <code class="filename">contrib/btree_gist</code> indexes on <code class="type">char(<em class="replaceable"><code>N</code></em>)</code> columns (Tom Lane)</p>
          <p>Index-only scans returned column values with trailing spaces removed, which is not the expected behavior. That happened because that's how the data was stored in the index. This fix changes the code to store <code class="type">char(<em class="replaceable"><code>N</code></em>)</code> values with the expected amount of space padding. The behavior of such an index will not change immediately unless you <code class="command">REINDEX</code> it; otherwise space-stripped values will be gradually replaced over time during updates. Queries that do not use index-only scan plans will be unaffected in any case.</p>
        </li>
        <li class="listitem">
          <p>Change <span class="application">configure</span> to use Python's <span class="application">sysconfig</span> module, rather than the deprecated <span class="application">distutils</span> module, to determine how to build PL/Python (Peter Eisentraut, Tom Lane, Andres Freund)</p>
          <p>With Python 3.10, this avoids <span class="application">configure</span>-time warnings about <span class="application">distutils</span> being deprecated and scheduled for removal in Python 3.12. Presumably, once 3.12 is out, <code class="literal">configure --with-python</code> would fail altogether. This future-proofing does come at a cost: <span class="application">sysconfig</span> did not exist before Python 2.7, nor before 3.2 in the Python 3 branch, so it is no longer possible to build PL/Python against long-dead Python versions.</p>
        </li>
        <li class="listitem">
          <p>Fix PL/Perl compile failure on Windows with Perl 5.28 and later (Victor Wagner)</p>
        </li>
        <li class="listitem">
          <p>Fix PL/Python compile failure with Python 3.11 and later (Peter Eisentraut)</p>
        </li>
        <li class="listitem">
          <p>Add support for building with Visual Studio 2022 (Hans Buschmann)</p>
        </li>
        <li class="listitem">
          <p>Allow the <code class="filename">.bat</code> wrapper scripts in our MSVC build system to be called without first changing into their directory (Anton Voloshin, Andrew Dunstan)</p>
        </li>
      </ul>
    </div>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="release-11-16.html" title="E.7.&nbsp;Release 11.16">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="release.html" title="Appendix&nbsp;E.&nbsp;Release Notes">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="release-11-14.html" title="E.9.&nbsp;Release 11.14">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">E.7.&nbsp;Release 11.16&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 11.22 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;E.9.&nbsp;Release 11.14</td>
    </tr>
  </table>
</div>

      </div>
      <div class="row">
        <div class="col-md-3">
	  
            <a href="/docs/release/11.14/">
              Previous
            </a>
          
        </div>
        <div class="col-md-6 text-center">
          <p>
            <a href="/docs/release/">
              Return to the Release Notes Archive
            </a>
          </p>
        </div>
        <div class="col-md-3 text-right">
	   
            <a href="/docs/release/11.16/">
              Next
            </a>
          
        </div>
      </div>
    </div>
    <div class="col-md-2 version-list">
      <section>
        <h2>Versions</h2>
      </section>
      <ul>
        
          <li>
            
              <a href="/docs/release/11.22/">
                11.22
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.21/">
                11.21
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.20/">
                11.20
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.19/">
                11.19
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.18/">
                11.18
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.17/">
                11.17
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.16/">
                11.16
              </a>
            
          </li>
        
          <li>
            
              <strong>
                11.15
              </strong>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.14/">
                11.14
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.13/">
                11.13
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.12/">
                11.12
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.11/">
                11.11
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.10/">
                11.10
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.9/">
                11.9
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.8/">
                11.8
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.7/">
                11.7
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.6/">
                11.6
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.5/">
                11.5
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.4/">
                11.4
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.3/">
                11.3
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.2/">
                11.2
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.1/">
                11.1
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.0/">
                11.0
              </a>
            
          </li>
        
      </ul>
    </div>
</div>


      </div> <!-- pgContentWrap -->
    </div>
  </div>
</div>

    <!-- Footer -->
    <footer id="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <ul>
              <li><a href="https://twitter.com/postgresql"><img src="/media/img/atpostgresql.png" alt="@postgresql"></a></li>
              <li><a href="https://git.postgresql.org/gitweb/?p=postgresql.git"><img src="/media/img/git.png" alt="Git"></a></li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Copyright -->
      <div class="container">
        <a href="/about/policies/">Policies</a> |
        <a href="/about/policies/coc/">Code of Conduct</a> |
        <a href="/about/">About PostgreSQL</a> |
        <a href="/about/contact/">Contact</a><br/>
        <p>Copyright &copy; 1996-2024 The PostgreSQL Global Development Group</p>
      </div>
    </footer>
    <script src="/media/js/jquery-3.4.1.slim.min.js"></script>
    <script src="/media/js/popper-1.16.0.min.js"></script>
    <script src="/media/js/bootstrap-4.4.1.min.js"></script>
    <script src="/media/js/main.js?606fd482"></script>

  </body>
</html>
