<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Release Notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <link href="/media/css/fontawesome.css?606fd482" rel="stylesheet">
  <link rel="stylesheet" href="/media/css/bootstrap-4.4.1.min.css">
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" type="text/css" href="/dyncss/base.css?606fd482">

  <script src="/media/js/theme.js?606fd482"></script>

  

  <base href="/docs/11/" />


  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          <!-- Header -->
          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand p-0" href="/">
              <img class="logo" src="/media/img/about/press/elephant.png" alt="PostgreSQL Elephant Logo">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#pgNavbar" aria-controls="pgNavbar" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="pgNavbar">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item p-2"><a href="/" title="Home">Home</a></li>
                <li class="nav-item p-2"><a href="/about/" title="About">About</a></li>
                <li class="nav-item p-2"><a href="/download/" title="Download">Download</a></li>
                <li class="nav-item p-2"><a href="/docs/" title="Documentation">Documentation</a></li>
                <li class="nav-item p-2"><a href="/community/" title="Community">Community</a></li>
                <li class="nav-item p-2"><a href="/developer/" title="Developers">Developers</a></li>
                <li class="nav-item p-2"><a href="/support/" title="Support">Support</a></li>
                <li class="nav-item p-2"><a href="/about/donate/" title="Donate">Donate</a></li>
                <li class="nav-item p-2"><a href="/account/" title="Your account">Your account</a></li>
              </ul>
              <form role="search" method="get" action="/search/">
                <div class="input-group">
                  <input id="q" name="q" type="text" size="20" maxlength="255" accesskey="s"  class="form-control" placeholder="Search for...">
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div><!-- /input-group -->
              </form>
              <form id="form-theme" class="form-inline d-none">
                <button id="btn-theme" class="btn btn-default ml-1" type="button"></button>
              </form>
            </div>
          </nav>
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">September 26, 2024: <a href="/about/news/postgresql-17-released-2936/">
  PostgreSQL 17 Released!
</a>

</div>
      </div>
    </div>
    
<div class="container-fluid margin">
  <div class="row">
    <div class="col-lg-2">
      <div id="pgSideWrap">
       
       <div id="pgSideNav">
         <h2>Quick Links</h2>

         <ul>
           
           
           <li><a href="/docs/">Documentation</a>
            
            
           
           </li>
           <li><a href="/docs/">Manuals</a>
            
             <ul>
             
              <li class="last-child"><a href="/docs/manuals/archive/">Archive</a></li>
             
             </ul>
            
            
           
           </li>
           <li><a href="/docs/release/">Release Notes</a>
            
            
           
           </li>
           <li><a href="/docs/books/">Books</a>
            
            
           
           </li>
           <li><a href="/docs/online-resources/">Tutorials &amp; Other Resources</a>
            
            
           
           </li>
           <li><a href="/docs/faq/">FAQ</a>
            
            
           
           </li>
           <li class="last-child"><a href="https://wiki.postgresql.org">Wiki</a>
            
            
           </li>
            
           
        </ul>

       </div>
       
      </div> <!-- pgSideWrap -->
    </div>
    <div class="col-lg-10">
      <div id="pgContentWrap">
        


<div id="release-notes" class="row">
    <div class="col-md-10">
      <section>
        <h1>Release Notes <i class="far fa-file-alt"></i></h1>
        <h2>
          PostgreSQL
          11.19
        </h2>
      </section>
      <div id="docContent">
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">E.4.&nbsp;Release 11.19</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="release-11-20.html" title="E.3.&nbsp;Release 11.20">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix&nbsp;E.&nbsp;Release Notes">Up</a></td>
      <th width="60%" align="center">Appendix&nbsp;E.&nbsp;Release Notes</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 11.22 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="release-11-18.html" title="E.5.&nbsp;Release 11.18">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="RELEASE-11-19">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">E.4.&nbsp;Release 11.19</h2>
      </div>
    </div>
  </div>
  <div class="toc">
    <dl class="toc">
      <dt><span class="sect2"><a href="release-11-19.html#id-1.11.6.8.5">E.4.1. Migration to Version 11.19</a></span></dt>
      <dt><span class="sect2"><a href="release-11-19.html#id-1.11.6.8.6">E.4.2. Changes</a></span></dt>
    </dl>
  </div>
  <p><strong>Release date:&nbsp;</strong>2023-02-09</p>
  <p>This release contains a variety of fixes from 11.18. For information about new features in major release 11, see <a class="xref" href="release-11.html" title="E.23.&nbsp;Release 11">Section&nbsp;E.23</a>.</p>
  <p>The <span class="productname">PostgreSQL</span> community will stop releasing updates for the 11.X release series in November 2023. Users are encouraged to update to a newer release branch soon.</p>
  <div class="sect2" id="id-1.11.6.8.5">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">E.4.1.&nbsp;Migration to Version 11.19</h3>
        </div>
      </div>
    </div>
    <p>A dump/restore is not required for those running 11.X.</p>
    <p>However, if you are upgrading from a version earlier than 11.14, see <a class="xref" href="release-11-14.html" title="E.9.&nbsp;Release 11.14">Section&nbsp;E.9</a>.</p>
  </div>
  <div class="sect2" id="id-1.11.6.8.6">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">E.4.2.&nbsp;Changes</h3>
        </div>
      </div>
    </div>
    <div class="itemizedlist">
      <ul class="itemizedlist" style="list-style-type: disc;">
        <li class="listitem">
          <p>Allow <code class="literal">REPLICA IDENTITY</code> to be set on an index that's not (yet) valid (Tom Lane)</p>
          <p>When <span class="application">pg_dump</span> dumps a partitioned index that's marked <code class="literal">REPLICA IDENTITY</code>, it generates a command sequence that applies <code class="literal">REPLICA IDENTITY</code> before the partitioned index has been marked valid, causing restore to fail. There seems no very good reason to prohibit doing it in that order, so allow it. The marking will have no effect anyway until the index becomes valid.</p>
        </li>
        <li class="listitem">
          <p>Fix handling of <code class="literal">DEFAULT</code> markers in rules that perform an <code class="command">INSERT</code> from a multi-row <code class="literal">VALUES</code> list (Dean Rasheed)</p>
          <p>In some cases a <code class="literal">DEFAULT</code> marker would not get replaced with the proper default-value expression, leading to an <span class="quote">“<span class="quote">unrecognized node type</span>”</span> error.</p>
        </li>
        <li class="listitem">
          <p>Fix edge-case data corruption in parallel hash joins (Dmitry Astapov)</p>
          <p>If the final chunk of a large tuple being written out to a temporary file was exactly 32760 bytes, it would be corrupted due to a fencepost bug. The query would typically fail later with corrupted-data symptoms.</p>
        </li>
        <li class="listitem">
          <p>Honor non-default settings of <code class="varname">checkpoint_completion_target</code> (Bharath Rupireddy)</p>
          <p>Internal state was not updated after a change in <code class="varname">checkpoint_completion_target</code>, possibly resulting in performing checkpoint I/O faster or slower than desired, especially if that setting was changed on-the-fly.</p>
        </li>
        <li class="listitem">
          <p>Log the correct ending timestamp in <code class="varname">recovery_target_xid</code> mode (Tom Lane)</p>
          <p>When ending recovery based on the <code class="varname">recovery_target_xid</code> setting with <code class="varname">recovery_target_inclusive</code> = <code class="literal">off</code>, we printed an incorrect timestamp (always 2000-01-01) in the <span class="quote">“<span class="quote">recovery stopping before ... transaction</span>”</span> log message.</p>
        </li>
        <li class="listitem">
          <p>In extended query protocol, avoid an immediate commit after <code class="command">ANALYZE</code> if we're running a pipeline (Tom Lane)</p>
          <p>If there's not been an explicit <code class="command">BEGIN TRANSACTION</code>, <code class="command">ANALYZE</code> would take it on itself to commit, which should not happen within a pipelined series of commands.</p>
        </li>
        <li class="listitem">
          <p>Reject cancel request packets having the wrong length (Andrey Borodin)</p>
          <p>The server would process a cancel request even if its length word was too small. This led to reading beyond the end of the allocated buffer. In theory that could cause a segfault, but it seems quite unlikely to happen in practice, since the buffer would have to be very close to the end of memory. The more likely outcome was a bogus log message about wrong backend PID or cancel code. Complain about the wrong length, instead.</p>
        </li>
        <li class="listitem">
          <p>Add recursion and looping defenses in subquery pullup (Tom Lane)</p>
          <p>A contrived query can result in deep recursion and unreasonable amounts of time spent trying to flatten subqueries. A proper fix for that seems unduly invasive for a back-patch, but we can at least add stack depth checks and an interrupt check to allow the query to be cancelled.</p>
        </li>
        <li class="listitem">
          <p>Fix partitionwise-join code to tolerate failure to produce a plan for each partition (Tom Lane)</p>
          <p>This could result in <span class="quote">“<span class="quote">could not devise a query plan for the given query</span>”</span> errors.</p>
        </li>
        <li class="listitem">
          <p>Limit the amount of cleanup work done by <code class="function">get_actual_variable_range</code> (Simon Riggs)</p>
          <p>Planner runs occurring just after deletion of a large number of tuples appearing at the end of an index could expend significant amounts of work setting the <span class="quote">“<span class="quote">killed</span>”</span> bits for those index entries. Limit the amount of work done in any one query by giving up on this process after examining 100 heap pages. All the cleanup will still happen eventually, but without so large a performance hiccup.</p>
        </li>
        <li class="listitem">
          <p>Ensure that execution of full-text-search queries can be cancelled while they are performing phrase matches (Tom Lane)</p>
        </li>
        <li class="listitem">
          <p>Clean up the <span class="application">libpq</span> connection object after a failed replication connection attempt (Andres Freund)</p>
          <p>The previous coding leaked the connection object. In background code paths that's pretty harmless because the calling process will give up and exit. But in commands such as <code class="command">CREATE SUBSCRIPTION</code>, such a failure resulted in a small session-lifespan memory leak.</p>
        </li>
        <li class="listitem">
          <p>In hot-standby servers, reduce processing effort for tracking XIDs known to be active on the primary (Simon Riggs, Michail Nikolaev)</p>
          <p>Insufficiently-aggressive cleanup of the KnownAssignedXids array could lead to poor performance, particularly when <code class="varname">max_connections</code> is set to a large value on the standby.</p>
        </li>
        <li class="listitem">
          <p>Fix uninitialized-memory usage in logical decoding (Masahiko Sawada)</p>
          <p>In certain cases, resumption of logical decoding could try to re-use XID data that had already been freed, leading to unpredictable behavior.</p>
        </li>
        <li class="listitem">
          <p>Avoid rare <span class="quote">“<span class="quote">failed to acquire cleanup lock</span>”</span> panic during WAL replay of hash-index page split operations (Robert Haas)</p>
        </li>
        <li class="listitem">
          <p>Advance a heap page's LSN when setting its all-visible bit during WAL replay (Jeff Davis)</p>
          <p>Failure to do this left the page possibly different on standby servers than the primary, and violated some other expectations about when the LSN changes. This seems only a theoretical hazard so far as <span class="productname">PostgreSQL</span> itself is concerned, but it could upset third-party tools.</p>
        </li>
        <li class="listitem">
          <p>Prevent unsafe usage of a relation cache entry's <code class="structfield">rd_smgr</code> pointer (Amul Sul)</p>
          <p>Remove various assumptions that <code class="structfield">rd_smgr</code> would stay valid over a series of operations, by wrapping all uses of it in a function that will recompute it if needed. This prevents bugs occurring when an unexpected cache flush occurs partway through such a series.</p>
        </li>
        <li class="listitem">
          <p>Fix latent buffer-overrun problem in <code class="literal">WaitEventSet</code> logic (Thomas Munro)</p>
          <p>The <code class="function">epoll</code>-based and <code class="function">kqueue</code>-based implementations could ask the kernel for too many events if the size of their internal buffer was different from the size of the caller's output buffer. That case is not known to occur in released <span class="productname">PostgreSQL</span> versions, but this error is a hazard for external modules and future bug fixes.</p>
        </li>
        <li class="listitem">
          <p>Avoid nominally-undefined behavior when accessing shared memory in 32-bit builds (Andres Freund)</p>
          <p>clang's undefined-behavior sanitizer complained about use of a pointer that was less aligned than it should be. It's very unlikely that this would cause a problem in non-debug builds, but it's worth fixing for testing purposes.</p>
        </li>
        <li class="listitem">
          <p>Fix copy-and-paste errors in cache-lookup-failure messages for ACL checks (Justin Pryzby)</p>
          <p>In principle these errors should never be reached. But if they are, some of them reported the wrong type of object.</p>
        </li>
        <li class="listitem">
          <p>In <span class="application">pg_dump</span>, avoid calling unsafe server functions before we have locks on the tables to be examined (Tom Lane, Gilles Darold)</p>
          <p><span class="application">pg_dump</span> uses certain server functions that can fail if examining a table that gets dropped concurrently. Avoid this type of failure by ensuring that we obtain access share lock before inquiring too deeply into a table's properties, and that we don't apply such functions to tables we don't intend to dump at all.</p>
        </li>
        <li class="listitem">
          <p>Fix tab completion of <code class="command">ALTER FUNCTION/PROCEDURE/ROUTINE</code> ... <code class="command">SET SCHEMA</code> (Dean Rasheed)</p>
        </li>
        <li class="listitem">
          <p>Fix <code class="filename">contrib/seg</code> to not crash or print garbage if an input number has more than 127 digits (Tom Lane)</p>
        </li>
        <li class="listitem">
          <p>In <code class="filename">contrib/sepgsql</code>, avoid deprecation warnings with recent <span class="application">libselinux</span> (Michael Paquier)</p>
        </li>
        <li class="listitem">
          <p>Fix compile failure in building PL/Perl with MSVC when using Strawberry Perl (Andrew Dunstan)</p>
        </li>
        <li class="listitem">
          <p>Fix mismatch of PL/Perl built with MSVC versus a Perl library built with gcc (Andrew Dunstan)</p>
          <p>Such combinations could previously fail with <span class="quote">“<span class="quote">loadable library and perl binaries are mismatched</span>”</span> errors.</p>
        </li>
        <li class="listitem">
          <p>Suppress compiler warnings from Perl's header files (Andres Freund)</p>
          <p>Our preferred compiler options provoke warnings about constructs appearing in recent versions of Perl's header files. When using <span class="application">gcc</span>, we can suppress these warnings with a pragma.</p>
        </li>
        <li class="listitem">
          <p>Fix <span class="application">pg_waldump</span> to build on compilers that don't discard unused static-inline functions (Tom Lane)</p>
        </li>
        <li class="listitem">
          <p>Update time zone data files to <span class="application">tzdata</span> release 2022g for DST law changes in Greenland and Mexico, plus historical corrections for northern Canada, Colombia, and Singapore.</p>
          <p>Notably, a new timezone America/Ciudad_Juarez has been split off from America/Ojinaga.</p>
        </li>
      </ul>
    </div>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="release-11-20.html" title="E.3.&nbsp;Release 11.20">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="release.html" title="Appendix&nbsp;E.&nbsp;Release Notes">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="release-11-18.html" title="E.5.&nbsp;Release 11.18">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">E.3.&nbsp;Release 11.20&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 11.22 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;E.5.&nbsp;Release 11.18</td>
    </tr>
  </table>
</div>

      </div>
      <div class="row">
        <div class="col-md-3">
	  
            <a href="/docs/release/11.18/">
              Previous
            </a>
          
        </div>
        <div class="col-md-6 text-center">
          <p>
            <a href="/docs/release/">
              Return to the Release Notes Archive
            </a>
          </p>
        </div>
        <div class="col-md-3 text-right">
	   
            <a href="/docs/release/11.20/">
              Next
            </a>
          
        </div>
      </div>
    </div>
    <div class="col-md-2 version-list">
      <section>
        <h2>Versions</h2>
      </section>
      <ul>
        
          <li>
            
              <a href="/docs/release/11.22/">
                11.22
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.21/">
                11.21
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.20/">
                11.20
              </a>
            
          </li>
        
          <li>
            
              <strong>
                11.19
              </strong>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.18/">
                11.18
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.17/">
                11.17
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.16/">
                11.16
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.15/">
                11.15
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.14/">
                11.14
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.13/">
                11.13
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.12/">
                11.12
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.11/">
                11.11
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.10/">
                11.10
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.9/">
                11.9
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.8/">
                11.8
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.7/">
                11.7
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.6/">
                11.6
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.5/">
                11.5
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.4/">
                11.4
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.3/">
                11.3
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.2/">
                11.2
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.1/">
                11.1
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/11.0/">
                11.0
              </a>
            
          </li>
        
      </ul>
    </div>
</div>


      </div> <!-- pgContentWrap -->
    </div>
  </div>
</div>

    <!-- Footer -->
    <footer id="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <ul>
              <li><a href="https://twitter.com/postgresql"><img src="/media/img/atpostgresql.png" alt="@postgresql"></a></li>
              <li><a href="https://git.postgresql.org/gitweb/?p=postgresql.git"><img src="/media/img/git.png" alt="Git"></a></li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Copyright -->
      <div class="container">
        <a href="/about/policies/">Policies</a> |
        <a href="/about/policies/coc/">Code of Conduct</a> |
        <a href="/about/">About PostgreSQL</a> |
        <a href="/about/contact/">Contact</a><br/>
        <p>Copyright &copy; 1996-2024 The PostgreSQL Global Development Group</p>
      </div>
    </footer>
    <script src="/media/js/jquery-3.4.1.slim.min.js"></script>
    <script src="/media/js/popper-1.16.0.min.js"></script>
    <script src="/media/js/bootstrap-4.4.1.min.js"></script>
    <script src="/media/js/main.js?606fd482"></script>

  </body>
</html>
