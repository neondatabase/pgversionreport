<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Release Notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <link href="/media/css/fontawesome.css?606fd482" rel="stylesheet">
  <link rel="stylesheet" href="/media/css/bootstrap-4.4.1.min.css">
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" type="text/css" href="/dyncss/base.css?606fd482">

  <script src="/media/js/theme.js?606fd482"></script>

  

  <base href="/docs/8.4/" />


  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          <!-- Header -->
          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand p-0" href="/">
              <img class="logo" src="/media/img/about/press/elephant.png" alt="PostgreSQL Elephant Logo">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#pgNavbar" aria-controls="pgNavbar" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="pgNavbar">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item p-2"><a href="/" title="Home">Home</a></li>
                <li class="nav-item p-2"><a href="/about/" title="About">About</a></li>
                <li class="nav-item p-2"><a href="/download/" title="Download">Download</a></li>
                <li class="nav-item p-2"><a href="/docs/" title="Documentation">Documentation</a></li>
                <li class="nav-item p-2"><a href="/community/" title="Community">Community</a></li>
                <li class="nav-item p-2"><a href="/developer/" title="Developers">Developers</a></li>
                <li class="nav-item p-2"><a href="/support/" title="Support">Support</a></li>
                <li class="nav-item p-2"><a href="/about/donate/" title="Donate">Donate</a></li>
                <li class="nav-item p-2"><a href="/account/" title="Your account">Your account</a></li>
              </ul>
              <form role="search" method="get" action="/search/">
                <div class="input-group">
                  <input id="q" name="q" type="text" size="20" maxlength="255" accesskey="s"  class="form-control" placeholder="Search for...">
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div><!-- /input-group -->
              </form>
              <form id="form-theme" class="form-inline d-none">
                <button id="btn-theme" class="btn btn-default ml-1" type="button"></button>
              </form>
            </div>
          </nav>
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">September 26, 2024: <a href="/about/news/postgresql-17-released-2936/">
  PostgreSQL 17 Released!
</a>

</div>
      </div>
    </div>
    
<div class="container-fluid margin">
  <div class="row">
    <div class="col-lg-2">
      <div id="pgSideWrap">
       
       <div id="pgSideNav">
         <h2>Quick Links</h2>

         <ul>
           
           
           <li><a href="/docs/">Documentation</a>
            
            
           
           </li>
           <li><a href="/docs/">Manuals</a>
            
             <ul>
             
              <li class="last-child"><a href="/docs/manuals/archive/">Archive</a></li>
             
             </ul>
            
            
           
           </li>
           <li><a href="/docs/release/">Release Notes</a>
            
            
           
           </li>
           <li><a href="/docs/books/">Books</a>
            
            
           
           </li>
           <li><a href="/docs/online-resources/">Tutorials &amp; Other Resources</a>
            
            
           
           </li>
           <li><a href="/docs/faq/">FAQ</a>
            
            
           
           </li>
           <li class="last-child"><a href="https://wiki.postgresql.org">Wiki</a>
            
            
           </li>
            
           
        </ul>

       </div>
       
      </div> <!-- pgSideWrap -->
    </div>
    <div class="col-lg-10">
      <div id="pgContentWrap">
        


<div id="release-notes" class="row">
    <div class="col-md-10">
      <section>
        <h1>Release Notes <i class="far fa-file-alt"></i></h1>
        <h2>
          PostgreSQL
          8.4.5
        </h2>
      </section>
      <div id="docContent">
        <div class="NAVHEADER">
  <table summary="Header navigation table" width="100%" border="0"
  cellpadding="0" cellspacing="0">
    <tr>
      <th colspan="5" align="center" valign="bottom">PostgreSQL
      8.4.22 Documentation</th>
    </tr>

    <tr>
      <td width="10%" align="left" valign="top"><a href=
      "release-8-4-6.html" accesskey="P">Prev</a></td>

      <td width="10%" align="left" valign="top"><a href=
      "release.html">Fast Backward</a></td>

      <td width="60%" align="center" valign="bottom">Appendix E.
      Release Notes</td>

      <td width="10%" align="right" valign="top"><a href=
      "release.html">Fast Forward</a></td>

      <td width="10%" align="right" valign="top"><a href=
      "release-8-4-4.html" accesskey="N">Next</a></td>
    </tr>
  </table>
  <hr class="c1" width="100%" />
</div>

<div class="SECT1">
  <h1 class="SECT1"><a name="RELEASE-8-4-5" id=
  "RELEASE-8-4-5">E.18. Release 8.4.5</a></h1>

  <div class="NOTE">
    <blockquote class="NOTE">
      <p><b>Release Date:</b> 2010-10-04</p>
    </blockquote>
  </div>

  <p>This release contains a variety of fixes from 8.4.4. For
  information about new features in the 8.4 major release, see
  <a href="release-8-4.html">Section E.23</a>.</p>

  <div class="SECT2">
    <h2 class="SECT2"><a name="AEN96013" id="AEN96013">E.18.1.
    Migration to Version 8.4.5</a></h2>

    <p>A dump/restore is not required for those running 8.4.X.
    However, if you are upgrading from a version earlier than
    8.4.2, see <a href="release-8-4-2.html">Section E.21</a>.</p>
  </div>

  <div class="SECT2">
    <h2 class="SECT2"><a name="AEN96017" id="AEN96017">E.18.2.
    Changes</a></h2>

    <ul>
      <li>
        <p>Use a separate interpreter for each calling SQL userid
        in PL/Perl and PL/Tcl (Tom Lane)</p>

        <p>This change prevents security problems that can be
        caused by subverting Perl or Tcl code that will be executed
        later in the same session under another SQL user identity
        (for example, within a <tt class="LITERAL">SECURITY
        DEFINER</tt> function). Most scripting languages offer
        numerous ways that that might be done, such as redefining
        standard functions or operators called by the target
        function. Without this change, any SQL user with Perl or
        Tcl language usage rights can do essentially anything with
        the SQL privileges of the target function's owner.</p>

        <p>The cost of this change is that intentional
        communication among Perl and Tcl functions becomes more
        difficult. To provide an escape hatch, PL/PerlU and PL/TclU
        functions continue to use only one interpreter per session.
        This is not considered a security issue since all such
        functions execute at the trust level of a database
        superuser already.</p>

        <p>It is likely that third-party procedural languages that
        claim to offer trusted execution have similar security
        issues. We advise contacting the authors of any PL you are
        depending on for security-critical purposes.</p>

        <p>Our thanks to Tim Bunce for pointing out this issue
        (CVE-2010-3433).</p>
      </li>

      <li>
        <p>Prevent possible crashes in <code class=
        "FUNCTION">pg_get_expr()</code> by disallowing it from
        being called with an argument that is not one of the system
        catalog columns it's intended to be used with (Heikki
        Linnakangas, Tom Lane)</p>
      </li>

      <li>
        <p>Treat exit code 128 (<tt class=
        "LITERAL">ERROR_WAIT_NO_CHILDREN</tt>) as non-fatal on
        Windows (Magnus Hagander)</p>

        <p>Under high load, Windows processes will sometimes fail
        at startup with this error code. Formerly the postmaster
        treated this as a panic condition and restarted the whole
        database, but that seems to be an overreaction.</p>
      </li>

      <li>
        <p>Fix incorrect placement of placeholder evaluation (Tom
        Lane)</p>

        <p>This bug could result in query outputs being non-null
        when they should be null, in cases where the inner side of
        an outer join is a sub-select with non-strict expressions
        in its output list.</p>
      </li>

      <li>
        <p>Fix possible duplicate scans of <tt class=
        "LITERAL">UNION ALL</tt> member relations (Tom Lane)</p>
      </li>

      <li>
        <p>Fix <span class="QUOTE">"cannot handle unplanned
        sub-select"</span> error (Tom Lane)</p>

        <p>This occurred when a sub-select contains a join alias
        reference that expands into an expression containing
        another sub-select.</p>
      </li>

      <li>
        <p>Fix mishandling of whole-row Vars that reference a view
        or sub-select and appear within a nested sub-select (Tom
        Lane)</p>
      </li>

      <li>
        <p>Fix mishandling of cross-type <tt class=
        "LITERAL">IN</tt> comparisons (Tom Lane)</p>

        <p>This could result in failures if the planner tried to
        implement an <tt class="LITERAL">IN</tt> join with a
        sort-then-unique-then-plain-join plan.</p>
      </li>

      <li>
        <p>Fix computation of <tt class="COMMAND">ANALYZE</tt>
        statistics for <tt class="TYPE">tsvector</tt> columns (Jan
        Urbanski)</p>

        <p>The original coding could produce incorrect statistics,
        leading to poor plan choices later.</p>
      </li>

      <li>
        <p>Improve planner's estimate of memory used by
        <code class="FUNCTION">array_agg()</code>, <code class=
        "FUNCTION">string_agg()</code>, and similar aggregate
        functions (Hitoshi Harada)</p>

        <p>The previous drastic underestimate could lead to
        out-of-memory failures due to inappropriate choice of a
        hash-aggregation plan.</p>
      </li>

      <li>
        <p>Fix failure to mark cached plans as transient (Tom
        Lane)</p>

        <p>If a plan is prepared while <tt class="COMMAND">CREATE
        INDEX CONCURRENTLY</tt> is in progress for one of the
        referenced tables, it is supposed to be re-planned once the
        index is ready for use. This was not happening
        reliably.</p>
      </li>

      <li>
        <p>Reduce PANIC to ERROR in some occasionally-reported
        btree failure cases, and provide additional detail in the
        resulting error messages (Tom Lane)</p>

        <p>This should improve the system's robustness with
        corrupted indexes.</p>
      </li>

      <li>
        <p>Fix incorrect search logic for partial-match queries
        with GIN indexes (Tom Lane)</p>

        <p>Cases involving AND/OR combination of several GIN index
        conditions didn't always give the right answer, and were
        sometimes much slower than necessary.</p>
      </li>

      <li>
        <p>Prevent show_session_authorization() from crashing
        within autovacuum processes (Tom Lane)</p>
      </li>

      <li>
        <p>Defend against functions returning setof record where
        not all the returned rows are actually of the same rowtype
        (Tom Lane)</p>
      </li>

      <li>
        <p>Fix possible corruption of pending trigger event lists
        during subtransaction rollback (Tom Lane)</p>

        <p>This could lead to a crash or incorrect firing of
        triggers.</p>
      </li>

      <li>
        <p>Fix possible failure when hashing a pass-by-reference
        function result (Tao Ma, Tom Lane)</p>
      </li>

      <li>
        <p>Improve merge join's handling of NULLs in the join
        columns (Tom Lane)</p>

        <p>A merge join can now stop entirely upon reaching the
        first NULL, if the sort order is such that NULLs sort
        high.</p>
      </li>

      <li>
        <p>Take care to fsync the contents of lockfiles (both
        <tt class="FILENAME">postmaster.pid</tt> and the socket
        lockfile) while writing them (Tom Lane)</p>

        <p>This omission could result in corrupted lockfile
        contents if the machine crashes shortly after postmaster
        start. That could in turn prevent subsequent attempts to
        start the postmaster from succeeding, until the lockfile is
        manually removed.</p>
      </li>

      <li>
        <p>Avoid recursion while assigning XIDs to heavily-nested
        subtransactions (Andres Freund, Robert Haas)</p>

        <p>The original coding could result in a crash if there was
        limited stack space.</p>
      </li>

      <li>
        <p>Avoid holding open old WAL segments in the walwriter
        process (Magnus Hagander, Heikki Linnakangas)</p>

        <p>The previous coding would prevent removal of
        no-longer-needed segments.</p>
      </li>

      <li>
        <p>Fix <tt class="VARNAME">log_line_prefix</tt>'s
        <tt class="LITERAL">%i</tt> escape, which could produce
        junk early in backend startup (Tom Lane)</p>
      </li>

      <li>
        <p>Prevent misinterpretation of partially-specified
        relation options for TOAST tables (Itagaki Takahiro)</p>

        <p>In particular, <tt class="LITERAL">fillfactor</tt> would
        be read as zero if any other reloption had been set for the
        table, leading to serious bloat.</p>
      </li>

      <li>
        <p>Fix inheritance count tracking in <tt class=
        "COMMAND">ALTER TABLE ... ADD CONSTRAINT</tt> (Robert
        Haas)</p>
      </li>

      <li>
        <p>Fix possible data corruption in <tt class=
        "COMMAND">ALTER TABLE ... SET TABLESPACE</tt> when
        archiving is enabled (Jeff Davis)</p>
      </li>

      <li>
        <p>Allow <tt class="COMMAND">CREATE DATABASE</tt> and
        <tt class="COMMAND">ALTER DATABASE ... SET TABLESPACE</tt>
        to be interrupted by query-cancel (Guillaume Lelarge)</p>
      </li>

      <li>
        <p>Improve <tt class="COMMAND">CREATE INDEX</tt>'s checking
        of whether proposed index expressions are immutable (Tom
        Lane)</p>
      </li>

      <li>
        <p>Fix <tt class="COMMAND">REASSIGN OWNED</tt> to handle
        operator classes and families (Asko Tiidumaa)</p>
      </li>

      <li>
        <p>Fix possible core dump when comparing two empty
        <tt class="TYPE">tsquery</tt> values (Tom Lane)</p>
      </li>

      <li>
        <p>Fix <tt class="LITERAL">LIKE</tt>'s handling of patterns
        containing <tt class="LITERAL">%</tt> followed by
        <tt class="LITERAL">_</tt> (Tom Lane)</p>

        <p>We've fixed this before, but there were still some
        incorrectly-handled cases.</p>
      </li>

      <li>
        <p>Re-allow input of Julian dates prior to 0001-01-01 AD
        (Tom Lane)</p>

        <p>Input such as <tt class="LITERAL">'J100000'::date</tt>
        worked before 8.4, but was unintentionally broken by added
        error-checking.</p>
      </li>

      <li>
        <p>Fix PL/pgSQL to throw an error, not crash, if a cursor
        is closed within a <tt class="LITERAL">FOR</tt> loop that
        is iterating over that cursor (Heikki Linnakangas)</p>
      </li>

      <li>
        <p>In PL/Python, defend against null pointer results from
        <code class="FUNCTION">PyCObject_AsVoidPtr</code> and
        <code class="FUNCTION">PyCObject_FromVoidPtr</code> (Peter
        Eisentraut)</p>
      </li>

      <li>
        <p>In <span class="APPLICATION">libpq</span>, fix full SSL
        certificate verification for the case where both <tt class=
        "LITERAL">host</tt> and <tt class="LITERAL">hostaddr</tt>
        are specified (Tom Lane)</p>
      </li>

      <li>
        <p>Make psql recognize <tt class="COMMAND">DISCARD ALL</tt>
        as a command that should not be encased in a transaction
        block in autocommit-off mode (Itagaki Takahiro)</p>
      </li>

      <li>
        <p>Fix some issues in <span class=
        "APPLICATION">pg_dump</span>'s handling of SQL/MED objects
        (Tom Lane)</p>

        <p>Notably, <span class="APPLICATION">pg_dump</span> would
        always fail if run by a non-superuser, which was not
        intended.</p>
      </li>

      <li>
        <p>Improve <span class="APPLICATION">pg_dump</span> and
        <span class="APPLICATION">pg_restore</span>'s handling of
        non-seekable archive files (Tom Lane, Robert Haas)</p>

        <p>This is important for proper functioning of parallel
        restore.</p>
      </li>

      <li>
        <p>Improve parallel pg_restore's ability to cope with
        selective restore (<tt class="LITERAL">-L</tt> option) (Tom
        Lane)</p>

        <p>The original code tended to fail if the <tt class=
        "LITERAL">-L</tt> file commanded a non-default restore
        ordering.</p>
      </li>

      <li>
        <p>Fix <span class="APPLICATION">ecpg</span> to process
        data from <tt class="LITERAL">RETURNING</tt> clauses
        correctly (Michael Meskes)</p>
      </li>

      <li>
        <p>Fix some memory leaks in <span class=
        "APPLICATION">ecpg</span> (Zoltan Boszormenyi)</p>
      </li>

      <li>
        <p>Improve <tt class="FILENAME">contrib/dblink</tt>'s
        handling of tables containing dropped columns (Tom
        Lane)</p>
      </li>

      <li>
        <p>Fix connection leak after <span class="QUOTE">"duplicate
        connection name"</span> errors in <tt class=
        "FILENAME">contrib/dblink</tt> (Itagaki Takahiro)</p>
      </li>

      <li>
        <p>Fix <tt class="FILENAME">contrib/dblink</tt> to handle
        connection names longer than 62 bytes correctly (Itagaki
        Takahiro)</p>
      </li>

      <li>
        <p>Add <code class="FUNCTION">hstore(text, text)</code>
        function to <tt class="FILENAME">contrib/hstore</tt>
        (Robert Haas)</p>

        <p>This function is the recommended substitute for the
        now-deprecated <tt class="LITERAL">=&gt;</tt> operator. It
        was back-patched so that future-proofed code can be used
        with older server versions. Note that the patch will be
        effective only after <tt class=
        "FILENAME">contrib/hstore</tt> is installed or reinstalled
        in a particular database. Users might prefer to execute the
        <tt class="COMMAND">CREATE FUNCTION</tt> command by hand,
        instead.</p>
      </li>

      <li>
        <p>Update build infrastructure and documentation to reflect
        the source code repository's move from CVS to Git (Magnus
        Hagander and others)</p>
      </li>

      <li>
        <p>Update time zone data files to <span class=
        "APPLICATION">tzdata</span> release 2010l for DST law
        changes in Egypt and Palestine; also historical corrections
        for Finland.</p>

        <p>This change also adds new names for two Micronesian
        timezones: Pacific/Chuuk is now preferred over Pacific/Truk
        (and the preferred abbreviation is CHUT not TRUT) and
        Pacific/Pohnpei is preferred over Pacific/Ponape.</p>
      </li>

      <li>
        <p>Make Windows' <span class="QUOTE">"N. Central Asia
        Standard Time"</span> timezone map to Asia/Novosibirsk, not
        Asia/Almaty (Magnus Hagander)</p>

        <p>Microsoft changed the DST behavior of this zone in the
        timezone update from KB976098. Asia/Novosibirsk is a better
        match to its new behavior.</p>
      </li>
    </ul>
  </div>
</div>

<div class="NAVFOOTER">
  <hr class="c1" width="100%" />

  <table summary="Footer navigation table" width="100%" border="0"
  cellpadding="0" cellspacing="0">
    <tr>
      <td width="33%" align="left" valign="top"><a href=
      "release-8-4-6.html" accesskey="P">Prev</a></td>

      <td width="34%" align="center" valign="top"><a href=
      "index.html" accesskey="H">Home</a></td>

      <td width="33%" align="right" valign="top"><a href=
      "release-8-4-4.html" accesskey="N">Next</a></td>
    </tr>

    <tr>
      <td width="33%" align="left" valign="top">Release 8.4.6</td>

      <td width="34%" align="center" valign="top"><a href=
      "release.html" accesskey="U">Up</a></td>

      <td width="33%" align="right" valign="top">Release 8.4.4</td>
    </tr>
  </table>
</div>

      </div>
      <div class="row">
        <div class="col-md-3">
	  
            <a href="/docs/release/8.4.4/">
              Previous
            </a>
          
        </div>
        <div class="col-md-6 text-center">
          <p>
            <a href="/docs/release/">
              Return to the Release Notes Archive
            </a>
          </p>
        </div>
        <div class="col-md-3 text-right">
	   
            <a href="/docs/release/8.4.6/">
              Next
            </a>
          
        </div>
      </div>
    </div>
    <div class="col-md-2 version-list">
      <section>
        <h2>Versions</h2>
      </section>
      <ul>
        
          <li>
            
              <a href="/docs/release/8.4.22/">
                8.4.22
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.21/">
                8.4.21
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.20/">
                8.4.20
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.19/">
                8.4.19
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.18/">
                8.4.18
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.17/">
                8.4.17
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.16/">
                8.4.16
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.15/">
                8.4.15
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.14/">
                8.4.14
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.13/">
                8.4.13
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.12/">
                8.4.12
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.11/">
                8.4.11
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.10/">
                8.4.10
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.9/">
                8.4.9
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.8/">
                8.4.8
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.7/">
                8.4.7
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.6/">
                8.4.6
              </a>
            
          </li>
        
          <li>
            
              <strong>
                8.4.5
              </strong>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.4/">
                8.4.4
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.3/">
                8.4.3
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.2/">
                8.4.2
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.1/">
                8.4.1
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/8.4.0/">
                8.4.0
              </a>
            
          </li>
        
      </ul>
    </div>
</div>


      </div> <!-- pgContentWrap -->
    </div>
  </div>
</div>

    <!-- Footer -->
    <footer id="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <ul>
              <li><a href="https://twitter.com/postgresql"><img src="/media/img/atpostgresql.png" alt="@postgresql"></a></li>
              <li><a href="https://git.postgresql.org/gitweb/?p=postgresql.git"><img src="/media/img/git.png" alt="Git"></a></li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Copyright -->
      <div class="container">
        <a href="/about/policies/">Policies</a> |
        <a href="/about/policies/coc/">Code of Conduct</a> |
        <a href="/about/">About PostgreSQL</a> |
        <a href="/about/contact/">Contact</a><br/>
        <p>Copyright &copy; 1996-2024 The PostgreSQL Global Development Group</p>
      </div>
    </footer>
    <script src="/media/js/jquery-3.4.1.slim.min.js"></script>
    <script src="/media/js/popper-1.16.0.min.js"></script>
    <script src="/media/js/bootstrap-4.4.1.min.js"></script>
    <script src="/media/js/main.js?606fd482"></script>

  </body>
</html>
