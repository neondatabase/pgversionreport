<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Release Notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <link href="/media/css/fontawesome.css?59ea4c82" rel="stylesheet">
  <link rel="stylesheet" href="/media/css/bootstrap-4.4.1.min.css">
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" type="text/css" href="/dyncss/base.css?59ea4c82">

  <script src="/media/js/theme.js?59ea4c82"></script>

  

  <base href="/docs/7.4/" />


  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          <!-- Header -->
          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand p-0" href="/">
              <img class="logo" src="/media/img/about/press/elephant.png" alt="PostgreSQL Elephant Logo">
            </a>
            <input type="checkbox" id="navbar-toggler" aria-controls="pgNavbar" aria-expanded="false" aria-label="Toggle navigation">
            <label for="navbar-toggler" id="navbar-toggler-label" class="navbar-toggler" tabindex="0"><span class="navbar-toggler-icon"></span></label>
            <div class="navbar-collapse" id="pgNavbar">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item p-2"><a href="/" title="Home">Home</a></li>
                <li class="nav-item p-2"><a href="/about/" title="About">About</a></li>
                <li class="nav-item p-2"><a href="/download/" title="Download">Download</a></li>
                <li class="nav-item p-2"><a href="/docs/" title="Documentation">Documentation</a></li>
                <li class="nav-item p-2"><a href="/community/" title="Community">Community</a></li>
                <li class="nav-item p-2"><a href="/developer/" title="Developers">Developers</a></li>
                <li class="nav-item p-2"><a href="/support/" title="Support">Support</a></li>
                <li class="nav-item p-2"><a href="/about/donate/" title="Donate">Donate</a></li>
                <li class="nav-item p-2"><a href="/account/" title="Your account">Your account</a></li>
              </ul>
              <form role="search" method="get" action="/search/">
                <div class="input-group">
                  <input id="q" name="q" type="text" size="20" maxlength="255" accesskey="s"  class="form-control" placeholder="Search for...">
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div><!-- /input-group -->
              </form>
              <form id="form-theme" class="form-inline d-none">
                <button id="btn-theme" class="btn btn-default ml-1" type="button"></button>
              </form>
            </div>
          </nav>
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">November 13, 2025: <a href="/about/news/postgresql-181-177-1611-1515-1420-and-1323-released-3171/">
  PostgreSQL 18.1, 17.7, 16.11, 15.15, 14.20, and 13.23 Released!
</a>
</div>
      </div>
    </div>
    
<div class="container-fluid margin">
  <div class="row">
    <div class="col-lg-2">
      <div id="pgSideWrap">
       
       <div id="pgSideNav">
         <h2>Quick Links</h2>

         <ul>
           
           
           <li><a href="/docs/">Documentation</a>
            
            
           
           </li>
           <li><a href="/docs/">Manuals</a>
            
             <ul>
             
              <li class="last-child"><a href="/docs/manuals/archive/">Archive</a></li>
             
             </ul>
            
            
           
           </li>
           <li><a href="/docs/release/">Release Notes</a>
            
            
           
           </li>
           <li><a href="/docs/books/">Books</a>
            
            
           
           </li>
           <li><a href="/docs/online-resources/">Tutorials &amp; Other Resources</a>
            
            
           
           </li>
           <li><a href="/docs/faq/">FAQ</a>
            
            
           
           </li>
           <li class="last-child"><a href="https://wiki.postgresql.org">Wiki</a>
            
            
           </li>
            
           
        </ul>

       </div>
       
      </div> <!-- pgSideWrap -->
    </div>
    <div class="col-lg-10">
      <div id="pgContentWrap">
        


<div id="release-notes" class="row">
    <div class="col-md-10">
      <section>
        <h1>Release Notes <i class="far fa-file-alt"></i></h1>
        <h2>
          PostgreSQL
          7.4.0
        </h2>
      </section>
      <div id="docContent">
        <div class="NAVHEADER">
  <table summary="Header navigation table" width="100%" border="0"
  cellpadding="0" cellspacing="0">
    <tr>
      <th colspan="5" align="center" valign="bottom">PostgreSQL
      7.4.30 Documentation</th>
    </tr>

    <tr>
      <td width="10%" align="left" valign="top"><a href=
      "release-7-4-1.html" accesskey="P">Prev</a></td>

      <td width="10%" align="left" valign="top"><a href=
      "release.html">Fast Backward</a></td>

      <td width="60%" align="center" valign="bottom">Appendix E.
      Release Notes</td>

      <td width="10%" align="right" valign="top"><a href=
      "release.html">Fast Forward</a></td>

      <td width="10%" align="right" valign="top"><a href=
      "release-7-3-21.html" accesskey="N">Next</a></td>
    </tr>
  </table>
  <hr class="c1" width="100%" />
</div>

<div class="SECT1">
  <h1 class="SECT1"><a name="RELEASE-7-4" id="RELEASE-7-4">E.31.
  Release 7.4</a></h1>

  <div class="NOTE">
    <blockquote class="NOTE">
      <p><b>Release date:</b> 2003-11-17</p>
    </blockquote>
  </div>

  <div class="SECT2">
    <h2 class="SECT2"><a name="AEN63197" id="AEN63197">E.31.1.
    Overview</a></h2>

    <p>Major changes in this release:</p>

    <div class="VARIABLELIST">
      <dl>
        <dt><tt class="LITERAL">IN</tt> / <tt class="LITERAL">NOT
        IN</tt> subqueries are now much more efficient</dt>

        <dd>
          <p>In previous releases, <tt class=
          "LITERAL">IN</tt>/<tt class="LITERAL">NOT IN</tt>
          subqueries were joined to the upper query by sequentially
          scanning the subquery looking for a match. The 7.4 code
          uses the same sophisticated techniques used by ordinary
          joins and so is much faster. An <tt class=
          "LITERAL">IN</tt> will now usually be as fast as or
          faster than an equivalent <tt class="LITERAL">EXISTS</tt>
          subquery; this reverses the conventional wisdom that
          applied to previous releases.</p>
        </dd>

        <dt>Improved <tt class="LITERAL">GROUP BY</tt> processing
        by using hash buckets</dt>

        <dd>
          <p>In previous releases, rows to be grouped had to be
          sorted first. The 7.4 code can do <tt class=
          "LITERAL">GROUP BY</tt> without sorting, by accumulating
          results into a hash table with one entry per group. It
          will still use the sort technique, however, if the hash
          table is estimated to be too large to fit in <tt class=
          "VARNAME">sort_mem</tt>.</p>
        </dd>

        <dt>New multikey hash join capability</dt>

        <dd>
          <p>In previous releases, hash joins could only occur on
          single keys. This release allows multicolumn hash
          joins.</p>
        </dd>

        <dt>Queries using the explicit <tt class=
        "LITERAL">JOIN</tt> syntax are now better optimized</dt>

        <dd>
          <p>Prior releases evaluated queries using the explicit
          <tt class="LITERAL">JOIN</tt> syntax only in the order
          implied by the syntax. 7.4 allows full optimization of
          these queries, meaning the optimizer considers all
          possible join orderings and chooses the most efficient.
          Outer joins, however, must still follow the declared
          ordering.</p>
        </dd>

        <dt>Faster and more powerful regular expression code</dt>

        <dd>
          <p>The entire regular expression module has been replaced
          with a new version by Henry Spencer, originally written
          for Tcl. The code greatly improves performance and
          supports several flavors of regular expressions.</p>
        </dd>

        <dt>Function-inlining for simple SQL functions</dt>

        <dd>
          <p>Simple SQL functions can now be inlined by including
          their SQL in the main query. This improves performance by
          eliminating per-call overhead. That means simple SQL
          functions now behave like macros.</p>
        </dd>

        <dt>Full support for IPv6 connections and IPv6 address data
        types</dt>

        <dd>
          <p>Previous releases allowed only IPv4 connections, and
          the IP data types only supported IPv4 addresses. This
          release adds full IPv6 support in both of these
          areas.</p>
        </dd>

        <dt>Major improvements in SSL performance and
        reliability</dt>

        <dd>
          <p>Several people very familiar with the SSL API have
          overhauled our SSL code to improve SSL key negotiation
          and error recovery.</p>
        </dd>

        <dt>Make free space map efficiently reuse empty index
        pages, and other free space management improvements</dt>

        <dd>
          <p>In previous releases, B-tree index pages that were
          left empty because of deleted rows could only be reused
          by rows with index values similar to the rows originally
          indexed on that page. In 7.4, <tt class=
          "COMMAND">VACUUM</tt> records empty index pages and
          allows them to be reused for any future index rows.</p>
        </dd>

        <dt>SQL-standard information schema</dt>

        <dd>
          <p>The information schema provides a standardized and
          stable way to access information about the schema objects
          defined in a database.</p>
        </dd>

        <dt>Cursors conform more closely to the SQL standard</dt>

        <dd>
          <p>The commands <tt class="COMMAND">FETCH</tt> and
          <tt class="COMMAND">MOVE</tt> have been overhauled to
          conform more closely to the SQL standard.</p>
        </dd>

        <dt>Cursors can exist outside transactions</dt>

        <dd>
          <p>These cursors are also called holdable cursors.</p>
        </dd>

        <dt>New client-to-server protocol</dt>

        <dd>
          <p>The new protocol adds error codes, more status
          information, faster startup, better support for binary
          data transmission, parameter values separated from SQL
          commands, prepared statements available at the protocol
          level, and cleaner recovery from <tt class=
          "COMMAND">COPY</tt> failures. The older protocol is still
          supported by both server and clients.</p>
        </dd>

        <dt><span class="APPLICATION">libpq</span> and <span class=
        "APPLICATION">ECPG</span> applications are now fully
        thread-safe</dt>

        <dd>
          <p>While previous <span class="APPLICATION">libpq</span>
          releases already supported threads, this release improves
          thread safety by fixing some non-thread-safe code that
          was used during database connection startup. The
          <tt class="COMMAND">configure</tt> option <tt class=
          "OPTION">--enable-thread-safety</tt> must be used to
          enable this feature.</p>
        </dd>

        <dt>New version of full-text indexing</dt>

        <dd>
          <p>A new full-text indexing suite is available in
          <tt class="FILENAME">contrib/tsearch2</tt>.</p>
        </dd>

        <dt>New autovacuum tool</dt>

        <dd>
          <p>The new autovacuum tool in <tt class=
          "FILENAME">contrib/autovacuum</tt> monitors the database
          statistics tables for <tt class=
          "COMMAND">INSERT</tt>/<tt class=
          "COMMAND">UPDATE</tt>/<tt class="COMMAND">DELETE</tt>
          activity and automatically vacuums tables when
          needed.</p>
        </dd>

        <dt>Array handling has been improved and moved into the
        server core</dt>

        <dd>
          <p>Many array limitations have been removed, and arrays
          behave more like fully-supported data types.</p>
        </dd>
      </dl>
    </div>
  </div>

  <div class="SECT2">
    <h2 class="SECT2"><a name="AEN63294" id="AEN63294">E.31.2.
    Migration to Version 7.4</a></h2>

    <p>A dump/restore using <span class=
    "APPLICATION">pg_dump</span> is required for those wishing to
    migrate data from any previous release.</p>

    <p>Observe the following incompatibilities:</p>

    <ul>
      <li>
        <p>The server-side autocommit setting was removed and
        reimplemented in client applications and languages.
        Server-side autocommit was causing too many problems with
        languages and applications that wanted to control their own
        autocommit behavior, so autocommit was removed from the
        server and added to individual client APIs as
        appropriate.</p>
      </li>

      <li>
        <p>Error message wording has changed substantially in this
        release. Significant effort was invested to make the
        messages more consistent and user-oriented. If your
        applications try to detect different error conditions by
        parsing the error message, you are strongly encouraged to
        use the new error code facility instead.</p>
      </li>

      <li>
        <p>Inner joins using the explicit <tt class=
        "LITERAL">JOIN</tt> syntax might behave differently because
        they are now better optimized.</p>
      </li>

      <li>
        <p>A number of server configuration parameters have been
        renamed for clarity, primarily those related to
        logging.</p>
      </li>

      <li>
        <p><tt class="LITERAL">FETCH 0</tt> or <tt class=
        "LITERAL">MOVE 0</tt> now does nothing. In prior releases,
        <tt class="LITERAL">FETCH 0</tt> would fetch all remaining
        rows, and <tt class="LITERAL">MOVE 0</tt> would move to the
        end of the cursor.</p>
      </li>

      <li>
        <p><tt class="COMMAND">FETCH</tt> and <tt class=
        "COMMAND">MOVE</tt> now return the actual number of rows
        fetched/moved, or zero if at the beginning/end of the
        cursor. Prior releases would return the row count passed to
        the command, not the number of rows actually fetched or
        moved.</p>
      </li>

      <li>
        <p><tt class="COMMAND">COPY</tt> now can process files that
        use carriage-return or carriage-return/line-feed
        end-of-line sequences. Literal carriage-returns and
        line-feeds are no longer accepted in data values; use
        <tt class="LITERAL">\r</tt> and <tt class="LITERAL">\n</tt>
        instead.</p>
      </li>

      <li>
        <p>Trailing spaces are now trimmed when converting from
        type <tt class="TYPE">char(<tt class=
        "REPLACEABLE c2">n</tt>)</tt> to <tt class=
        "TYPE">varchar(<tt class="REPLACEABLE c2">n</tt>)</tt> or
        <tt class="TYPE">text</tt>. This is what most people always
        expected to happen anyway.</p>
      </li>

      <li>
        <p>The data type <tt class="TYPE">float(<tt class=
        "REPLACEABLE c2">p</tt>)</tt> now measures <tt class=
        "REPLACEABLE c2">p</tt> in binary digits, not decimal
        digits. The new behavior follows the SQL standard.</p>
      </li>

      <li>
        <p>Ambiguous date values now must match the ordering
        specified by the <tt class="VARNAME">datestyle</tt>
        setting. In prior releases, a date specification of
        <tt class="LITERAL">10/20/03</tt> was interpreted as a date
        in October even if <tt class="VARNAME">datestyle</tt>
        specified that the day should be first. 7.4 will throw an
        error if a date specification is invalid for the current
        setting of <tt class="VARNAME">datestyle</tt>.</p>
      </li>

      <li>
        <p>The functions <code class="FUNCTION">oidrand</code>,
        <code class="FUNCTION">oidsrand</code>, and <code class=
        "FUNCTION">userfntest</code> have been removed. These
        functions were determined to be no longer useful.</p>
      </li>

      <li>
        <p>String literals specifying time-varying date/time
        values, such as <tt class="LITERAL">'now'</tt> or
        <tt class="LITERAL">'today'</tt> will no longer work as
        expected in column default expressions; they now cause the
        time of the table creation to be the default, not the time
        of the insertion. Functions such as <code class=
        "FUNCTION">now()</code>, <code class=
        "FUNCTION">current_timestamp</code>, or <code class=
        "FUNCTION">current_date</code> should be used instead.</p>

        <p>In previous releases, there was special code so that
        strings such as <tt class="LITERAL">'now'</tt> were
        interpreted at <tt class="COMMAND">INSERT</tt> time and not
        at table creation time, but this work around didn't cover
        all cases. Release 7.4 now requires that defaults be
        defined properly using functions such as <code class=
        "FUNCTION">now()</code> or <code class=
        "FUNCTION">current_timestamp</code>. These will work in all
        situations.</p>
      </li>

      <li>
        <p>The dollar sign (<tt class="LITERAL">$</tt>) is no
        longer allowed in operator names. It can instead be a
        non-first character in identifiers. This was done to
        improve compatibility with other database systems, and to
        avoid syntax problems when parameter placeholders
        (<tt class="LITERAL">$<tt class=
        "REPLACEABLE c2">n</tt></tt>) are written adjacent to
        operators.</p>
      </li>
    </ul>
  </div>

  <div class="SECT2">
    <h2 class="SECT2"><a name="AEN63364" id="AEN63364">E.31.3.
    Changes</a></h2>

    <p>Below you will find a detailed account of the changes
    between release 7.4 and the previous major release.</p>

    <div class="SECT3">
      <h3 class="SECT3"><a name="AEN63367" id="AEN63367">E.31.3.1.
      Server Operation Changes</a></h3>

      <ul>
        <li>
          <p>Allow IPv6 server connections (Nigel Kukard, Johan
          Jordaan, Bruce, Tom, Kurt Roeckx, Andrew Dunstan)</p>
        </li>

        <li>
          <p>Fix SSL to handle errors cleanly (Nathan Mueller)</p>

          <p>In prior releases, certain SSL API error reports were
          not handled correctly. This release fixes those
          problems.</p>
        </li>

        <li>
          <p>SSL protocol security and performance improvements
          (Sean Chittenden)</p>

          <p>SSL key renegotiation was happening too frequently,
          causing poor SSL performance. Also, initial key handling
          was improved.</p>
        </li>

        <li>
          <p>Print lock information when a deadlock is detected
          (Tom)</p>

          <p>This allows easier debugging of deadlock
          situations.</p>
        </li>

        <li>
          <p>Update <tt class="FILENAME">/tmp</tt> socket
          modification times regularly to avoid their removal
          (Tom)</p>

          <p>This should help prevent <tt class=
          "FILENAME">/tmp</tt> directory cleaner administration
          scripts from removing server socket files.</p>
        </li>

        <li>
          <p>Enable PAM for Mac OS X (Aaron Hillegass)</p>
        </li>

        <li>
          <p>Make B-tree indexes fully WAL-safe (Tom)</p>

          <p>In prior releases, under certain rare cases, a server
          crash could cause B-tree indexes to become corrupt. This
          release removes those last few rare cases.</p>
        </li>

        <li>
          <p>Allow B-tree index compaction and empty page reuse
          (Tom)</p>
        </li>

        <li>
          <p>Fix inconsistent index lookups during split of first
          root page (Tom)</p>

          <p>In prior releases, when a single-page index split into
          two pages, there was a brief period when another database
          session could miss seeing an index entry. This release
          fixes that rare failure case.</p>
        </li>

        <li>
          <p>Improve free space map allocation logic (Tom)</p>
        </li>

        <li>
          <p>Preserve free space information between server
          restarts (Tom)</p>

          <p>In prior releases, the free space map was not saved
          when the postmaster was stopped, so newly started servers
          had no free space information. This release saves the
          free space map, and reloads it when the server is
          restarted.</p>
        </li>

        <li>
          <p>Add start time to <tt class=
          "LITERAL">pg_stat_activity</tt> (Neil)</p>
        </li>

        <li>
          <p>New code to detect corrupt disk pages; erase with
          <tt class="VARNAME">zero_damaged_pages</tt> (Tom)</p>
        </li>

        <li>
          <p>New client/server protocol: faster, no username length
          limit, allow clean exit from <tt class=
          "COMMAND">COPY</tt> (Tom)</p>
        </li>

        <li>
          <p>Add transaction status, table ID, column ID to
          client/server protocol (Tom)</p>
        </li>

        <li>
          <p>Add binary I/O to client/server protocol (Tom)</p>
        </li>

        <li>
          <p>Remove autocommit server setting; move to client
          applications (Tom)</p>
        </li>

        <li>
          <p>New error message wording, error codes, and three
          levels of error detail (Tom, Joe, Peter)</p>
        </li>
      </ul>
    </div>

    <div class="SECT3">
      <h3 class="SECT3"><a name="AEN63418" id="AEN63418">E.31.3.2.
      Performance Improvements</a></h3>

      <ul>
        <li>
          <p>Add hashing for <tt class="LITERAL">GROUP BY</tt>
          aggregates (Tom)</p>
        </li>

        <li>
          <p>Make nested-loop joins be smarter about multicolumn
          indexes (Tom)</p>
        </li>

        <li>
          <p>Allow multikey hash joins (Tom)</p>
        </li>

        <li>
          <p>Improve constant folding (Tom)</p>
        </li>

        <li>
          <p>Add ability to inline simple SQL functions (Tom)</p>
        </li>

        <li>
          <p>Reduce memory usage for queries using complex
          functions (Tom)</p>

          <p>In prior releases, functions returning allocated
          memory would not free it until the query completed. This
          release allows the freeing of function-allocated memory
          when the function call completes, reducing the total
          memory used by functions.</p>
        </li>

        <li>
          <p>Improve GEQO optimizer performance (Tom)</p>

          <p>This release fixes several inefficiencies in the way
          the GEQO optimizer manages potential query paths.</p>
        </li>

        <li>
          <p>Allow <tt class="LITERAL">IN</tt>/<tt class=
          "LITERAL">NOT IN</tt> to be handled via hash tables
          (Tom)</p>
        </li>

        <li>
          <p>Improve <tt class="LITERAL">NOT IN (<tt class=
          "REPLACEABLE c2">subquery</tt>)</tt> performance
          (Tom)</p>
        </li>

        <li>
          <p>Allow most <tt class="LITERAL">IN</tt> subqueries to
          be processed as joins (Tom)</p>
        </li>

        <li>
          <p>Pattern matching operations can use indexes regardless
          of locale (Peter)</p>

          <p>There is no way for non-ASCII locales to use the
          standard indexes for <tt class="LITERAL">LIKE</tt>
          comparisons. This release adds a way to create a special
          index for <tt class="LITERAL">LIKE</tt>.</p>
        </li>

        <li>
          <p>Allow the postmaster to preload libraries using
          <tt class="VARNAME">preload_libraries</tt> (Joe)</p>

          <p>For shared libraries that require a long time to load,
          this option is available so the library can be preloaded
          in the postmaster and inherited by all database
          sessions.</p>
        </li>

        <li>
          <p>Improve optimizer cost computations, particularly for
          subqueries (Tom)</p>
        </li>

        <li>
          <p>Avoid sort when subquery <tt class="LITERAL">ORDER
          BY</tt> matches upper query (Tom)</p>
        </li>

        <li>
          <p>Deduce that <tt class="LITERAL">WHERE a.x = b.y AND
          b.y = 42</tt> also means <tt class="LITERAL">a.x =
          42</tt> (Tom)</p>
        </li>

        <li>
          <p>Allow hash/merge joins on complex joins (Tom)</p>
        </li>

        <li>
          <p>Allow hash joins for more data types (Tom)</p>
        </li>

        <li>
          <p>Allow join optimization of explicit inner joins,
          disable with <tt class="VARNAME">join_collapse_limit</tt>
          (Tom)</p>
        </li>

        <li>
          <p>Add parameter <tt class=
          "VARNAME">from_collapse_limit</tt> to control conversion
          of subqueries to joins (Tom)</p>
        </li>

        <li>
          <p>Use faster and more powerful regular expression code
          from Tcl (Henry Spencer, Tom)</p>
        </li>

        <li>
          <p>Use bit-mapped relation sets in the optimizer
          (Tom)</p>
        </li>

        <li>
          <p>Improve connection startup time (Tom)</p>

          <p>The new client/server protocol requires fewer network
          packets to start a database session.</p>
        </li>

        <li>
          <p>Improve trigger/constraint performance (Stephan)</p>
        </li>

        <li>
          <p>Improve speed of <tt class="LITERAL">col IN (const,
          const, const, ...)</tt> (Tom)</p>
        </li>

        <li>
          <p>Fix hash indexes which were broken in rare cases
          (Tom)</p>
        </li>

        <li>
          <p>Improve hash index concurrency and speed (Tom)</p>

          <p>Prior releases suffered from poor hash index
          performance, particularly for high concurrency
          situations. This release fixes that, and the development
          group is interested in reports comparing B-tree and hash
          index performance.</p>
        </li>

        <li>
          <p>Align shared buffers on 32-byte boundary for copy
          speed improvement (Manfred Spraul)</p>

          <p>Certain CPU's perform faster data copies when
          addresses are 32-byte aligned.</p>
        </li>

        <li>
          <p>Data type <tt class="TYPE">numeric</tt> reimplemented
          for better performance (Tom)</p>

          <p><tt class="TYPE">numeric</tt> used to be stored in
          base 100. The new code uses base 10000, for significantly
          better performance.</p>
        </li>
      </ul>
    </div>

    <div class="SECT3">
      <h3 class="SECT3"><a name="AEN63502" id="AEN63502">E.31.3.3.
      Server Configuration Changes</a></h3>

      <ul>
        <li>
          <p>Rename server parameter <tt class=
          "VARNAME">server_min_messages</tt> to <tt class=
          "VARNAME">log_min_messages</tt> (Bruce)</p>

          <p>This was done so most parameters that control the
          server logs begin with <tt class="LITERAL">log_</tt>.</p>
        </li>

        <li>
          <p>Rename <tt class="VARNAME">show_*_stats</tt> to
          <tt class="VARNAME">log_*_stats</tt> (Bruce)</p>
        </li>

        <li>
          <p>Rename <tt class="VARNAME">show_source_port</tt> to
          <tt class="VARNAME">log_source_port</tt> (Bruce)</p>
        </li>

        <li>
          <p>Rename <tt class="VARNAME">hostname_lookup</tt> to
          <tt class="VARNAME">log_hostname</tt> (Bruce)</p>
        </li>

        <li>
          <p>Add <tt class="VARNAME">checkpoint_warning</tt> to
          warn of excessive checkpointing (Bruce)</p>

          <p>In prior releases, it was difficult to determine if
          checkpoint was happening too frequently. This feature
          adds a warning to the server logs when excessive
          checkpointing happens.</p>
        </li>

        <li>
          <p>New read-only server parameters for localization
          (Tom)</p>
        </li>

        <li>
          <p>Change debug server log messages to output as
          <tt class="LITERAL">DEBUG</tt> rather than <tt class=
          "LITERAL">LOG</tt> (Bruce)</p>
        </li>

        <li>
          <p>Prevent server log variables from being turned off by
          non-superusers (Bruce)</p>

          <p>This is a security feature so non-superusers cannot
          disable logging that was enabled by the
          administrator.</p>
        </li>

        <li>
          <p><tt class="VARNAME">log_min_messages</tt>/<tt class=
          "VARNAME">client_min_messages</tt> now controls
          <tt class="VARNAME">debug_*</tt> output (Bruce)</p>

          <p>This centralizes client debug information so all debug
          output can be sent to either the client or server
          logs.</p>
        </li>

        <li>
          <p>Add Mac OS X Rendezvous server support (Chris
          Campbell)</p>

          <p>This allows Mac OS X hosts to query the network for
          available <span class="PRODUCTNAME">PostgreSQL</span>
          servers.</p>
        </li>

        <li>
          <p>Add ability to print only slow statements using
          <tt class="VARNAME">log_min_duration_statement</tt>
          (Christopher)</p>

          <p>This is an often requested debugging feature that
          allows administrators to see only slow queries in their
          server logs.</p>
        </li>

        <li>
          <p>Allow <tt class="FILENAME">pg_hba.conf</tt> to accept
          netmasks in CIDR format (Andrew Dunstan)</p>

          <p>This allows administrators to merge the host IP
          address and netmask fields into a single CIDR field in
          <tt class="FILENAME">pg_hba.conf</tt>.</p>
        </li>

        <li>
          <p>New read-only parameter <tt class=
          "VARNAME">is_superuser</tt> (Tom)</p>
        </li>

        <li>
          <p>New parameter <tt class=
          "VARNAME">log_error_verbosity</tt> to control error
          detail (Tom)</p>

          <p>This works with the new error reporting feature to
          supply additional error information like hints, file
          names and line numbers.</p>
        </li>

        <li>
          <p><tt class="LITERAL">postgres --describe-config</tt>
          now dumps server config variables (Aizaz Ahmed,
          Peter)</p>

          <p>This option is useful for administration tools that
          need to know the configuration variable names and their
          minimums, maximums, defaults, and descriptions.</p>
        </li>

        <li>
          <p>Add new columns in <tt class=
          "LITERAL">pg_settings</tt>: <tt class=
          "LITERAL">context</tt>, <tt class="LITERAL">type</tt>,
          <tt class="LITERAL">source</tt>, <tt class=
          "LITERAL">min_val</tt>, <tt class="LITERAL">max_val</tt>
          (Joe)</p>
        </li>

        <li>
          <p>Make default <tt class="VARNAME">shared_buffers</tt>
          1000 and <tt class="VARNAME">max_connections</tt> 100, if
          possible (Tom)</p>

          <p>Prior versions defaulted to 64 shared buffers so
          <span class="PRODUCTNAME">PostgreSQL</span> would start
          on even very old systems. This release tests the amount
          of shared memory allowed by the platform and selects more
          reasonable default values if possible. Of course, users
          are still encouraged to evaluate their resource load and
          size <tt class="VARNAME">shared_buffers</tt>
          accordingly.</p>
        </li>

        <li>
          <p>New <tt class="FILENAME">pg_hba.conf</tt> record type
          <tt class="LITERAL">hostnossl</tt> to prevent SSL
          connections (Jon Jensen)</p>

          <p>In prior releases, there was no way to prevent SSL
          connections if both the client and server supported SSL.
          This option allows that capability.</p>
        </li>

        <li>
          <p>Remove parameter <tt class=
          "VARNAME">geqo_random_seed</tt> (Tom)</p>
        </li>

        <li>
          <p>Add server parameter <tt class=
          "VARNAME">regex_flavor</tt> to control regular expression
          processing (Tom)</p>
        </li>

        <li>
          <p>Make <tt class="COMMAND">pg_ctl</tt> better handle
          nonstandard ports (Greg)</p>
        </li>
      </ul>
    </div>

    <div class="SECT3">
      <h3 class="SECT3"><a name="AEN63595" id="AEN63595">E.31.3.4.
      Query Changes</a></h3>

      <ul>
        <li>
          <p>New SQL-standard information schema (Peter)</p>
        </li>

        <li>
          <p>Add read-only transactions (Peter)</p>
        </li>

        <li>
          <p>Print key name and value in foreign-key violation
          messages (Dmitry Tkach)</p>
        </li>

        <li>
          <p>Allow users to see their own queries in <tt class=
          "LITERAL">pg_stat_activity</tt> (Kevin Brown)</p>

          <p>In prior releases, only the superuser could see query
          strings using <tt class="LITERAL">pg_stat_activity</tt>.
          Now ordinary users can see their own query strings.</p>
        </li>

        <li>
          <p>Fix aggregates in subqueries to match SQL standard
          (Tom)</p>

          <p>The SQL standard says that an aggregate function
          appearing within a nested subquery belongs to the outer
          query if its argument contains only outer-query
          variables. Prior <span class=
          "PRODUCTNAME">PostgreSQL</span> releases did not handle
          this fine point correctly.</p>
        </li>

        <li>
          <p>Add option to prevent auto-addition of tables
          referenced in query (Nigel J. Andrews)</p>

          <p>By default, tables mentioned in the query are
          automatically added to the <tt class="LITERAL">FROM</tt>
          clause if they are not already there. This is compatible
          with historic <span class="PRODUCTNAME">POSTGRES</span>
          behavior but is contrary to the SQL standard. This option
          allows selecting standard-compatible behavior.</p>
        </li>

        <li>
          <p>Allow <tt class="LITERAL">UPDATE ... SET col =
          DEFAULT</tt> (Rod)</p>

          <p>This allows <tt class="COMMAND">UPDATE</tt> to set a
          column to its declared default value.</p>
        </li>

        <li>
          <p>Allow expressions to be used in <tt class=
          "LITERAL">LIMIT</tt>/<tt class="LITERAL">OFFSET</tt>
          (Tom)</p>

          <p>In prior releases, <tt class=
          "LITERAL">LIMIT</tt>/<tt class="LITERAL">OFFSET</tt>
          could only use constants, not expressions.</p>
        </li>

        <li>
          <p>Implement <tt class="LITERAL">CREATE TABLE AS
          EXECUTE</tt> (Neil, Peter)</p>
        </li>
      </ul>
    </div>

    <div class="SECT3">
      <h3 class="SECT3"><a name="AEN63633" id="AEN63633">E.31.3.5.
      Object Manipulation Changes</a></h3>

      <ul>
        <li>
          <p>Make <tt class="COMMAND">CREATE SEQUENCE</tt> grammar
          more conforming to SQL:2003 (Neil)</p>
        </li>

        <li>
          <p>Add statement-level triggers (Neil)</p>

          <p>While this allows a trigger to fire at the end of a
          statement, it does not allow the trigger to access all
          rows modified by the statement. This capability is
          planned for a future release.</p>
        </li>

        <li>
          <p>Add check constraints for domains (Rod)</p>

          <p>This greatly increases the usefulness of domains by
          allowing them to use check constraints.</p>
        </li>

        <li>
          <p>Add <tt class="COMMAND">ALTER DOMAIN</tt> (Rod)</p>

          <p>This allows manipulation of existing domains.</p>
        </li>

        <li>
          <p>Fix several zero-column table bugs (Tom)</p>

          <p><span class="PRODUCTNAME">PostgreSQL</span> supports
          zero-column tables. This fixes various bugs that occur
          when using such tables.</p>
        </li>

        <li>
          <p>Have <tt class="LITERAL">ALTER TABLE ... ADD PRIMARY
          KEY</tt> add not-null constraint (Rod)</p>

          <p>In prior releases, <tt class="LITERAL">ALTER TABLE ...
          ADD PRIMARY</tt> would add a unique index, but not a
          not-null constraint. That is fixed in this release.</p>
        </li>

        <li>
          <p>Add <tt class="LITERAL">ALTER TABLE ... WITHOUT
          OIDS</tt> (Rod)</p>

          <p>This allows control over whether new and updated rows
          will have an OID column. This is most useful for saving
          storage space.</p>
        </li>

        <li>
          <p>Add <tt class="LITERAL">ALTER SEQUENCE</tt> to modify
          minimum, maximum, increment, cache, cycle values
          (Rod)</p>
        </li>

        <li>
          <p>Add <tt class="LITERAL">ALTER TABLE ... CLUSTER
          ON</tt> (Alvaro Herrera)</p>

          <p>This command is used by <tt class=
          "COMMAND">pg_dump</tt> to record the cluster column for
          each table previously clustered. This information is used
          by database-wide cluster to cluster all previously
          clustered tables.</p>
        </li>

        <li>
          <p>Improve automatic type casting for domains (Rod,
          Tom)</p>
        </li>

        <li>
          <p>Allow dollar signs in identifiers, except as first
          character (Tom)</p>
        </li>

        <li>
          <p>Disallow dollar signs in operator names, so <tt class=
          "LITERAL">x=$1</tt> works (Tom)</p>
        </li>

        <li>
          <p>Allow copying table schema using <tt class=
          "LITERAL">LIKE <tt class=
          "REPLACEABLE c2">subtable</tt></tt>, also SQL:2003
          feature <tt class="LITERAL">INCLUDING DEFAULTS</tt>
          (Rod)</p>
        </li>

        <li>
          <p>Add <tt class="LITERAL">WITH GRANT OPTION</tt> clause
          to <tt class="COMMAND">GRANT</tt> (Peter)</p>

          <p>This enabled <tt class="COMMAND">GRANT</tt> to give
          other users the ability to grant privileges on a
          object.</p>
        </li>
      </ul>
    </div>

    <div class="SECT3">
      <h3 class="SECT3"><a name="AEN63688" id="AEN63688">E.31.3.6.
      Utility Command Changes</a></h3>

      <ul>
        <li>
          <p>Add <tt class="LITERAL">ON COMMIT</tt> clause to
          <tt class="COMMAND">CREATE TABLE</tt> for temporary
          tables (Gavin)</p>

          <p>This adds the ability for a table to be dropped or all
          rows deleted on transaction commit.</p>
        </li>

        <li>
          <p>Allow cursors outside transactions using <tt class=
          "LITERAL">WITH HOLD</tt> (Neil)</p>

          <p>In previous releases, cursors were removed at the end
          of the transaction that created them. Cursors can now be
          created with the <tt class="LITERAL">WITH HOLD</tt>
          option, which allows them to continue to be accessed
          after the creating transaction has committed.</p>
        </li>

        <li>
          <p><tt class="LITERAL">FETCH 0</tt> and <tt class=
          "LITERAL">MOVE 0</tt> now do nothing (Bruce)</p>

          <p>In previous releases, <tt class="LITERAL">FETCH 0</tt>
          fetched all remaining rows, and <tt class="LITERAL">MOVE
          0</tt> moved to the end of the cursor.</p>
        </li>

        <li>
          <p>Cause <tt class="COMMAND">FETCH</tt> and <tt class=
          "COMMAND">MOVE</tt> to return the number of rows
          fetched/moved, or zero if at the beginning/end of cursor,
          per SQL standard (Bruce)</p>

          <p>In prior releases, the row count returned by
          <tt class="COMMAND">FETCH</tt> and <tt class=
          "COMMAND">MOVE</tt> did not accurately reflect the number
          of rows processed.</p>
        </li>

        <li>
          <p>Properly handle <tt class="LITERAL">SCROLL</tt> with
          cursors, or report an error (Neil)</p>

          <p>Allowing random access (both forward and backward
          scrolling) to some kinds of queries cannot be done
          without some additional work. If <tt class=
          "LITERAL">SCROLL</tt> is specified when the cursor is
          created, this additional work will be performed.
          Furthermore, if the cursor has been created with
          <tt class="LITERAL">NO SCROLL</tt>, no random access is
          allowed.</p>
        </li>

        <li>
          <p>Implement SQL-compatible options <tt class=
          "LITERAL">FIRST</tt>, <tt class="LITERAL">LAST</tt>,
          <tt class="LITERAL">ABSOLUTE <tt class=
          "REPLACEABLE c2">n</tt></tt>, <tt class=
          "LITERAL">RELATIVE <tt class="REPLACEABLE c2">n</tt></tt>
          for <tt class="COMMAND">FETCH</tt> and <tt class=
          "COMMAND">MOVE</tt> (Tom)</p>
        </li>

        <li>
          <p>Allow <tt class="COMMAND">EXPLAIN</tt> on <tt class=
          "COMMAND">DECLARE CURSOR</tt> (Tom)</p>
        </li>

        <li>
          <p>Allow <tt class="COMMAND">CLUSTER</tt> to use index
          marked as pre-clustered by default (Alvaro Herrera)</p>
        </li>

        <li>
          <p>Allow <tt class="COMMAND">CLUSTER</tt> to cluster all
          tables (Alvaro Herrera)</p>

          <p>This allows all previously clustered tables in a
          database to be reclustered with a single command.</p>
        </li>

        <li>
          <p>Prevent <tt class="COMMAND">CLUSTER</tt> on partial
          indexes (Tom)</p>
        </li>

        <li>
          <p>Allow DOS and Mac line-endings in <tt class=
          "COMMAND">COPY</tt> files (Bruce)</p>
        </li>

        <li>
          <p>Disallow literal carriage return as a data value,
          backslash-carriage-return and <tt class="LITERAL">\r</tt>
          are still allowed (Bruce)</p>
        </li>

        <li>
          <p><tt class="COMMAND">COPY</tt> changes (binary,
          <tt class="LITERAL">\.</tt>) (Tom)</p>
        </li>

        <li>
          <p>Recover from <tt class="COMMAND">COPY</tt> failure
          cleanly (Tom)</p>
        </li>

        <li>
          <p>Prevent possible memory leaks in <tt class=
          "COMMAND">COPY</tt> (Tom)</p>
        </li>

        <li>
          <p>Make <tt class="COMMAND">TRUNCATE</tt>
          transaction-safe (Rod)</p>

          <p><tt class="COMMAND">TRUNCATE</tt> can now be used
          inside a transaction. If the transaction aborts, the
          changes made by the <tt class="COMMAND">TRUNCATE</tt> are
          automatically rolled back.</p>
        </li>

        <li>
          <p>Allow prepare/bind of utility commands like <tt class=
          "COMMAND">FETCH</tt> and <tt class="COMMAND">EXPLAIN</tt>
          (Tom)</p>
        </li>

        <li>
          <p>Add <tt class="COMMAND">EXPLAIN EXECUTE</tt>
          (Neil)</p>
        </li>

        <li>
          <p>Improve <tt class="COMMAND">VACUUM</tt> performance on
          indexes by reducing WAL traffic (Tom)</p>
        </li>

        <li>
          <p>Functional indexes have been generalized into indexes
          on expressions (Tom)</p>

          <p>In prior releases, functional indexes only supported a
          simple function applied to one or more column names. This
          release allows any type of scalar expression.</p>
        </li>

        <li>
          <p>Have <tt class="COMMAND">SHOW TRANSACTION
          ISOLATION</tt> match input to <tt class="COMMAND">SET
          TRANSACTION ISOLATION</tt> (Tom)</p>
        </li>

        <li>
          <p>Have <tt class="COMMAND">COMMENT ON DATABASE</tt> on
          nonlocal database generate a warning, rather than an
          error (Rod)</p>

          <p>Database comments are stored in database-local tables
          so comments on a database have to be stored in each
          database.</p>
        </li>

        <li>
          <p>Improve reliability of <tt class=
          "COMMAND">LISTEN</tt>/<tt class="COMMAND">NOTIFY</tt>
          (Tom)</p>
        </li>

        <li>
          <p>Allow <tt class="COMMAND">REINDEX</tt> to reliably
          reindex nonshared system catalog indexes (Tom)</p>

          <p>This allows system tables to be reindexed without the
          requirement of a standalone session, which was necessary
          in previous releases. The only tables that now require a
          standalone session for reindexing are the global system
          tables <tt class="LITERAL">pg_database</tt>, <tt class=
          "LITERAL">pg_shadow</tt>, and <tt class=
          "LITERAL">pg_group</tt>.</p>
        </li>
      </ul>
    </div>

    <div class="SECT3">
      <h3 class="SECT3"><a name="AEN63799" id="AEN63799">E.31.3.7.
      Data Type and Function Changes</a></h3>

      <ul>
        <li>
          <p>New server parameter <tt class=
          "VARNAME">extra_float_digits</tt> to control precision
          display of floating-point numbers (Pedro Ferreira,
          Tom)</p>

          <p>This controls output precision which was causing
          regression testing problems.</p>
        </li>

        <li>
          <p>Allow <tt class="LITERAL">+1300</tt> as a numeric
          time-zone specifier, for FJST (Tom)</p>
        </li>

        <li>
          <p>Remove rarely used functions <code class=
          "FUNCTION">oidrand</code>, <code class=
          "FUNCTION">oidsrand</code>, and <code class=
          "FUNCTION">userfntest</code> functions (Neil)</p>
        </li>

        <li>
          <p>Add <code class="FUNCTION">md5()</code> function to
          main server, already in <tt class=
          "FILENAME">contrib/pgcrypto</tt> (Joe)</p>

          <p>An MD5 function was frequently requested. For more
          complex encryption capabilities, use <tt class=
          "FILENAME">contrib/pgcrypto</tt>.</p>
        </li>

        <li>
          <p>Increase date range of <tt class="TYPE">timestamp</tt>
          (John Cochran)</p>
        </li>

        <li>
          <p>Change <tt class="LITERAL">EXTRACT(EPOCH FROM
          timestamp)</tt> so <tt class="TYPE">timestamp without
          time zone</tt> is assumed to be in local time, not GMT
          (Tom)</p>
        </li>

        <li>
          <p>Trap division by zero in case the operating system
          doesn't prevent it (Tom)</p>
        </li>

        <li>
          <p>Change the <tt class="TYPE">numeric</tt> data type
          internally to base 10000 (Tom)</p>
        </li>

        <li>
          <p>New <code class="FUNCTION">hostmask()</code> function
          (Greg Wickham)</p>
        </li>

        <li>
          <p>Fixes for <code class="FUNCTION">to_char()</code> and
          <code class="FUNCTION">to_timestamp()</code> (Karel)</p>
        </li>

        <li>
          <p>Allow functions that can take any argument data type
          and return any data type, using <tt class=
          "TYPE">anyelement</tt> and <tt class="TYPE">anyarray</tt>
          (Joe)</p>

          <p>This allows the creation of functions that can work
          with any data type.</p>
        </li>

        <li>
          <p>Arrays can now be specified as <tt class=
          "LITERAL">ARRAY[1,2,3]</tt>, <tt class=
          "LITERAL">ARRAY[['a','b'],['c','d']]</tt>, or <tt class=
          "LITERAL">ARRAY[ARRAY[ARRAY[2]]]</tt> (Joe)</p>
        </li>

        <li>
          <p>Allow proper comparisons for arrays, including
          <tt class="LITERAL">ORDER BY</tt> and <tt class=
          "LITERAL">DISTINCT</tt> support (Joe)</p>
        </li>

        <li>
          <p>Allow indexes on array columns (Joe)</p>
        </li>

        <li>
          <p>Allow array concatenation with <tt class=
          "LITERAL">||</tt> (Joe)</p>
        </li>

        <li>
          <p>Allow <tt class="LITERAL">WHERE</tt> qualification
          <tt class="LITERAL"><tt class="REPLACEABLE c2">expr</tt>
          <tt class="REPLACEABLE c2">op</tt> ANY/SOME/ALL
          (<tt class="REPLACEABLE c2">array_expr</tt>)</tt>
          (Joe)</p>

          <p>This allows arrays to behave like a list of values,
          for purposes like <tt class="LITERAL">SELECT * FROM tab
          WHERE col IN (array_val)</tt>.</p>
        </li>

        <li>
          <p>New array functions <code class=
          "FUNCTION">array_append</code>, <code class=
          "FUNCTION">array_cat</code>, <code class=
          "FUNCTION">array_lower</code>, <code class=
          "FUNCTION">array_prepend</code>, <code class=
          "FUNCTION">array_to_string</code>, <code class=
          "FUNCTION">array_upper</code>, <code class=
          "FUNCTION">string_to_array</code> (Joe)</p>
        </li>

        <li>
          <p>Allow user defined aggregates to use polymorphic
          functions (Joe)</p>
        </li>

        <li>
          <p>Allow assignments to empty arrays (Joe)</p>
        </li>

        <li>
          <p>Allow 60 in seconds fields of <tt class=
          "TYPE">time</tt>, <tt class="TYPE">timestamp</tt>, and
          <tt class="TYPE">interval</tt> input values (Tom)</p>

          <p>Sixty-second values are needed for leap seconds.</p>
        </li>

        <li>
          <p>Allow <tt class="TYPE">cidr</tt> data type to be cast
          to <tt class="TYPE">text</tt> (Tom)</p>
        </li>

        <li>
          <p>Disallow invalid time zone names in SET TIMEZONE</p>
        </li>

        <li>
          <p>Trim trailing spaces when <tt class="TYPE">char</tt>
          is cast to <tt class="TYPE">varchar</tt> or <tt class=
          "TYPE">text</tt> (Tom)</p>
        </li>

        <li>
          <p>Make <tt class="TYPE">float(<tt class=
          "REPLACEABLE c2">p</tt>)</tt> measure the precision
          <tt class="REPLACEABLE c2">p</tt> in binary digits, not
          decimal digits (Tom)</p>
        </li>

        <li>
          <p>Add IPv6 support to the <tt class="TYPE">inet</tt> and
          <tt class="TYPE">cidr</tt> data types (Michael Graff)</p>
        </li>

        <li>
          <p>Add <code class="FUNCTION">family()</code> function to
          report whether address is IPv4 or IPv6 (Michael
          Graff)</p>
        </li>

        <li>
          <p>Have <tt class="LITERAL">SHOW datestyle</tt> generate
          output similar to that used by <tt class="LITERAL">SET
          datestyle</tt> (Tom)</p>
        </li>

        <li>
          <p>Make <tt class="LITERAL">EXTRACT(TIMEZONE)</tt> and
          <tt class="LITERAL">SET/SHOW TIME ZONE</tt> follow the
          SQL convention for the sign of time zone offsets, i.e.,
          positive is east from UTC (Tom)</p>
        </li>

        <li>
          <p>Fix <tt class="LITERAL">date_trunc('quarter',
          ...)</tt> (Bjthe Zoltn)</p>

          <p>Prior releases returned an incorrect value for this
          function call.</p>
        </li>

        <li>
          <p>Make <code class="FUNCTION">initcap()</code> more
          compatible with Oracle (Mike Nolan)</p>

          <p><code class="FUNCTION">initcap()</code> now uppercases
          a letter appearing after any non-alphanumeric character,
          rather than only after whitespace.</p>
        </li>

        <li>
          <p>Allow only <tt class="VARNAME">datestyle</tt> field
          order for date values not in ISO-8601 format (Greg)</p>
        </li>

        <li>
          <p>Add new <tt class="VARNAME">datestyle</tt> values
          <tt class="LITERAL">MDY</tt>, <tt class=
          "LITERAL">DMY</tt>, and <tt class="LITERAL">YMD</tt> to
          set input field order; honor <tt class="LITERAL">US</tt>
          and <tt class="LITERAL">European</tt> for backward
          compatibility (Tom)</p>
        </li>

        <li>
          <p>String literals like <tt class="LITERAL">'now'</tt> or
          <tt class="LITERAL">'today'</tt> will no longer work as a
          column default. Use functions such as <code class=
          "FUNCTION">now()</code>, <code class=
          "FUNCTION">current_timestamp</code> instead. (change
          required for prepared statements) (Tom)</p>
        </li>

        <li>
          <p>Treat NaN as larger than any other value in
          <code class="FUNCTION">min()</code>/<code class=
          "FUNCTION">max()</code> (Tom)</p>

          <p>NaN was already sorted after ordinary numeric values
          for most purposes, but <code class=
          "FUNCTION">min()</code> and <code class=
          "FUNCTION">max()</code> didn't get this right.</p>
        </li>

        <li>
          <p>Prevent interval from suppressing <tt class=
          "LITERAL">:00</tt> seconds display</p>
        </li>

        <li>
          <p>New functions <code class=
          "FUNCTION">pg_get_triggerdef(prettyprint)</code> and
          <code class="FUNCTION">pg_conversion_is_visible()</code>
          (Christopher)</p>
        </li>

        <li>
          <p>Allow time to be specified as <tt class=
          "LITERAL">040506</tt> or <tt class="LITERAL">0405</tt>
          (Tom)</p>
        </li>

        <li>
          <p>Input date order must now be <tt class=
          "LITERAL">YYYY-MM-DD</tt> (with 4-digit year) or match
          <tt class="VARNAME">datestyle</tt></p>
        </li>

        <li>
          <p>Make <code class=
          "FUNCTION">pg_get_constraintdef</code> support unique,
          primary-key, and check constraints (Christopher)</p>
        </li>
      </ul>
    </div>

    <div class="SECT3">
      <h3 class="SECT3"><a name="AEN63968" id="AEN63968">E.31.3.8.
      Server-Side Language Changes</a></h3>

      <ul>
        <li>
          <p>Prevent PL/pgSQL crash when <tt class="LITERAL">RETURN
          NEXT</tt> is used on a zero-row record variable (Tom)</p>
        </li>

        <li>
          <p>Make PL/Python's <code class=
          "FUNCTION">spi_execute</code> interface handle null
          values properly (Andrew Bosma)</p>
        </li>

        <li>
          <p>Allow PL/pgSQL to declare variables of composite types
          without <tt class="LITERAL">%ROWTYPE</tt> (Tom)</p>
        </li>

        <li>
          <p>Fix PL/Python's <code class="FUNCTION">_quote()</code>
          function to handle big integers</p>
        </li>

        <li>
          <p>Make PL/Python an untrusted language, now called
          <tt class="LITERAL">plpythonu</tt> (Kevin Jacobs,
          Tom)</p>

          <p>The Python language no longer supports a restricted
          execution environment, so the trusted version of
          PL/Python was removed. If this situation changes, a
          version of PL/Python that can be used by non-superusers
          will be readded.</p>
        </li>

        <li>
          <p>Allow polymorphic PL/pgSQL functions (Joe, Tom)</p>
        </li>

        <li>
          <p>Allow polymorphic SQL functions (Joe)</p>
        </li>

        <li>
          <p>Improved compiled function caching mechanism in
          PL/pgSQL with full support for polymorphism (Joe)</p>
        </li>

        <li>
          <p>Add new parameter <tt class="LITERAL">$0</tt> in
          PL/pgSQL representing the function's actual return type
          (Joe)</p>
        </li>

        <li>
          <p>Allow PL/Tcl and PL/Python to use the same trigger on
          multiple tables (Tom)</p>
        </li>

        <li>
          <p>Fixed PL/Tcl's <code class=
          "FUNCTION">spi_prepare</code> to accept fully qualified
          type names in the parameter type list (Jan)</p>
        </li>
      </ul>
    </div>

    <div class="SECT3">
      <h3 class="SECT3"><a name="AEN64001" id="AEN64001">E.31.3.9.
      psql Changes</a></h3>

      <ul>
        <li>
          <p>Add <tt class="LITERAL">\pset pager always</tt> to
          always use pager (Greg)</p>

          <p>This forces the pager to be used even if the number of
          rows is less than the screen height. This is valuable for
          rows that wrap across several screen rows.</p>
        </li>

        <li>
          <p>Improve tab completion (Rod, Ross Reedstrom, Ian
          Barwick)</p>
        </li>

        <li>
          <p>Reorder <tt class="LITERAL">\?</tt> help into
          groupings (Harald Armin Massa, Bruce)</p>
        </li>

        <li>
          <p>Add backslash commands for listing schemas, casts, and
          conversions (Christopher)</p>
        </li>

        <li>
          <p><tt class="COMMAND">\encoding</tt> now changes based
          on the server parameter <tt class=
          "VARNAME">client_encoding</tt> (Tom)</p>

          <p>In previous versions, <tt class=
          "COMMAND">\encoding</tt> was not aware of encoding
          changes made using <tt class="LITERAL">SET
          client_encoding</tt>.</p>
        </li>

        <li>
          <p>Save editor buffer into readline history (Ross)</p>

          <p>When <tt class="COMMAND">\e</tt> is used to edit a
          query, the result is saved in the readline history for
          retrieval using the up arrow.</p>
        </li>

        <li>
          <p>Improve <tt class="COMMAND">\d</tt> display
          (Christopher)</p>
        </li>

        <li>
          <p>Enhance HTML mode to be more standards-conforming
          (Greg)</p>
        </li>

        <li>
          <p>New <tt class="COMMAND">\set AUTOCOMMIT off</tt>
          capability (Tom)</p>

          <p>This takes the place of the removed server parameter
          <tt class="VARNAME">autocommit</tt>.</p>
        </li>

        <li>
          <p>New <tt class="COMMAND">\set VERBOSITY</tt> to control
          error detail (Tom)</p>

          <p>This controls the new error reporting details.</p>
        </li>

        <li>
          <p>New prompt escape sequence <tt class="LITERAL">%x</tt>
          to show transaction status (Tom)</p>
        </li>

        <li>
          <p>Long options for <span class="APPLICATION">psql</span>
          are now available on all platforms</p>
        </li>
      </ul>
    </div>

    <div class="SECT3">
      <h3 class="SECT3"><a name="AEN64046" id="AEN64046">E.31.3.10.
      pg_dump Changes</a></h3>

      <ul>
        <li>
          <p>Multiple pg_dump fixes, including tar format and large
          objects</p>
        </li>

        <li>
          <p>Allow pg_dump to dump specific schemas (Neil)</p>
        </li>

        <li>
          <p>Make pg_dump preserve column storage characteristics
          (Christopher)</p>

          <p>This preserves <tt class="LITERAL">ALTER TABLE ... SET
          STORAGE</tt> information.</p>
        </li>

        <li>
          <p>Make pg_dump preserve <tt class="COMMAND">CLUSTER</tt>
          characteristics (Christopher)</p>
        </li>

        <li>
          <p>Have pg_dumpall use <tt class=
          "COMMAND">GRANT</tt>/<tt class="COMMAND">REVOKE</tt> to
          dump database-level privileges (Tom)</p>
        </li>

        <li>
          <p>Allow pg_dumpall to support the options <tt class=
          "OPTION">-a</tt>, <tt class="OPTION">-s</tt>, <tt class=
          "OPTION">-x</tt> of pg_dump (Tom)</p>
        </li>

        <li>
          <p>Prevent pg_dump from lowercasing identifiers specified
          on the command line (Tom)</p>
        </li>

        <li>
          <p>pg_dump options <tt class=
          "OPTION">--use-set-session-authorization</tt> and
          <tt class="OPTION">--no-reconnect</tt> now do nothing,
          all dumps use <tt class="COMMAND">SET SESSION
          AUTHORIZATION</tt></p>

          <p>pg_dump no longer reconnects to switch users, but
          instead always uses <tt class="COMMAND">SET SESSION
          AUTHORIZATION</tt>. This will reduce password prompting
          during restores.</p>
        </li>

        <li>
          <p>Long options for <span class=
          "APPLICATION">pg_dump</span> are now available on all
          platforms</p>

          <p><span class="PRODUCTNAME">PostgreSQL</span> now
          includes its own long-option processing routines.</p>
        </li>
      </ul>
    </div>

    <div class="SECT3">
      <h3 class="SECT3"><a name="AEN64083" id="AEN64083">E.31.3.11.
      libpq Changes</a></h3>

      <ul>
        <li>
          <p>Add function <code class="FUNCTION">PQfreemem</code>
          for freeing memory on Windows, suggested for <tt class=
          "COMMAND">NOTIFY</tt> (Bruce)</p>

          <p>Windows requires that memory allocated in a library be
          freed by a function in the same library, hence
          <code class="FUNCTION">free()</code> doesn't work for
          freeing memory allocated by libpq. <code class=
          "FUNCTION">PQfreemem</code> is the proper way to free
          libpq memory, especially on Windows, and is recommended
          for other platforms as well.</p>
        </li>

        <li>
          <p>Document service capability, and add sample file
          (Bruce)</p>

          <p>This allows clients to look up connection information
          in a central file on the client machine.</p>
        </li>

        <li>
          <p>Make <code class="FUNCTION">PQsetdbLogin</code> have
          the same defaults as <code class=
          "FUNCTION">PQconnectdb</code> (Tom)</p>
        </li>

        <li>
          <p>Allow libpq to cleanly fail when result sets are too
          large (Tom)</p>
        </li>

        <li>
          <p>Improve performance of function <code class=
          "FUNCTION">PQunescapeBytea</code> (Ben Lamb)</p>
        </li>

        <li>
          <p>Allow thread-safe libpq with <tt class=
          "FILENAME">configure</tt> option <tt class=
          "OPTION">--enable-thread-safety</tt> (Lee Kindness,
          Philip Yarra)</p>
        </li>

        <li>
          <p>Allow function <code class=
          "FUNCTION">pqInternalNotice</code> to accept a format
          string and arguments instead of just a preformatted
          message (Tom, Sean Chittenden)</p>
        </li>

        <li>
          <p>Control SSL negotiation with <tt class=
          "LITERAL">sslmode</tt> values <tt class=
          "LITERAL">disable</tt>, <tt class="LITERAL">allow</tt>,
          <tt class="LITERAL">prefer</tt>, and <tt class=
          "LITERAL">require</tt> (Jon Jensen)</p>
        </li>

        <li>
          <p>Allow new error codes and levels of text (Tom)</p>
        </li>

        <li>
          <p>Allow access to the underlying table and column of a
          query result (Tom)</p>

          <p>This is helpful for query-builder applications that
          want to know the underlying table and column names
          associated with a specific result set.</p>
        </li>

        <li>
          <p>Allow access to the current transaction status
          (Tom)</p>
        </li>

        <li>
          <p>Add ability to pass binary data directly to the server
          (Tom)</p>
        </li>

        <li>
          <p>Add function <code class=
          "FUNCTION">PQexecPrepared</code> and <code class=
          "FUNCTION">PQsendQueryPrepared</code> functions which
          perform bind/execute of previously prepared statements
          (Tom)</p>
        </li>
      </ul>
    </div>

    <div class="SECT3">
      <h3 class="SECT3"><a name="AEN64132" id="AEN64132">E.31.3.12.
      JDBC Changes</a></h3>

      <ul>
        <li>
          <p>Allow <code class="FUNCTION">setNull</code> on
          updateable result sets</p>
        </li>

        <li>
          <p>Allow <code class="FUNCTION">executeBatch</code> on a
          prepared statement (Barry)</p>
        </li>

        <li>
          <p>Support SSL connections (Barry)</p>
        </li>

        <li>
          <p>Handle schema names in result sets (Paul Sorenson)</p>
        </li>

        <li>
          <p>Add refcursor support (Nic Ferrier)</p>
        </li>
      </ul>
    </div>

    <div class="SECT3">
      <h3 class="SECT3"><a name="AEN64147" id="AEN64147">E.31.3.13.
      Miscellaneous Interface Changes</a></h3>

      <ul>
        <li>
          <p>Prevent possible memory leak or core dump during
          libpgtcl shutdown (Tom)</p>
        </li>

        <li>
          <p>Add Informix compatibility to ECPG (Michael)</p>

          <p>This allows ECPG to process embedded C programs that
          were written using certain Informix extensions.</p>
        </li>

        <li>
          <p>Add type <tt class="TYPE">decimal</tt> to ECPG that is
          fixed length, for Informix (Michael)</p>
        </li>

        <li>
          <p>Allow thread-safe embedded SQL programs with
          <tt class="FILENAME">configure</tt> option <tt class=
          "OPTION">--enable-thread-safety</tt> (Lee Kindness,
          Bruce)</p>

          <p>This allows multiple threads to access the database at
          the same time.</p>
        </li>

        <li>
          <p>Moved Python client PyGreSQL to <a href=
          "http://www.pygresql.org" target=
          "_top">http://www.pygresql.org</a> (Marc)</p>
        </li>
      </ul>
    </div>

    <div class="SECT3">
      <h3 class="SECT3"><a name="AEN64166" id="AEN64166">E.31.3.14.
      Source Code Changes</a></h3>

      <ul>
        <li>
          <p>Prevent need for separate platform geometry regression
          result files (Tom)</p>
        </li>

        <li>
          <p>Improved PPC locking primitive (Reinhard Max)</p>
        </li>

        <li>
          <p>New function <code class="FUNCTION">palloc0</code> to
          allocate and clear memory (Bruce)</p>
        </li>

        <li>
          <p>Fix locking code for s390x CPU (64-bit) (Tom)</p>
        </li>

        <li>
          <p>Allow OpenBSD to use local ident credentials (William
          Ahern)</p>
        </li>

        <li>
          <p>Make query plan trees read-only to executor (Tom)</p>
        </li>

        <li>
          <p>Add Darwin startup scripts (David Wheeler)</p>
        </li>

        <li>
          <p>Allow libpq to compile with Borland C++ compiler
          (Lester Godwin, Karl Waclawek)</p>
        </li>

        <li>
          <p>Use our own version of <code class=
          "FUNCTION">getopt_long()</code> if needed (Peter)</p>
        </li>

        <li>
          <p>Convert administration scripts to C (Peter)</p>
        </li>

        <li>
          <p>Bison &gt;= 1.85 is now required to build the
          <span class="PRODUCTNAME">PostgreSQL</span> grammar, if
          building from CVS</p>
        </li>

        <li>
          <p>Merge documentation into one book (Peter)</p>
        </li>

        <li>
          <p>Add Windows compatibility functions (Bruce)</p>
        </li>

        <li>
          <p>Allow client interfaces to compile under MinGW
          (Bruce)</p>
        </li>

        <li>
          <p>New <code class="FUNCTION">ereport()</code> function
          for error reporting (Tom)</p>
        </li>

        <li>
          <p>Support Intel compiler on Linux (Peter)</p>
        </li>

        <li>
          <p>Improve Linux startup scripts (Slawomir Sudnik, Darko
          Prenosil)</p>
        </li>

        <li>
          <p>Add support for AMD Opteron and Itanium (Jeffrey W.
          Baker, Bruce)</p>
        </li>

        <li>
          <p>Remove <tt class="OPTION">--enable-recode</tt> option
          from <tt class="COMMAND">configure</tt></p>

          <p>This was no longer needed now that we have <tt class=
          "COMMAND">CREATE CONVERSION</tt>.</p>
        </li>

        <li>
          <p>Generate a compile error if spinlock code is not found
          (Bruce)</p>

          <p>Platforms without spinlock code will now fail to
          compile, rather than silently using semaphores. This
          failure can be disabled with a new <tt class=
          "COMMAND">configure</tt> option.</p>
        </li>
      </ul>
    </div>

    <div class="SECT3">
      <h3 class="SECT3"><a name="AEN64219" id="AEN64219">E.31.3.15.
      Contrib Changes</a></h3>

      <ul>
        <li>
          <p>Change dbmirror license to BSD</p>
        </li>

        <li>
          <p>Improve earthdistance (Bruno Wolff III)</p>
        </li>

        <li>
          <p>Portability improvements to pgcrypto (Marko Kreen)</p>
        </li>

        <li>
          <p>Prevent crash in xml (John Gray, Michael Richards)</p>
        </li>

        <li>
          <p>Update oracle</p>
        </li>

        <li>
          <p>Update mysql</p>
        </li>

        <li>
          <p>Update cube (Bruno Wolff III)</p>
        </li>

        <li>
          <p>Update earthdistance to use cube (Bruno Wolff III)</p>
        </li>

        <li>
          <p>Update btree_gist (Oleg)</p>
        </li>

        <li>
          <p>New tsearch2 full-text search module (Oleg,
          Teodor)</p>
        </li>

        <li>
          <p>Add hash-based crosstab function to tablefuncs
          (Joe)</p>
        </li>

        <li>
          <p>Add serial column to order <code class=
          "FUNCTION">connectby()</code> siblings in tablefuncs
          (Nabil Sayegh,Joe)</p>
        </li>

        <li>
          <p>Add named persistent connections to dblink (Shridhar
          Daithanka)</p>
        </li>

        <li>
          <p>New pg_autovacuum allows automatic <tt class=
          "COMMAND">VACUUM</tt> (Matthew T. O'Connor)</p>
        </li>

        <li>
          <p>Make pgbench honor environment variables <tt class=
          "ENVAR">PGHOST</tt>, <tt class="ENVAR">PGPORT</tt>,
          <tt class="ENVAR">PGUSER</tt> (Tatsuo)</p>
        </li>

        <li>
          <p>Improve intarray (Teodor Sigaev)</p>
        </li>

        <li>
          <p>Improve pgstattuple (Rod)</p>
        </li>

        <li>
          <p>Fix bug in <code class="FUNCTION">metaphone()</code>
          in fuzzystrmatch</p>
        </li>

        <li>
          <p>Improve adddepend (Rod)</p>
        </li>

        <li>
          <p>Update spi/timetravel (Bjthe Zoltn)</p>
        </li>

        <li>
          <p>Fix dbase <tt class="OPTION">-s</tt> option and
          improve non-ASCII handling (Thomas Behr, Mrcio
          Smiderle)</p>
        </li>

        <li>
          <p>Remove array module because features now included by
          default (Joe)</p>
        </li>
      </ul>
    </div>
  </div>
</div>

<div class="NAVFOOTER">
  <hr class="c1" width="100%" />

  <table summary="Footer navigation table" width="100%" border="0"
  cellpadding="0" cellspacing="0">
    <tr>
      <td width="33%" align="left" valign="top"><a href=
      "release-7-4-1.html" accesskey="P">Prev</a></td>

      <td width="34%" align="center" valign="top"><a href=
      "index.html" accesskey="H">Home</a></td>

      <td width="33%" align="right" valign="top"><a href=
      "release-7-3-21.html" accesskey="N">Next</a></td>
    </tr>

    <tr>
      <td width="33%" align="left" valign="top">Release 7.4.1</td>

      <td width="34%" align="center" valign="top"><a href=
      "release.html" accesskey="U">Up</a></td>

      <td width="33%" align="right" valign="top">Release
      7.3.21</td>
    </tr>
  </table>
</div>

      </div>
      <div class="row">
        <div class="col-md-3">
	  
        </div>
        <div class="col-md-6 text-center">
          <p>
            <a href="/docs/release/">
              Return to the Release Notes Archive
            </a>
          </p>
        </div>
        <div class="col-md-3 text-right">
	   
            <a href="/docs/release/7.4.1/">
              Next
            </a>
          
        </div>
      </div>
    </div>
    <div class="col-md-2 version-list">
      <section>
        <h2>Versions</h2>
      </section>
      <ul>
        
          <li>
            
              <a href="/docs/release/7.4.30/">
                7.4.30
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.29/">
                7.4.29
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.28/">
                7.4.28
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.27/">
                7.4.27
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.26/">
                7.4.26
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.25/">
                7.4.25
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.24/">
                7.4.24
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.23/">
                7.4.23
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.22/">
                7.4.22
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.21/">
                7.4.21
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.20/">
                7.4.20
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.19/">
                7.4.19
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.18/">
                7.4.18
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.17/">
                7.4.17
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.16/">
                7.4.16
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.15/">
                7.4.15
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.14/">
                7.4.14
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.13/">
                7.4.13
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.12/">
                7.4.12
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.11/">
                7.4.11
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.10/">
                7.4.10
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.9/">
                7.4.9
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.8/">
                7.4.8
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.7/">
                7.4.7
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.6/">
                7.4.6
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.5/">
                7.4.5
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.4/">
                7.4.4
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.3/">
                7.4.3
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.2/">
                7.4.2
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/7.4.1/">
                7.4.1
              </a>
            
          </li>
        
          <li>
            
              <strong>
                7.4.0
              </strong>
            
          </li>
        
      </ul>
    </div>
</div>


      </div> <!-- pgContentWrap -->
    </div>
  </div>
</div>

    <!-- Footer -->
    <footer id="footer">
      <!-- Copyright -->
      <div class="container">
        <a href="/about/policies/">Policies</a> |
        <a href="/about/policies/coc/">Code of Conduct</a> |
        <a href="/about/">About PostgreSQL</a> |
        <a href="/about/contact/">Contact</a><br/>
        <p>Copyright &copy; 1996-2025 The PostgreSQL Global Development Group</p>
      </div>
    </footer>
    <script src="/media/js/main.js?59ea4c82"></script>

  </body>
</html>
