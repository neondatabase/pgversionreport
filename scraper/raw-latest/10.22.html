<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Release Notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <link href="/media/css/fontawesome.css?59ea4c82" rel="stylesheet">
  <link rel="stylesheet" href="/media/css/bootstrap-4.4.1.min.css">
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" type="text/css" href="/dyncss/base.css?59ea4c82">

  <script src="/media/js/theme.js?59ea4c82"></script>

  

  <base href="/docs/10/" />


  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          <!-- Header -->
          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand p-0" href="/">
              <img class="logo" src="/media/img/about/press/elephant.png" alt="PostgreSQL Elephant Logo">
            </a>
            <input type="checkbox" id="navbar-toggler" aria-controls="pgNavbar" aria-expanded="false" aria-label="Toggle navigation">
            <label for="navbar-toggler" id="navbar-toggler-label" class="navbar-toggler" tabindex="0"><span class="navbar-toggler-icon"></span></label>
            <div class="navbar-collapse" id="pgNavbar">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item p-2"><a href="/" title="Home">Home</a></li>
                <li class="nav-item p-2"><a href="/about/" title="About">About</a></li>
                <li class="nav-item p-2"><a href="/download/" title="Download">Download</a></li>
                <li class="nav-item p-2"><a href="/docs/" title="Documentation">Documentation</a></li>
                <li class="nav-item p-2"><a href="/community/" title="Community">Community</a></li>
                <li class="nav-item p-2"><a href="/developer/" title="Developers">Developers</a></li>
                <li class="nav-item p-2"><a href="/support/" title="Support">Support</a></li>
                <li class="nav-item p-2"><a href="/about/donate/" title="Donate">Donate</a></li>
                <li class="nav-item p-2"><a href="/account/" title="Your account">Your account</a></li>
              </ul>
              <form role="search" method="get" action="/search/">
                <div class="input-group">
                  <input id="q" name="q" type="text" size="20" maxlength="255" accesskey="s"  class="form-control" placeholder="Search for...">
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div><!-- /input-group -->
              </form>
              <form id="form-theme" class="form-inline d-none">
                <button id="btn-theme" class="btn btn-default ml-1" type="button"></button>
              </form>
            </div>
          </nav>
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">November 13, 2025: <a href="/about/news/postgresql-181-177-1611-1515-1420-and-1323-released-3171/">
  PostgreSQL 18.1, 17.7, 16.11, 15.15, 14.20, and 13.23 Released!
</a>
</div>
      </div>
    </div>
    
<div class="container-fluid margin">
  <div class="row">
    <div class="col-lg-2">
      <div id="pgSideWrap">
       
       <div id="pgSideNav">
         <h2>Quick Links</h2>

         <ul>
           
           
           <li><a href="/docs/">Documentation</a>
            
            
           
           </li>
           <li><a href="/docs/">Manuals</a>
            
             <ul>
             
              <li class="last-child"><a href="/docs/manuals/archive/">Archive</a></li>
             
             </ul>
            
            
           
           </li>
           <li><a href="/docs/release/">Release Notes</a>
            
            
           
           </li>
           <li><a href="/docs/books/">Books</a>
            
            
           
           </li>
           <li><a href="/docs/online-resources/">Tutorials &amp; Other Resources</a>
            
            
           
           </li>
           <li><a href="/docs/faq/">FAQ</a>
            
            
           
           </li>
           <li class="last-child"><a href="https://wiki.postgresql.org">Wiki</a>
            
            
           </li>
            
           
        </ul>

       </div>
       
      </div> <!-- pgSideWrap -->
    </div>
    <div class="col-lg-10">
      <div id="pgContentWrap">
        


<div id="release-notes" class="row">
    <div class="col-md-10">
      <section>
        <h1>Release Notes <i class="far fa-file-alt"></i></h1>
        <h2>
          PostgreSQL
          10.22
        </h2>
      </section>
      <div id="docContent">
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
<table width="100%" summary="Navigation header">
<tr>
<th colspan="5" align="center">E.2.&nbsp;Release 10.22</th>
</tr>
<tr>
<td width="10%" align="left"><a accesskey="p" href="release-10-23.html" title="E.1.&nbsp;Release 10.23">Prev</a>&nbsp;</td>
<td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix&nbsp;E.&nbsp;Release Notes">Up</a></td>
<th width="60%" align="center">Appendix&nbsp;E.&nbsp;Release Notes</th>
<td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.23 Documentation">Home</a></td>
<td width="10%" align="right">&nbsp;<a accesskey="n" href="release-10-21.html" title="E.3.&nbsp;Release 10.21">Next</a></td>
</tr>
</table>
<hr /></div>
<div class="sect1" id="RELEASE-10-22">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">E.2.&nbsp;Release 10.22</h2>
</div>
</div>
</div>
<div class="toc">
<dl class="toc">
<dt><span class="sect2"><a href="release-10-22.html#id-1.11.6.6.5">E.2.1. Migration to Version 10.22</a></span></dt>
<dt><span class="sect2"><a href="release-10-22.html#id-1.11.6.6.6">E.2.2. Changes</a></span></dt>
</dl>
</div>
<p><strong>Release date:&nbsp;</strong>2022-08-11</p>
<p>This release contains a variety of fixes from 10.21. For information about new features in major release 10, see <a class="xref" href="release-10.html" title="E.24.&nbsp;Release 10">Section&nbsp;E.24</a>.</p>
<p>The <span class="productname">PostgreSQL</span> community will stop releasing updates for the 10.X release series in November 2022. Users are encouraged to update to a newer release branch soon.</p>
<div class="sect2" id="id-1.11.6.6.5">
<div class="titlepage">
<div>
<div>
<h3 class="title">E.2.1.&nbsp;Migration to Version 10.22</h3>
</div>
</div>
</div>
<p>A dump/restore is not required for those running 10.X.</p>
<p>However, if you are upgrading from a version earlier than 10.19, see <a class="xref" href="release-10-19.html" title="E.5.&nbsp;Release 10.19">Section&nbsp;E.5</a>.</p>
</div>
<div class="sect2" id="id-1.11.6.6.6">
<div class="titlepage">
<div>
<div>
<h3 class="title">E.2.2.&nbsp;Changes</h3>
</div>
</div>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>Do not let extension scripts replace objects not already belonging to the extension (Tom Lane)</p>
<p>This change prevents extension scripts from doing <code class="command">CREATE OR REPLACE</code> if there is an existing object that does not belong to the extension. It also prevents <code class="command">CREATE IF NOT EXISTS</code> in the same situation. This prevents a form of trojan-horse attack in which a hostile database user could become the owner of an extension object and then modify it to compromise future uses of the object by other users. As a side benefit, it also reduces the risk of accidentally replacing objects one did not mean to.</p>
<p>The <span class="productname">PostgreSQL</span> Project thanks Sven Klemm for reporting this problem. (CVE-2022-2625)</p>
</li>
<li class="listitem">
<p>Fix replay of <code class="command">CREATE DATABASE</code> WAL records on standby servers (Kyotaro Horiguchi, Asim R Praveen, Paul Guo)</p>
<p>Standby servers may encounter missing tablespace directories when replaying database-creation WAL records. Prior to this patch, a standby would fail to recover in such a case; however, such directories could be legitimately missing. Create the tablespace (as a plain directory), then check that it has been dropped again once replay reaches a consistent state.</p>
</li>
<li class="listitem">
<p>Support <span class="quote">“<span class="quote">in place</span>”</span> tablespaces (Thomas Munro, Michael Paquier, Álvaro Herrera)</p>
<p>Normally a Postgres tablespace is a symbolic link to a directory on some other filesystem. This change allows it to just be a plain directory. While this has no use for separating tables onto different filesystems, it is a convenient setup for testing. Moreover, it is necessary to support the <code class="command">CREATE DATABASE</code> replay fix, which transiently creates a missing tablespace as an <span class="quote">“<span class="quote">in place</span>”</span> tablespace.</p>
</li>
<li class="listitem">
<p>Fix permissions checks in <code class="command">CREATE INDEX</code> (Nathan Bossart, Noah Misch)</p>
<p>The fix for CVE-2022-1552 caused <code class="command">CREATE INDEX</code> to apply the table owner's permissions while performing lookups of operator classes and other objects, where formerly the calling user's permissions were used. This broke dump/restore scenarios, because <span class="application">pg_dump</span> issues <code class="command">CREATE INDEX</code> before re-granting permissions.</p>
</li>
<li class="listitem">
<p>In extended query protocol, force an immediate commit after <code class="command">CREATE DATABASE</code> and other commands that can't run in a transaction block (Tom Lane)</p>
<p>If the client does not send a Sync message immediately after such a command, but instead sends another command, any failure in that command would lead to rolling back the preceding command, typically leaving inconsistent state on-disk (such as a missing or extra database directory). The mechanisms intended to prevent that situation turn out to work for multiple commands in a simple-Query message, but not for a series of extended-protocol messages. To prevent inconsistency without breaking use-cases that work today, force an implicit commit after such commands.</p>
</li>
<li class="listitem">
<p>Fix race condition when checking transaction visibility (Simon Riggs)</p>
<p><code class="function">TransactionIdIsInProgress</code> could report <code class="literal">false</code> before the subject transaction is considered visible, leading to various misbehaviors. The race condition window is normally very narrow, but use of synchronous replication makes it much wider, because the wait for a synchronous replica happens in that window.</p>
</li>
<li class="listitem">
<p>Fix <span class="quote">“<span class="quote">variable not found in subplan target list</span>”</span> planner error when pulling up a sub-<code class="literal">SELECT</code> that's referenced in a <code class="literal">GROUPING</code> function (Richard Guo)</p>
</li>
<li class="listitem">
<p>Prevent <code class="function">pg_stat_get_subscription()</code> from possibly returning an extra row containing garbage values (Kuntal Ghosh)</p>
</li>
<li class="listitem">
<p>Ensure that <code class="function">pg_stop_backup()</code> cleans up session state properly (Fujii Masao)</p>
<p>This omission could lead to assertion failures or crashes later in the session.</p>
</li>
<li class="listitem">
<p>Fix join alias matching in <code class="literal">FOR [KEY] UPDATE/SHARE</code> clauses (Dean Rasheed)</p>
<p>In corner cases, a misleading error could be reported.</p>
</li>
<li class="listitem">
<p>Avoid crashing if too many column aliases are attached to an <code class="literal">XMLTABLE</code> or <code class="literal">JSON_TABLE</code> construct (Álvaro Herrera)</p>
</li>
<li class="listitem">
<p>Reject <code class="literal">ROW()</code> expressions and functions in <code class="literal">FROM</code> that have too many columns (Tom Lane)</p>
<p>Cases with more than about 1600 columns are unsupported, and have always failed at execution. However, it emerges that some earlier code could be driven to assertion failures or crashes by queries with more than 32K columns. Add a parse-time check to prevent that.</p>
</li>
<li class="listitem">
<p>When decompiling a view or rule, show a <code class="command">SELECT</code> output column's <code class="literal">AS "?column?"</code> alias clause if it could be referenced elsewhere (Tom Lane)</p>
<p>Previously, this auto-generated alias was always hidden; but there are corner cases where doing so results in a non-restorable view or rule definition.</p>
</li>
<li class="listitem">
<p>Fix dumping of a view using a function in <code class="literal">FROM</code> that returns a composite type, when column(s) of the composite type have been dropped since the view was made (Tom Lane)</p>
<p>This oversight could lead to dump/reload or <span class="application">pg_upgrade</span> failures, as the dumped view would have too many column aliases for the function.</p>
</li>
<li class="listitem">
<p>Report implicitly-created operator families to event triggers (Masahiko Sawada)</p>
<p>If <code class="command">CREATE OPERATOR CLASS</code> results in the implicit creation of an operator family, that object was not reported to event triggers that should capture such events.</p>
</li>
<li class="listitem">
<p>Fix control file updates made when a restartpoint is running during promotion of a standby server (Kyotaro Horiguchi)</p>
<p>Previously, when the restartpoint completed it could incorrectly update the last-checkpoint fields of the control file, potentially leading to PANIC and failure to restart if the server crashes before the next normal checkpoint completes.</p>
</li>
<li class="listitem">
<p>Prevent triggering of standby's <code class="varname">wal_receiver_timeout</code> during logical replication of large transactions (Wang Wei, Amit Kapila)</p>
<p>If a large transaction on the primary server sends no data to the standby (perhaps because no table it changes is published), it was possible for the standby to timeout. Fix that by ensuring we send keepalive messages periodically in such situations.</p>
</li>
<li class="listitem">
<p>Disallow nested backup operations in logical replication walsenders (Fujii Masao)</p>
</li>
<li class="listitem">
<p>Fix memory leak in logical replication subscribers (Hou Zhijie)</p>
</li>
<li class="listitem">
<p>Ignore heap-rewrite temporary tables for materialized views in logical replication (Euler Taveira)</p>
<p>A <code class="literal">FOR ALL TABLES</code> publication will try to publish temporary tables if left to its own devices. There is a heuristic to suppress these, but it failed to cover internal temporary tables created while rewriting a materialized view. This created a risk of <span class="quote">“<span class="quote">logical replication target relation ... does not exist</span>”</span> failures during <code class="command">REFRESH MATERIALIZED VIEW</code>.</p>
</li>
<li class="listitem">
<p>Prevent open-file leak when reading an invalid timezone abbreviation file (Kyotaro Horiguchi)</p>
<p>Such cases could result in harmless warning messages.</p>
</li>
<li class="listitem">
<p>Allow custom server parameters to have short descriptions that are NULL (Steve Chavez)</p>
<p>Previously, although extensions could choose to create such settings, some code paths would crash while processing them.</p>
</li>
<li class="listitem">
<p>Fix WAL consistency checking logic to correctly handle <code class="literal">BRIN_EVACUATE_PAGE</code> flags (Haiyang Wang)</p>
</li>
<li class="listitem">
<p>Remove misguided SSL key file ownership check in <span class="application">libpq</span> (Tom Lane)</p>
<p>In the previous minor releases, we copied the server's permission checking rules for SSL private key files into libpq. But we should not have also copied the server's file-ownership check. While that works in normal use-cases, it can result in an unexpected failure for clients running as root, and perhaps in other cases.</p>
</li>
<li class="listitem">
<p>Ensure <span class="application">ecpg</span> reports server connection loss sanely (Tom Lane)</p>
<p>Misprocessing of a libpq-generated error result, such as a report of lost connection, would lead to printing <span class="quote">“<span class="quote">(null)</span>”</span> instead of a useful error message; or in older releases it would lead to a crash.</p>
</li>
<li class="listitem">
<p>Avoid core dump in <span class="application">ecpglib</span> with unexpected orders of operations (Tom Lane)</p>
<p>Certain operations such as <code class="command">EXEC SQL PREPARE</code> would crash (rather than reporting an error as expected) if called before establishing any database connection.</p>
</li>
<li class="listitem">
<p>In <span class="application">ecpglib</span>, avoid redundant <code class="function">newlocale()</code> calls (Noah Misch)</p>
<p>Allocate a C locale object once per process when first connecting, rather than creating and freeing locale objects once per query. This mitigates a libc memory leak on AIX, and may offer some performance benefit everywhere.</p>
</li>
<li class="listitem">
<p>In <span class="application">psql</span>'s <code class="command">\watch</code> command, echo a newline after cancellation with control-C (Pavel Stehule)</p>
<p>This prevents libedit (and possibly also libreadline) from becoming confused about which column the cursor is in.</p>
</li>
<li class="listitem">
<p>Fix <code class="filename">contrib/pg_stat_statements</code> to avoid problems with very large query-text files on 32-bit platforms (Tom Lane)</p>
</li>
<li class="listitem">
<p>Ensure that <code class="filename">contrib/postgres_fdw</code> sends constants of <code class="type">regconfig</code> and other <code class="type">reg*</code> types with proper schema qualification (Tom Lane)</p>
</li>
<li class="listitem">
<p>Block signals while allocating dynamic shared memory on Linux (Thomas Munro)</p>
<p>This avoids problems when a signal interrupts <code class="function">posix_fallocate()</code>.</p>
</li>
<li class="listitem">
<p>Detect unexpected <code class="literal">EEXIST</code> error from <code class="function">shm_open()</code> (Thomas Munro)</p>
<p>This avoids a possible crash on Solaris.</p>
</li>
<li class="listitem">
<p>Adjust PL/Perl test case so it will work under Perl 5.36 (Dagfinn Ilmari MannsÃ¥ker)</p>
</li>
<li class="listitem">
<p>Avoid incorrectly using an out-of-date <span class="application">libldap_r</span> library when multiple <span class="productname">OpenLDAP</span> installations are present while building <span class="productname">PostgreSQL</span> (Tom Lane)</p>
</li>
</ul>
</div>
</div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
<hr />
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left"><a accesskey="p" href="release-10-23.html" title="E.1.&nbsp;Release 10.23">Prev</a>&nbsp;</td>
<td width="20%" align="center"><a accesskey="u" href="release.html" title="Appendix&nbsp;E.&nbsp;Release Notes">Up</a></td>
<td width="40%" align="right">&nbsp;<a accesskey="n" href="release-10-21.html" title="E.3.&nbsp;Release 10.21">Next</a></td>
</tr>
<tr>
<td width="40%" align="left" valign="top">E.1.&nbsp;Release 10.23&nbsp;</td>
<td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 10.23 Documentation">Home</a></td>
<td width="40%" align="right" valign="top">&nbsp;E.3.&nbsp;Release 10.21</td>
</tr>
</table>
</div>


      </div>
      <div class="row">
        <div class="col-md-3">
	  
            <a href="/docs/release/10.21/">
              Previous
            </a>
          
        </div>
        <div class="col-md-6 text-center">
          <p>
            <a href="/docs/release/">
              Return to the Release Notes Archive
            </a>
          </p>
        </div>
        <div class="col-md-3 text-right">
	   
            <a href="/docs/release/10.23/">
              Next
            </a>
          
        </div>
      </div>
    </div>
    <div class="col-md-2 version-list">
      <section>
        <h2>Versions</h2>
      </section>
      <ul>
        
          <li>
            
              <a href="/docs/release/10.23/">
                10.23
              </a>
            
          </li>
        
          <li>
            
              <strong>
                10.22
              </strong>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.21/">
                10.21
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.20/">
                10.20
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.19/">
                10.19
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.18/">
                10.18
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.17/">
                10.17
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.16/">
                10.16
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.15/">
                10.15
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.14/">
                10.14
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.13/">
                10.13
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.12/">
                10.12
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.11/">
                10.11
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.10/">
                10.10
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.9/">
                10.9
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.8/">
                10.8
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.7/">
                10.7
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.6/">
                10.6
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.5/">
                10.5
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.4/">
                10.4
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.3/">
                10.3
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.2/">
                10.2
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.1/">
                10.1
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/10.0/">
                10.0
              </a>
            
          </li>
        
      </ul>
    </div>
</div>


      </div> <!-- pgContentWrap -->
    </div>
  </div>
</div>

    <!-- Footer -->
    <footer id="footer">
      <!-- Copyright -->
      <div class="container">
        <a href="/about/policies/">Policies</a> |
        <a href="/about/policies/coc/">Code of Conduct</a> |
        <a href="/about/">About PostgreSQL</a> |
        <a href="/about/contact/">Contact</a><br/>
        <p>Copyright &copy; 1996-2025 The PostgreSQL Global Development Group</p>
      </div>
    </footer>
    <script src="/media/js/main.js?59ea4c82"></script>

  </body>
</html>
