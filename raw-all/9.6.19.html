<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Release Notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <link href="/media/css/fontawesome.css?606fd482" rel="stylesheet">
  <link rel="stylesheet" href="/media/css/bootstrap-4.4.1.min.css">
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" type="text/css" href="/dyncss/base.css?606fd482">

  <script src="/media/js/theme.js?606fd482"></script>

  

  <base href="/docs/9.6/" />


  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          <!-- Header -->
          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand p-0" href="/">
              <img class="logo" src="/media/img/about/press/elephant.png" alt="PostgreSQL Elephant Logo">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#pgNavbar" aria-controls="pgNavbar" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="pgNavbar">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item p-2"><a href="/" title="Home">Home</a></li>
                <li class="nav-item p-2"><a href="/about/" title="About">About</a></li>
                <li class="nav-item p-2"><a href="/download/" title="Download">Download</a></li>
                <li class="nav-item p-2"><a href="/docs/" title="Documentation">Documentation</a></li>
                <li class="nav-item p-2"><a href="/community/" title="Community">Community</a></li>
                <li class="nav-item p-2"><a href="/developer/" title="Developers">Developers</a></li>
                <li class="nav-item p-2"><a href="/support/" title="Support">Support</a></li>
                <li class="nav-item p-2"><a href="/about/donate/" title="Donate">Donate</a></li>
                <li class="nav-item p-2"><a href="/account/" title="Your account">Your account</a></li>
              </ul>
              <form role="search" method="get" action="/search/">
                <div class="input-group">
                  <input id="q" name="q" type="text" size="20" maxlength="255" accesskey="s"  class="form-control" placeholder="Search for...">
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div><!-- /input-group -->
              </form>
              <form id="form-theme" class="form-inline d-none">
                <button id="btn-theme" class="btn btn-default ml-1" type="button"></button>
              </form>
            </div>
          </nav>
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">September 26, 2024: <a href="/about/news/postgresql-17-released-2936/">
  PostgreSQL 17 Released!
</a>

</div>
      </div>
    </div>
    
<div class="container-fluid margin">
  <div class="row">
    <div class="col-lg-2">
      <div id="pgSideWrap">
       
       <div id="pgSideNav">
         <h2>Quick Links</h2>

         <ul>
           
           
           <li><a href="/docs/">Documentation</a>
            
            
           
           </li>
           <li><a href="/docs/">Manuals</a>
            
             <ul>
             
              <li class="last-child"><a href="/docs/manuals/archive/">Archive</a></li>
             
             </ul>
            
            
           
           </li>
           <li><a href="/docs/release/">Release Notes</a>
            
            
           
           </li>
           <li><a href="/docs/books/">Books</a>
            
            
           
           </li>
           <li><a href="/docs/online-resources/">Tutorials &amp; Other Resources</a>
            
            
           
           </li>
           <li><a href="/docs/faq/">FAQ</a>
            
            
           
           </li>
           <li class="last-child"><a href="https://wiki.postgresql.org">Wiki</a>
            
            
           </li>
            
           
        </ul>

       </div>
       
      </div> <!-- pgSideWrap -->
    </div>
    <div class="col-lg-10">
      <div id="pgContentWrap">
        


<div id="release-notes" class="row">
    <div class="col-md-10">
      <section>
        <h1>Release Notes <i class="far fa-file-alt"></i></h1>
        <h2>
          PostgreSQL
          9.6.19
        </h2>
      </section>
      <div id="docContent">
        <div class="NAVHEADER">
<table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<th colspan="4" align="center" valign="bottom"><a href="index.html">PostgreSQL 9.6.24 Documentation</a></th>
</tr>
<tr>
<td width="10%" align="left" valign="top"><a title="Release 9.6.20" href="release-9-6-20.html" accesskey="P">Prev</a></td>
<td width="10%" align="left" valign="top"><a href="release.html" accesskey="U">Up</a></td>
<td width="60%" align="center" valign="bottom">Appendix E. Release Notes</td>
<td width="20%" align="right" valign="top"><a title="Release 9.6.18" href="release-9-6-18.html" accesskey="N">Next</a></td>
</tr>
</table>
<hr class="c1" width="100%" /></div>
<div class="SECT1">
<h1 class="SECT1"><a name="RELEASE-9-6-19" id="RELEASE-9-6-19">E.6. Release 9.6.19</a></h1>
<div class="FORMALPARA">
<p><b>Release date:</b> 2020-08-13</p>
</div>
<p>This release contains a variety of fixes from 9.6.18. For information about new features in the 9.6 major release, see <a href="release-9-6.html">Section E.25</a>.</p>
<div class="SECT2">
<h2 class="SECT2"><a name="AEN132772" id="AEN132772">E.6.1. Migration to Version 9.6.19</a></h2>
<p>A dump/restore is not required for those running 9.6.X.</p>
<p>However, if you are upgrading from a version earlier than 9.6.16, see <a href="release-9-6-16.html">Section E.9</a>.</p>
</div>
<div class="SECT2">
<h2 class="SECT2"><a name="AEN132777" id="AEN132777">E.6.2. Changes</a></h2>
<ul>
<li>
<p>Make contrib modules' installation scripts more secure (Tom Lane)</p>
<p>Attacks similar to those described in CVE-2018-1058 could be carried out against an extension installation script, if the attacker can create objects in either the extension's target schema or the schema of some prerequisite extension. Since extensions often require superuser privilege to install, this can open a path to obtaining superuser privilege. To mitigate this risk, be more careful about the <tt class="VARNAME">search_path</tt> used to run an installation script; disable <tt class="VARNAME">check_function_bodies</tt> within the script; and fix catalog-adjustment queries used in some contrib modules to ensure they are secure. Also provide documentation to help third-party extension authors make their installation scripts secure. This is not a complete solution; extensions that depend on other extensions can still be at risk if installed carelessly. (CVE-2020-14350)</p>
</li>
<li>
<p>In logical replication walsender, fix failure to send feedback messages after sending a keepalive message (Álvaro Herrera)</p>
<p>This is a relatively minor problem when using built-in logical replication, because the built-in walreceiver will send a feedback reply (which clears the incorrect state) fairly frequently anyway. But with some other replication systems, such as <span class="APPLICATION">pglogical</span>, it causes significant performance issues.</p>
</li>
<li>
<p>Fix slow execution of <code class="FUNCTION">ts_headline()</code> (Tom Lane)</p>
<p>The phrase-search fix added in our previous set of minor releases could cause <code class="FUNCTION">ts_headline()</code> to take unreasonable amounts of time for long documents; to make matters worse, the query was not cancellable within the troublesome loop.</p>
</li>
<li>
<p>Ensure the <code class="FUNCTION">repeat()</code> function can be interrupted by query cancel (Joe Conway)</p>
</li>
<li>
<p>Fix mis-handling of <tt class="LITERAL">NaN</tt> inputs during parallel aggregation on <tt class="TYPE">numeric</tt>-type columns (Tom Lane)</p>
<p>If some partial aggregation workers found only <tt class="LITERAL">NaN</tt>s while others found only non-<tt class="LITERAL">NaN</tt>s, the results were combined incorrectly, possibly leading to the wrong overall result (i.e., not <tt class="LITERAL">NaN</tt> when it should be).</p>
</li>
<li>
<p>Undo double-quoting of index names in <tt class="COMMAND">EXPLAIN</tt>'s non-text output formats (Tom Lane, Euler Taveira)</p>
</li>
<li>
<p>Fix timing of constraint revalidation in <tt class="COMMAND">ALTER TABLE</tt> (David Rowley)</p>
<p>If <tt class="COMMAND">ALTER TABLE</tt> needs to fully rewrite the table's contents (for example, due to change of a column's data type) and also needs to scan the table to re-validate foreign keys or <tt class="LITERAL">CHECK</tt> constraints, it sometimes did things in the wrong order, leading to odd errors such as <span class="QUOTE">"could not read block 0 in file "base/nnnnn/nnnnn": read only 0 of 8192 bytes"</span>.</p>
</li>
<li>
<p>Cope with <tt class="LITERAL">LATERAL</tt> references in restriction clauses attached to an un-flattened sub-<tt class="LITERAL">SELECT</tt> in the <tt class="LITERAL">FROM</tt> clause (Tom Lane)</p>
<p>This oversight could result in assertion failures or crashes at query execution.</p>
</li>
<li>
<p>Avoid believing that a never-analyzed foreign table has zero tuples (Tom Lane)</p>
<p>This primarily affected the planner's estimate of the number of groups that would be obtained by <tt class="LITERAL">GROUP BY</tt>.</p>
</li>
<li>
<p>Improve error handling in the server's <tt class="FILENAME">buffile</tt> module (Thomas Munro)</p>
<p>Fix some cases where I/O errors were indistinguishable from reaching EOF, or were not reported at all. Also add details such as block numbers and byte counts where appropriate.</p>
</li>
<li>
<p>Fix conflict-checking anomalies in <tt class="LITERAL">SERIALIZABLE</tt> isolation mode (Peter Geoghegan)</p>
<p>If a concurrently-inserted tuple was updated by a different concurrent transaction, and neither tuple version was visible to the current transaction's snapshot, serialization conflict checking could draw the wrong conclusions about whether the tuple was relevant to the results of the current transaction. This could allow a serializable transaction to commit when it should have failed with a serialization error.</p>
</li>
<li>
<p>Avoid repeated marking of dead btree index entries as dead (Masahiko Sawada)</p>
<p>While functionally harmless, this led to useless WAL traffic when checksums are enabled or <tt class="VARNAME">wal_log_hints</tt> is on.</p>
</li>
<li>
<p>Fix failure of some code paths to acquire the correct lock before modifying <tt class="FILENAME">pg_control</tt> (Nathan Bossart, Fujii Masao)</p>
<p>This oversight could allow <tt class="FILENAME">pg_control</tt> to be written out with an inconsistent checksum, possibly causing trouble later, including inability to restart the database if it crashed before the next <tt class="FILENAME">pg_control</tt> update.</p>
</li>
<li>
<p>Fix errors in <code class="FUNCTION">currtid()</code> and <code class="FUNCTION">currtid2()</code> (Michael Paquier)</p>
<p>These functions (which are undocumented and used only by ancient versions of the ODBC driver) contained coding errors that could result in crashes, or in confusing error messages such as <span class="QUOTE">"could not open file"</span> when applied to a relation having no storage.</p>
</li>
<li>
<p>Avoid calling <code class="FUNCTION">elog()</code> or <code class="FUNCTION">palloc()</code> while holding a spinlock (Michael Paquier, Tom Lane)</p>
<p>Logic associated with replication slots had several violations of this coding rule. While the odds of trouble are quite low, an error in the called function would lead to a stuck spinlock.</p>
</li>
<li>
<p>Report out-of-disk-space errors properly in <span class="APPLICATION">pg_dump</span> and <span class="APPLICATION">pg_basebackup</span> (Justin Pryzby, Tom Lane, Álvaro Herrera)</p>
<p>Some code paths could produce silly reports like <span class="QUOTE">"could not write file: Success"</span>.</p>
</li>
<li>
<p>Fix parallel restore of tables having both table-level privileges and per-column privileges (Tom Lane)</p>
<p>The table-level privilege grants have to be applied first, but a parallel restore did not reliably order them that way; this could lead to <span class="QUOTE">"tuple concurrently updated"</span> errors, or to disappearance of some per-column privilege grants. The fix for this is to include dependency links between such entries in the archive file, meaning that a new dump has to be taken with a corrected <span class="APPLICATION">pg_dump</span> to ensure that the problem will not recur.</p>
</li>
<li>
<p>Ensure that <span class="APPLICATION">pg_upgrade</span> runs with <tt class="VARNAME">vacuum_defer_cleanup_age</tt> set to zero in the target cluster (Bruce Momjian)</p>
<p>If the target cluster's configuration has been modified to set <tt class="VARNAME">vacuum_defer_cleanup_age</tt> to a nonzero value, that prevented freezing of the system catalogs from working properly, which caused the upgrade to fail in confusing ways. Ensure that any such setting is overridden for the duration of the upgrade.</p>
</li>
<li>
<p>Fix <span class="APPLICATION">pg_recvlogical</span> to drain pending messages before exiting (Noah Misch)</p>
<p>Without this, the replication sender might detect a send failure and exit without making the expected final update to the replication slot's LSN position. That led to re-transmitting data after the next connection. It was also possible to miss error messages sent after the last data that <span class="APPLICATION">pg_recvlogical</span> wants to consume.</p>
</li>
<li>
<p>Fix <span class="APPLICATION">pg_rewind</span>'s handling of just-deleted files in the source data directory (Justin Pryzby, Michael Paquier)</p>
<p>When working with an on-line source database, concurrent file deletions are possible, but <span class="APPLICATION">pg_rewind</span> would get confused if deletion happened between seeing a file's directory entry and examining it with <code class="FUNCTION">stat()</code>.</p>
</li>
<li>
<p>Make <span class="APPLICATION">pg_test_fsync</span> use binary I/O mode on Windows (Michael Paquier)</p>
<p>Previously it wrote the test file in text mode, which is not an accurate reflection of <span class="PRODUCTNAME">PostgreSQL</span>'s actual usage.</p>
</li>
<li>
<p>Fix failure to initialize local state correctly in <tt class="FILENAME">contrib/dblink</tt> (Joe Conway)</p>
<p>With the right combination of circumstances, this could lead to <code class="FUNCTION">dblink_close()</code> issuing an unexpected remote <tt class="COMMAND">COMMIT</tt>.</p>
</li>
<li>
<p>Fix <tt class="FILENAME">contrib/pgcrypto</tt>'s misuse of <code class="FUNCTION">deflate()</code> (Tom Lane)</p>
<p>The <code class="FUNCTION">pgp_sym_encrypt</code> functions could produce incorrect compressed data due to mishandling of <span class="APPLICATION">zlib</span>'s API requirements. We have no reports of this error manifesting with stock <span class="APPLICATION">zlib</span>, but it can be seen when using IBM's <span class="APPLICATION">zlibNX</span> implementation.</p>
</li>
<li>
<p>Fix corner case in decompression logic in <tt class="FILENAME">contrib/pgcrypto</tt>'s <code class="FUNCTION">pgp_sym_decrypt</code> functions (Kyotaro Horiguchi, Michael Paquier)</p>
<p>A compressed stream can validly end with an empty packet, but the decompressor failed to handle this and would complain about corrupt data.</p>
</li>
<li>
<p>Use POSIX-standard <code class="FUNCTION">strsignal()</code> in place of the BSD-ish <tt class="LITERAL">sys_siglist[]</tt> (Tom Lane)</p>
<p>This avoids build failures with very recent versions of <span class="APPLICATION">glibc</span>.</p>
</li>
<li>
<p>Support building our NLS code with Microsoft Visual Studio 2015 or later (Juan José Santamaría Flecha, Davinder Singh, Amit Kapila)</p>
</li>
<li>
<p>Avoid possible failure of our MSVC install script when there is a file named <tt class="FILENAME">configure</tt> several levels above the source code tree (Arnold Müller)</p>
<p>This could confuse some logic that looked for <tt class="FILENAME">configure</tt> to identify the top level of the source tree.</p>
</li>
</ul>
</div>
</div>
<div class="NAVFOOTER">
<hr class="c1" width="100%" />
<table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><a href="release-9-6-20.html" accesskey="P">Prev</a></td>
<td width="34%" align="center" valign="top"><a href="index.html" accesskey="H">Home</a></td>
<td width="33%" align="right" valign="top"><a href="release-9-6-18.html" accesskey="N">Next</a></td>
</tr>
<tr>
<td width="33%" align="left" valign="top">Release 9.6.20</td>
<td width="34%" align="center" valign="top"><a href="release.html" accesskey="U">Up</a></td>
<td width="33%" align="right" valign="top">Release 9.6.18</td>
</tr>
</table>
</div>


      </div>
      <div class="row">
        <div class="col-md-3">
	  
            <a href="/docs/release/9.6.18/">
              Previous
            </a>
          
        </div>
        <div class="col-md-6 text-center">
          <p>
            <a href="/docs/release/">
              Return to the Release Notes Archive
            </a>
          </p>
        </div>
        <div class="col-md-3 text-right">
	   
            <a href="/docs/release/9.6.20/">
              Next
            </a>
          
        </div>
      </div>
    </div>
    <div class="col-md-2 version-list">
      <section>
        <h2>Versions</h2>
      </section>
      <ul>
        
          <li>
            
              <a href="/docs/release/9.6.24/">
                9.6.24
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.23/">
                9.6.23
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.22/">
                9.6.22
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.21/">
                9.6.21
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.20/">
                9.6.20
              </a>
            
          </li>
        
          <li>
            
              <strong>
                9.6.19
              </strong>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.18/">
                9.6.18
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.17/">
                9.6.17
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.16/">
                9.6.16
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.15/">
                9.6.15
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.14/">
                9.6.14
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.13/">
                9.6.13
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.12/">
                9.6.12
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.11/">
                9.6.11
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.10/">
                9.6.10
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.9/">
                9.6.9
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.8/">
                9.6.8
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.7/">
                9.6.7
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.6/">
                9.6.6
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.5/">
                9.6.5
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.4/">
                9.6.4
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.3/">
                9.6.3
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.2/">
                9.6.2
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.1/">
                9.6.1
              </a>
            
          </li>
        
          <li>
            
              <a href="/docs/release/9.6.0/">
                9.6.0
              </a>
            
          </li>
        
      </ul>
    </div>
</div>


      </div> <!-- pgContentWrap -->
    </div>
  </div>
</div>

    <!-- Footer -->
    <footer id="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <ul>
              <li><a href="https://twitter.com/postgresql"><img src="/media/img/atpostgresql.png" alt="@postgresql"></a></li>
              <li><a href="https://git.postgresql.org/gitweb/?p=postgresql.git"><img src="/media/img/git.png" alt="Git"></a></li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Copyright -->
      <div class="container">
        <a href="/about/policies/">Policies</a> |
        <a href="/about/policies/coc/">Code of Conduct</a> |
        <a href="/about/">About PostgreSQL</a> |
        <a href="/about/contact/">Contact</a><br/>
        <p>Copyright &copy; 1996-2024 The PostgreSQL Global Development Group</p>
      </div>
    </footer>
    <script src="/media/js/jquery-3.4.1.slim.min.js"></script>
    <script src="/media/js/popper-1.16.0.min.js"></script>
    <script src="/media/js/bootstrap-4.4.1.min.js"></script>
    <script src="/media/js/main.js?606fd482"></script>

  </body>
</html>
